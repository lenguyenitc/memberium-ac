<?php
/**
 * Copyright (c) 2012-2021 David J Bullock
 * Web Power and Light
 */

 if (defined('MEMBERIUM_HOME') ) { final 
class m4ac_c6rqypiacz4 { static 
function m4ac_zglmin6r8y4($m4ac_u10yzxwf4lc) { return MEMBERIUM_SCREEN_DIR . '/' . $m4ac_u10yzxwf4lc; }    private 
function m4ac_wxktlq7_cn0() { $m4ac__gwu0y1rh5 = MEMBERIUM_CLASS_DIR; $m4ac_m1f3qvkp2x5 = MEMBERIUM_MODULES_DIR; $this->m4ac_f0phv7db = [ 'm4ac_m4i8fbuxl' => "{$m4ac__gwu0y1rh5}activation", 'm4ac_f5ovcw_1iln' => "{$m4ac__gwu0y1rh5}admin", 'm4ac_tcrp5sn4' => "{$m4ac__gwu0y1rh5}admin-tabs", 'm4ac_s126v0fexga' => "{$m4ac__gwu0y1rh5}admin-ui", 'm4ac__g1kb3_xi8ov' => "{$m4ac__gwu0y1rh5}adminbar", 'm4ac__1axme3us9g5' => "{$m4ac__gwu0y1rh5}autologin", 'm4ac_c6rqypiacz4' => "{$m4ac__gwu0y1rh5}core", 'm4ac_w6cijtk1bs7n' => "{$m4ac__gwu0y1rh5}cron", 'm4ac_jekx0t9lfyu' => "{$m4ac__gwu0y1rh5}debuglog", 'm4ac_iqsra0infl' => "{$m4ac__gwu0y1rh5}diagnostics", 'm4ac_eghsod68x' => "{$m4ac__gwu0y1rh5}eventlog", 'm4ac_m7m0xgfv' => "{$m4ac__gwu0y1rh5}frontend", 'm4ac_q41vun96b' => "{$m4ac__gwu0y1rh5}gdpr", 'm4ac_xocn42gpf7d' => "{$m4ac__gwu0y1rh5}geolocation", 'm4ac_zl6pbja3' => "{$m4ac__gwu0y1rh5}health", 'm4ac_s7on8sg2zfyh' => "{$m4ac__gwu0y1rh5}/catchers/links", 'm4ac_d4yt1zjli' => "{$m4ac__gwu0y1rh5}login", 'm4ac_p58mfx3cua' => "{$m4ac__gwu0y1rh5}network", 'm4ac_mym496l81v' => "{$m4ac__gwu0y1rh5}pagehandling", 'm4ac_py81l76bi' => "{$m4ac__gwu0y1rh5}/catchers/posts", 'm4ac_tl5skz6cfptr' => "{$m4ac__gwu0y1rh5}provisioning", 'm4ac_audvsgbhpw' => "{$m4ac__gwu0y1rh5}scapi", 'm4ac_hpc5iv6omh' => "{$m4ac__gwu0y1rh5}sessions", 'm4ac_ulsfthjvam' => "{$m4ac__gwu0y1rh5}sitehealth", 'm4ac_yyac92bkugv1' => "{$m4ac__gwu0y1rh5}updater", 'm4ac_nnb_vwku' => "{$m4ac__gwu0y1rh5}user", 'm4ac_bem2ya5k' => "{$m4ac__gwu0y1rh5}user_utils", 'm4ac_kz0av3byx' => "{$m4ac__gwu0y1rh5}webhooks",  'm4ac_rntik2rdq0' => "{$m4ac__gwu0y1rh5}access", 'm4ac_bslvmz6poqi3' => "{$m4ac__gwu0y1rh5}access/admin", 'm4ac_jh_0f3wq' => "{$m4ac__gwu0y1rh5}access/frontend", 'm4ac_t3mcyjgw8' => "{$m4ac__gwu0y1rh5}access/admin-widgets", 'm4ac_cwgpe3b8ds' => "{$m4ac__gwu0y1rh5}access/admin-menu", 'm4ac_rd0bfus45xa' => "{$m4ac__gwu0y1rh5}access/admin-taxonomy",  'm4ac_onf7qt0io23y' => "{$m4ac__gwu0y1rh5}shortcodes/access", 'm4ac_iolwcy2dtx85' => "{$m4ac__gwu0y1rh5}shortcodes/aws", 'm4ac_yf1djits' => "{$m4ac__gwu0y1rh5}shortcodes/browser", 'm4ac_upimyenofs' => "{$m4ac__gwu0y1rh5}shortcodes", 'm4ac_h89of4mae3ik' => "{$m4ac__gwu0y1rh5}shortcodes/crm", 'm4ac_zmdyx73z4ka' => "{$m4ac__gwu0y1rh5}shortcodes/dates", 'm4ac_l7dx45zyekp' => "{$m4ac__gwu0y1rh5}shortcodes/general", 'm4ac_d12damx34c' => "{$m4ac__gwu0y1rh5}shortcodes/geoip", 'm4ac_tjhcw8ml' => "{$m4ac__gwu0y1rh5}shortcodes/standard", 'memberium_shortcodes_tags' => "{$m4ac__gwu0y1rh5}shortcodes/tags", 'm4ac__65hqa0xnb' => "{$m4ac__gwu0y1rh5}shortcodes/user", 'm4ac_tpdkxiac78' => "{$m4ac__gwu0y1rh5}shortcodes/debug", 'm4ac_sm063wn5bqyz' => "{$m4ac__gwu0y1rh5}shortcodes/directory",  'm4ac_nlg2b5n8m31' => "{$m4ac_m1f3qvkp2x5}/activity-tracker/core", 'm4ac_q3w06n9bm' => "{$m4ac_m1f3qvkp2x5}/affiliatewp/admin", 'm4ac_a6k921i7' => "{$m4ac_m1f3qvkp2x5}/affiliatewp/core", 'm4ac_b5s7nacipdo8' => "{$m4ac_m1f3qvkp2x5}/affiliatewp/shortcodes", 'm4ac_gtok6ui9' => "{$m4ac_m1f3qvkp2x5}/badgeos/admin", 'm4ac_z5imw3gzjvh' => "{$m4ac_m1f3qvkp2x5}/badgeos/core", 'm4ac_f3bt80q9ynda' => "{$m4ac_m1f3qvkp2x5}/badgeos/shortcodes", 'm4ac_kcy5l6erqaot' => "{$m4ac_m1f3qvkp2x5}/buddypress/admin", 'm4ac_ght6_dfuw87' => "{$m4ac_m1f3qvkp2x5}/buddypress/core", 'm4ac_nukiz24xg' => "{$m4ac_m1f3qvkp2x5}/gamipress/admin", 'm4ac_h2bfyivjs' => "{$m4ac_m1f3qvkp2x5}/gamipress/frontend", 'memberium_intercom_class' => "{$m4ac_m1f3qvkp2x5}/intercom/intercom", 'm4ac_z85jadbo' => "{$m4ac_m1f3qvkp2x5}/learndash/shortcodes", 'm4ac_wdt0ce9x5hqo' => "{$m4ac_m1f3qvkp2x5}/memberoni/memberoni", 'm4ac_cv4qfzco2k' => "{$m4ac_m1f3qvkp2x5}/groupaccounts/activation", 'm4ac_gha03gknz' => "{$m4ac_m1f3qvkp2x5}/groupaccounts/admin", 'm4ac_fxpbyk36nrs' => "{$m4ac_m1f3qvkp2x5}/groupaccounts/core", 'm4ac_ygq0pdca9j7' => "{$m4ac_m1f3qvkp2x5}/groupaccounts/frontend", 'm4ac_zljx6gq_' => "{$m4ac_m1f3qvkp2x5}/groupaccounts/shortcodes", 'm4ac_deyxmcw_' => "{$m4ac_m1f3qvkp2x5}/groupaccounts/catchers", 'm4ac_t_v0ya96r' => "{$m4ac_m1f3qvkp2x5}/woocommerce/catchers", 'm4ac_e73kfzga206j' => "{$m4ac_m1f3qvkp2x5}/woocommerce/frontend", 'm4ac_txjyu9r_4' => "{$m4ac_m1f3qvkp2x5}/woocommerce/shortcodes", 'memberium_wpcourseware_admin_class' => "{$m4ac_m1f3qvkp2x5}/wpcourseware/admin", 'm4ac_lpmev89gjdi' => "{$m4ac_m1f3qvkp2x5}/wpcourseware/core", 'memberium_wpcourseware_frontend_class' => "{$m4ac_m1f3qvkp2x5}/wpcourseware/frontend", 'm4ac_zljx6gq_' => "{$m4ac_m1f3qvkp2x5}/groupaccounts/shortcodes", ]; spl_autoload_register( [$this, 'm4ac_vt5kw8qp63c'] ); } 
function m4ac_vt5kw8qp63c(string $m4ac_eohq7wvlb0i) { $m4ac_eohq7wvlb0i = strtolower(trim($m4ac_eohq7wvlb0i) ); if ( array_key_exists($m4ac_eohq7wvlb0i, $this->m4ac_f0phv7db) ) { $m4ac_ixteyr6q = $this->m4ac_f0phv7db[$m4ac_eohq7wvlb0i] . '.php'; if ( file_exists($m4ac_ixteyr6q) ) { include_once $this->m4ac_f0phv7db[$m4ac_eohq7wvlb0i] . '.php'; } } } 
function m4ac_u8aqhxziu_y(string $m4ac_eohq7wvlb0i, string $m4ac_ixteyr6q) { $m4ac_eohq7wvlb0i = strtolower( trim($m4ac_eohq7wvlb0i) ); if (! array_key_exists($m4ac_eohq7wvlb0i, $this->m4ac_f0phv7db) ) { $this->m4ac_f0phv7db[$m4ac_eohq7wvlb0i] = $m4ac_ixteyr6q; } }    private 
function m4ac_b_mg9sehl() { $this->m4ac_rp4_enzix = get_option( 'memberium-ac', [] ); $this->m4ac_rp4_enzix = is_array($this->m4ac_rp4_enzix) ? $this->m4ac_rp4_enzix : []; $m4ac_zxjhw37dgfm = empty($m4ac_rp4_enzix); $m4ac_wdl2r3x6jg = [ 'ac_api_key' => '', 'ac_api_url' => '', 'ac_api_verified' => 0, 'ac_tracking_code' => '', 'allow_autologin' => 1, 'allow_local_logins' => 1, 'allow_wpadmin_role' => 'manage_options', 'allow_wpadmin' => 0, 'autogenerate_excerpts' => 0, 'autologin_authkeys' => '', 'autologout_time' => 0, 'autoupdate' => 1, 'beta_update_check' => 0, 'cache_flush' => 0, 'contact_history' => 0, 'db_sessions' => 0, 'default_page_redirect' => '', 'default_prohibited_action' => 'redirect', 'default_reglink_tag' => 0, 'disable_displayname_update' => 0, 'disable_login_sync' => 0, 'disable_lost_password' => 0, 'disable_password_reset' => 0, 'disable_xframe' => 0, 'display_errors' => 0, 'displayname_format' => '', 'dynamic_menus' => 0, 'enable_ac_tracking' => 1, 'event_log_webhooks' => 0, 'event_log' => 1, 'excerpt_length' => 55, 'global_excerpt' => '', 'hashing_mode' => 'crypt', 'html_shortcode_embed' => 1, 'http_post_key' => '', 'include_default_excerpt' => '', 'known_logins_only' => 0, 'last_login_field' => 0, 'local_auth_only' => 0, 'login_automation' => 0, 'login_log' => 0, 'login_url' => 0, 'loginlog_whitelist' => '', 'logout_automation' => 0, 'logout_tag' => 0, 'max_contact_age' => 0, 'maximum_login_ips' => 0, 'maximum_login_timeframe' => 0, 'microcache_compat_session' => 0, 'min_password_length' => 8, 'new_user_automation' => 0, 'new_user_registration_tag' => 0, 'page_inheritance' => 1, 'password_field' => '', 'password_reset_automation' => 0, 'password_strength' => 3, 'preview_mode' => 0, 'protect_feeds' => 1, 'random_seed' => '', 'referral_partner_order' => 1,  'registration_url' => 0, 'require_membership' => 0, 'secure_password_sync' => 0, 'secure_sync_automation' => 0, 'session_timeout' => 0, 'show_advanced_options' => 0, 'simultaneous_logins' => 0, 'site_ban_tag' => 0, 'site_lock_enabled' => 0, 'sync_affiliate' => 0, 'sync_meta_updates' => 0, 'sync_new_users' => 1, 'tag_dropdown_filter' => '', 'thrivecart_secret' => '', 'titlebar_role' => 'manage_options', 'tracking_enabled' => 0, 'two_pass_shortcodes' => 0, 'user_registration_tag' => 0, 'username_field' => '%email%', 'webhook_log_length' => 7, 'wp_autop' => 0, 'wp_welcome_email' => 0, 'wpadmin_role' => 'manage_options', 'wplogin_redirect_to' => 0,  ]; $this->m4ac_rp4_enzix = wp_parse_args($this->m4ac_rp4_enzix, $m4ac_wdl2r3x6jg); $this->m4ac_rp4_enzix['version'] = empty( $this->m4ac_rp4_enzix['version'] ) ? $this->m4ac_lx4jv6fi7k() : $this->m4ac_rp4_enzix['version']; if (function_exists('wp_generate_password') ) { $this->m4ac_rp4_enzix['autologin_authkeys'] = empty($this->m4ac_rp4_enzix['autologin_authkeys']) ? strtolower(wp_generate_password(12, false, false) ) : $this->m4ac_rp4_enzix['autologin_authkeys']; $this->m4ac_rp4_enzix['http_post_key'] = empty($this->m4ac_rp4_enzix['http_post_key']) ? strtolower(wp_generate_password(12, false, false) ) : $this->m4ac_rp4_enzix['http_post_key']; $this->m4ac_rp4_enzix['random_seed'] = empty($this->m4ac_rp4_enzix['random_seed']) ? strtolower(wp_generate_password(16, false, false) ) : $this->m4ac_rp4_enzix['random_seed']; } if ($m4ac_zxjhw37dgfm) { $this->m4ac_ixckjpb5(); } return $this->m4ac_rp4_enzix; } 
function m4ac_ixckjpb5() { if ( is_array($this->m4ac_rp4_enzix) && ! empty($this->m4ac_rp4_enzix) ) { $m4ac_ww61hmlri3p_ = update_option('memberium-ac', $this->m4ac_rp4_enzix, true); } } 
function m4ac_x280qrz9kmic(string $m4ac_ukqvxo6ne7 = '', string $m4ac_py5zsafh817 = '') { $m4ac_ihnr7cyv = $m4ac_py5zsafh817; if ( empty($m4ac_ukqvxo6ne7) ) { $m4ac_ihnr7cyv = $this->m4ac_rp4_enzix; } else { $m4ac_ihnr7cyv = isset($this->m4ac_rp4_enzix[$m4ac_ukqvxo6ne7]) ? $this->m4ac_rp4_enzix[$m4ac_ukqvxo6ne7] : $m4ac_py5zsafh817; } return $m4ac_ihnr7cyv; } 
function m4ac_vlpfetc4son5($m4ac_ihnr7cyv = null, $m4ac_ukqvxo6ne7 = null) { if (empty($m4ac_ukqvxo6ne7) ) { return false; } $dirty = false; if ($m4ac_ukqvxo6ne7) { $this->m4ac_rp4_enzix[$m4ac_ukqvxo6ne7] = $m4ac_ihnr7cyv; $dirty = true; } else { $this->m4ac_rp4_enzix = $m4ac_ihnr7cyv; $dirty = true; } if ($dirty) { $this->m4ac_ixckjpb5(); } } 
function m4ac_s46veg231x($m4ac_n5dw3y7vlku) { return array_filter($this->m4ac_rp4_enzix, function ($m4ac_ukqvxo6ne7) use($m4ac_n5dw3y7vlku) { return strpos($m4ac_ukqvxo6ne7, $m4ac_n5dw3y7vlku) === 0; }, ARRAY_FILTER_USE_KEY); } 
function m4ac_t7x9yju5nzv(string $m4ac_ukqvxo6ne7, $m4ac_ihnr7cyv = '') { $this->m4ac_xvl82k0ew3td[$m4ac_ukqvxo6ne7] = $m4ac_ihnr7cyv; } 
function m4ac_ahgvkp1ca($m4ac_ukqvxo6ne7 = '', $m4ac_py5zsafh817 = '') { return isset($this->m4ac_xvl82k0ew3td[$m4ac_ukqvxo6ne7]) ? $this->m4ac_xvl82k0ew3td[$m4ac_ukqvxo6ne7] : $m4ac_py5zsafh817; } 
function m4ac__plrg9jes(string $m4ac_ukqvxo6ne7 = '', $m4ac_mp8lbsyt21aj = 1) { $this->m4ac_xvl82k0ew3td[$m4ac_ukqvxo6ne7] = isset($this->m4ac_xvl82k0ew3td[$m4ac_ukqvxo6ne7]) ? $this->m4ac_xvl82k0ew3td[$m4ac_ukqvxo6ne7] : 0; $this->m4ac_xvl82k0ew3td[$m4ac_ukqvxo6ne7] = $this->m4ac_xvl82k0ew3td[$m4ac_ukqvxo6ne7] + $m4ac_mp8lbsyt21aj; return $this->m4ac_xvl82k0ew3td[$m4ac_ukqvxo6ne7]; } 
function m4ac_gdvbs52_y(string $m4ac_ukqvxo6ne7 = '', $m4ac_mp8lbsyt21aj = 1) { $this->m4ac_xvl82k0ew3td[$m4ac_ukqvxo6ne7] = isset($this->m4ac_xvl82k0ew3td[$m4ac_ukqvxo6ne7]) ? $this->m4ac_xvl82k0ew3td[$m4ac_ukqvxo6ne7] : 0; $this->m4ac_xvl82k0ew3td[$m4ac_ukqvxo6ne7] = $this->m4ac_xvl82k0ew3td[$m4ac_ukqvxo6ne7] - $m4ac_mp8lbsyt21aj; return $this->m4ac_xvl82k0ew3td[$m4ac_ukqvxo6ne7]; }     
function m4ac_y5v2_wtko38p( $m4ac_w6cdrpiqox38 ) { if ( defined( 'WPAL_DISABLE_SSL_VERIFY' ) && WPAL_DISABLE_SSL_VERIFY == true ) { curl_setopt( $m4ac_w6cdrpiqox38, CURLOPT_SSL_VERIFYHOST, false ); curl_setopt( $m4ac_w6cdrpiqox38, CURLOPT_SSL_VERIFYPEER, false ); } return $m4ac_w6cdrpiqox38; } 
function m4ac_h7698v5zt( $m4ac_qqdc7hymbixw, $m4ac_atr94xdeg3 ) { if ( $m4ac_qqdc7hymbixw['sslverify'] == true ) { if ( defined( 'WPAL_DISABLE_SSL_VERIFY' ) && WPAL_DISABLE_SSL_VERIFY == true ) { $m4ac_qqdc7hymbixw['sslverify'] = false; } } return $m4ac_qqdc7hymbixw; } 
function m4ac_sanofbyp( $m4ac_id7k9t2q ) { $m4ac_id7k9t2q[] = 'memb_shortcodeblocks'; $m4ac_id7k9t2q[] = 'partials'; return $m4ac_id7k9t2q; } 
function m4ac_k6b8c0f7g5( $m4ac_at_5xofh = 0 ) { $m4ac_fic2e07vfkz = false; $m4ac_fheyfujga6 = empty( $m4ac_at_5xofh ) ? wp_get_current_user() : get_user_by( 'ID', $m4ac_at_5xofh ); if ( is_a( $m4ac_fheyfujga6, 'WP_User' ) ) { $m4ac_fvwzlkf8hjxc = [ 'manage_options', 'activate_plugins', 'update_plugins', ]; foreach( $m4ac_fvwzlkf8hjxc as $m4ac_pxd0hf_o9c2l ) { $m4ac_fic2e07vfkz = $m4ac_fheyfujga6->has_cap( $m4ac_pxd0hf_o9c2l ); if ($m4ac_fic2e07vfkz) { break; } } } return $m4ac_fic2e07vfkz; }    
function m4ac_cbc5pz_ng4() { static $m4ac_n145ehr20k6_ = ''; if (empty($m4ac_n145ehr20k6_)) { include ABSPATH . WPINC . '/version.php'; $m4ac_n145ehr20k6_ = $wp_version; } return $m4ac_n145ehr20k6_; } 
function m4ac_lxda3js50urg() { return function_exists('wp_get_environment_type') ? wp_get_environment_type() :'production'; } 
function m4ac_yiqu4k3xj5() { return $this->ACAPI; } 
function m4ac_bztk3xj1() { static $m4ac_h57xqitcp = ''; if ( empty( $m4ac_h57xqitcp ) ) { $m4ac_h57xqitcp = strtolower( trim( $this->m4ac_x280qrz9kmic('ac_api_url' ) ) ); $m4ac_h57xqitcp = str_replace( 'https://', '', $m4ac_h57xqitcp ); $m4ac_h57xqitcp = substr( $m4ac_h57xqitcp, 0, strpos( $m4ac_h57xqitcp, '.' ) ); } return $m4ac_h57xqitcp; } 
function m4ac_w8ohueyv() : int { return isset( $_SESSION['memb_user']['crm_id'] ) ? $_SESSION['memb_user']['crm_id'] : 0; } 
function m4ac_lx4jv6fi7k() { static $m4ac_cwimbugn = false;  if (! $m4ac_cwimbugn) { include_once ABSPATH . '/wp-admin/includes/plugin.php'; $m4ac_cwimbugn = trim(get_plugin_data( MEMBERIUM_HOME, false, false)['Version'] );  } return $m4ac_cwimbugn; } 
function m4ac_tjtlxicdh() { return $this->doing_webhooks; } 
function m4ac_y6y5ja741e09() { return (bool) $this->sso_mode; } 
function m4ac_jptd7w_v() { return 'memberium-ac'; }    
function m4ac_n9fdhnm102( $m4ac_qq68icplb9 ) { $this->ACAPI = $m4ac_qq68icplb9; } 
function m4ac_uvx0d_oj8( $m4ac_bac0ixmlwf ) { $this->doing_webhooks = (bool) $m4ac_bac0ixmlwf; } 
function m4ac__d9l76uck( $m4ac_oh1lc0zg = true ) { $this->sso_mode = (boolean) $m4ac_oh1lc0zg; }    
function m4ac_dfujoe3avi_() { return $this->admin = m4ac_f5ovcw_1iln::m4ac_zw_dhmca(); } 
function m4ac_u1avl_bn() { return $this->admin = m4ac_m7m0xgfv::m4ac_zw_dhmca(); }    
function m4ac_lgf84yvz2tqu() { return (boolean) $this->m4ac_x280qrz9kmic( 'ac_api_verified' ); } 
function m4ac_hokh9qd6tmn4() { $m4ac_z_b0krof4xum = $this->m4ac_x280qrz9kmic( 'ac_api_verified' ); if (empty( $m4ac_z_b0krof4xum ) ) { return false; } set_time_limit( 30 ); $m4ac_dw9iz548 = $this->m4ac_yiqu4k3xj5()->api( 'account/view' ); } 
function m4ac_kvicopkwy() { global $wpdb; $m4ac_xtcz6bi97flk = "DELETE FROM `{$wpdb->options}` WHERE `option_name` LIKE '%transient_memberium%'; "; $wpdb->query( $m4ac_xtcz6bi97flk ); set_time_limit(120); $this->m4ac_hokh9qd6tmn4(); $this->m4ac_ufh0e5zg7dt(); $this->m4ac_p05w6kivzl4(); $this->m4ac_yi6vneh3(); $this->m4ac_k7c1lfkywtju(); $this->m4ac_hvr5tkz6is(); $this->m4ac_ufh0e5zg7dt(); $this->m4ac_q3q51rf7wcs(); if ( is_admin() ) { m4ac_s126v0fexga::m4ac_g3ne76s9bjm( 'ActiveCampaign Synchronized', 'update' ); } } 
function m4ac_hvr5tkz6is() { global $wpdb; $m4ac_z_b0krof4xum = $this->m4ac_x280qrz9kmic('ac_api_verified'); if (empty($m4ac_z_b0krof4xum) ) { return false; } $m4ac_lmfaycbp_ot = 100; $m4ac_a0_ngly9c = 0; $m4ac_o9jeq_nh = 0; $m4ac_h57xqitcp = $this->m4ac_bztk3xj1(); $m4ac_enc0v8u7g = []; do { set_time_limit(30); $m4ac_rld1a_268o = $this->m4ac_yiqu4k3xj5()->api('automation/list?offset=' . $m4ac_a0_ngly9c . '&limit=' . $m4ac_lmfaycbp_ot); $m4ac_cjr79h3t = 0; if (is_object($m4ac_rld1a_268o) ) { foreach ($m4ac_rld1a_268o as $m4ac_pra1hw2lx) { if (is_object($m4ac_pra1hw2lx) && property_exists($m4ac_pra1hw2lx, 'id') ) { $m4ac_cjr79h3t++; $m4ac_xtcz6bi97flk = 'REPLACE INTO `' . MEMBERIUM_DB_AUTOMATIONS . '` SET `id` = %d, `appname` = %s, `name` = %s, `status` = %d ;'; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_pra1hw2lx->id, $m4ac_h57xqitcp, $m4ac_pra1hw2lx->name, $m4ac_pra1hw2lx->status); $wpdb->query($m4ac_xtcz6bi97flk); $m4ac_enc0v8u7g[] = $m4ac_pra1hw2lx->id; } } } $m4ac_o9jeq_nh = $m4ac_o9jeq_nh + $m4ac_cjr79h3t; $m4ac_a0_ngly9c = $m4ac_a0_ngly9c + $m4ac_lmfaycbp_ot; } while ($m4ac_cjr79h3t == $m4ac_lmfaycbp_ot); if (! empty($m4ac_enc0v8u7g) ) { $m4ac_wupiavc36slf = count($m4ac_enc0v8u7g); $m4ac_enc0v8u7g = implode(',', $m4ac_enc0v8u7g); $m4ac_xtcz6bi97flk = 'DELETE FROM `' . MEMBERIUM_DB_AUTOMATIONS . '` WHERE `appname` = %s AND `id` NOT IN (' . $m4ac_enc0v8u7g . ') ;'; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_h57xqitcp); $wpdb->query($m4ac_xtcz6bi97flk); unset($m4ac_rld1a_268o, $m4ac_xtcz6bi97flk, $m4ac_cjr79h3t); } else { $m4ac_wupiavc36slf = 0; } $m4ac_syw1ch7dbe = get_option('memberium-ac-sync-time', [] ); $m4ac_syw1ch7dbe['automations'] = time(); update_option('memberium-ac-sync-time', $m4ac_syw1ch7dbe, true); wp_cache_delete('automations', 'memberiumac'); return $m4ac_wupiavc36slf; } 
function m4ac_ufh0e5zg7dt() { $m4ac_z_b0krof4xum = $this->m4ac_x280qrz9kmic('ac_api_verified'); if (empty($m4ac_z_b0krof4xum) ) { return false; } set_time_limit(30); $m4ac_bycd4s2io = json_decode($this->m4ac_yiqu4k3xj5()->api('tracking/event_list'), true); $this->m4ac_vlpfetc4son5( (int) (bool) $m4ac_bycd4s2io['enabled'], 'tracking_enabled'); if ($m4ac_bycd4s2io['enabled']) { update_option(MEMBERIUM_AC_EVENTS, $m4ac_bycd4s2io['events']); }  $m4ac_syw1ch7dbe = get_option('memberium-ac-sync-time', [] ); $m4ac_syw1ch7dbe['events'] = time(); update_option('memberium-ac-sync-time', $m4ac_syw1ch7dbe, true); return count($m4ac_bycd4s2io['events']); } 
function m4ac_p05w6kivzl4() { global $wpdb; $m4ac_z_b0krof4xum = $this->m4ac_x280qrz9kmic('ac_api_verified'); if (empty($m4ac_z_b0krof4xum) ) { return false; } set_time_limit(30); $m4ac_h57xqitcp = $this->m4ac_bztk3xj1(); $m4ac_u9uhl_ci87 = $this->m4ac_yiqu4k3xj5()->api('list/field_view?ids=all'); $m4ac__5168racihv = []; $m4ac_syw1ch7dbe = get_option('memberium-ac-sync-time', []); if ($m4ac_u9uhl_ci87->success) { foreach ($m4ac_u9uhl_ci87 as $m4ac_wc9s2dnt4y) { $m4ac_rp4_enzix = empty($m4ac_wc9s2dnt4y->options) ? '' : serialize($m4ac_wc9s2dnt4y->options); if (is_object($m4ac_wc9s2dnt4y) && $m4ac_wc9s2dnt4y->id) { $m4ac_xtcz6bi97flk = 'REPLACE INTO `' . MEMBERIUM_DB_FIELDS . '` SET `id` = %d, `appname` = %s, `name` = %s, `type` = %s, `element` = %s, `tag` = %s, `options` = %s ;'; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_wc9s2dnt4y->id, $m4ac_h57xqitcp, $m4ac_wc9s2dnt4y->title, $m4ac_wc9s2dnt4y->type, $m4ac_wc9s2dnt4y->element, $m4ac_wc9s2dnt4y->tag, $m4ac_rp4_enzix); $wpdb->query($m4ac_xtcz6bi97flk); $m4ac__5168racihv[] = $m4ac_wc9s2dnt4y->id; } }  if (! empty($m4ac__5168racihv) ) { $m4ac_xtcz6bi97flk = 'DELETE FROM `' . MEMBERIUM_DB_FIELDS . '` WHERE `appname` = %s AND `id` NOT IN (' . implode(',', $m4ac__5168racihv) . ') ;'; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_h57xqitcp); $wpdb->query($m4ac_xtcz6bi97flk); unset($m4ac_u9uhl_ci87, $m4ac_wc9s2dnt4y, $m4ac_xtcz6bi97flk); } } $m4ac_syw1ch7dbe['custom_fields'] = time(); update_option('memberium-ac-sync-time', $m4ac_syw1ch7dbe, true); return count($m4ac__5168racihv); } 
function m4ac_q3q51rf7wcs() { global $wpdb; $m4ac_z_b0krof4xum = $this->m4ac_x280qrz9kmic('ac_api_verified'); if (empty($m4ac_z_b0krof4xum) ) { return false; } $m4ac_bycd4s2io = $this->m4ac_yiqu4k3xj5()->api('form/getforms'); $m4ac_x7z6c0tbfw = []; if (is_object($m4ac_bycd4s2io) && $m4ac_bycd4s2io->success) { $m4ac_h57xqitcp = $this->m4ac_bztk3xj1();  foreach ($m4ac_bycd4s2io as $m4ac_y0x7qa_kewg) { if (is_object($m4ac_y0x7qa_kewg) ) { $m4ac_xtcz6bi97flk = 'REPLACE INTO `' . MEMBERIUM_DB_FORMS . '` SET `id` = %d, `appname` = %s, `name` = %s, `data` = %s ;'; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_y0x7qa_kewg->id, $m4ac_h57xqitcp, $m4ac_y0x7qa_kewg->name, json_encode($m4ac_y0x7qa_kewg) ); $wpdb->query($m4ac_xtcz6bi97flk); $m4ac_x7z6c0tbfw[] = $m4ac_y0x7qa_kewg->id; } }  if (! empty($m4ac_x7z6c0tbfw) ) { $m4ac_xtcz6bi97flk = 'DELETE FROM `' . MEMBERIUM_DB_FORMS . '` WHERE `appname` = %s AND `id` NOT IN (' . implode(',', $m4ac_x7z6c0tbfw) . ') ;'; } else { $m4ac_xtcz6bi97flk = 'DELETE FROM `' . MEMBERIUM_DB_FORMS . '` WHERE `appname` = %s ;'; } $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_h57xqitcp); $wpdb->query($m4ac_xtcz6bi97flk); unset($m4ac_bycd4s2io, $m4ac_y0x7qa_kewg, $m4ac_xtcz6bi97flk); $m4ac_syw1ch7dbe = get_option('memberium-ac-sync-time', [] ); $m4ac_syw1ch7dbe['forms'] = time(); update_option('memberium-ac-sync-time', $m4ac_syw1ch7dbe, true); } return count($m4ac_x7z6c0tbfw); } 
function m4ac_yi6vneh3() { global $wpdb; $m4ac_z_b0krof4xum = $this->m4ac_x280qrz9kmic('ac_api_verified'); if (empty($m4ac_z_b0krof4xum) ) { return false; } $m4ac_h57xqitcp = $this->m4ac_bztk3xj1(); $m4ac_m_jevhs4fwnp = $this->m4ac_yiqu4k3xj5()->api('list/list?ids=all&full=1&global_fields=1'); $m4ac_p91zlyenjra = []; if (is_object($m4ac_m_jevhs4fwnp) && $m4ac_m_jevhs4fwnp->success) {   foreach ($m4ac_m_jevhs4fwnp as $m4ac_ckfu62mpdy) { if (is_object($m4ac_ckfu62mpdy) && $m4ac_ckfu62mpdy->id) { $m4ac_xtcz6bi97flk = 'REPLACE INTO `' . MEMBERIUM_DB_LISTS . '` SET `id` = %d, `appname` = %s, `name` = %s, `data` = %s ;'; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_ckfu62mpdy->id, $m4ac_h57xqitcp, $m4ac_ckfu62mpdy->name, json_encode($m4ac_ckfu62mpdy) ); $wpdb->query($m4ac_xtcz6bi97flk); $m4ac_p91zlyenjra[] = $m4ac_ckfu62mpdy->id; } }  if (! empty($m4ac_p91zlyenjra) ) { $m4ac_xtcz6bi97flk = 'DELETE FROM `' . MEMBERIUM_DB_LISTS . '` WHERE `appname` = %s AND `id` NOT IN (' . implode(',', $m4ac_p91zlyenjra) . ') ;'; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_h57xqitcp); $wpdb->query($m4ac_xtcz6bi97flk); unset($m4ac_ckfu62mpdy, $m4ac_xtcz6bi97flk); } $m4ac_syw1ch7dbe = get_option('memberium-ac-sync-time', [] ); $m4ac_syw1ch7dbe['lists'] = time(); update_option('memberium-ac-sync-time', $m4ac_syw1ch7dbe, true); } return count($m4ac_p91zlyenjra); } 
function m4ac_k7c1lfkywtju() { global $wpdb; $m4ac_z_b0krof4xum = $this->m4ac_x280qrz9kmic('ac_api_verified'); if (empty($m4ac_z_b0krof4xum) ) { return false; } $m4ac_xtcz6bi97flk = "SELECT `character_maximum_length` FROM `information_schema`.`columns` WHERE `table_schema` = '" . DB_NAME . "' AND `table_name` = '". MEMBERIUM_DB_TAGS . "' AND column_name = 'name';"; $m4ac_g8qgcp506jf = $wpdb->get_var($m4ac_xtcz6bi97flk); $m4ac_lmfaycbp_ot = 100; $m4ac_a0_ngly9c = 0; $m4ac_o9jeq_nh = 0; $m4ac_h57xqitcp = $this->m4ac_bztk3xj1(); $m4ac_vwur90xpqe = []; $m4ac_jziexsy917g4 = 10; $m4ac_qsywxdnb9h3 = false; $m4ac_hm_o67zdsr = trim( $this->m4ac_x280qrz9kmic('ac_api_url'), '/') . '/api/3/tags'; $m4ac_il1s6zenby8w = $this->m4ac_x280qrz9kmic('ac_api_key'); $m4ac_p0nxt9mec78 = 0; do { set_time_limit(30); $m4ac_ah90o86m = [ 'api_key' => $m4ac_il1s6zenby8w, 'limit' => $m4ac_lmfaycbp_ot, 'offset' => $m4ac_a0_ngly9c, 'orders[id]' => 'ASC', ]; $m4ac_qsywxdnb9h3 = 0; $m4ac_g40s178i = 0; $m4ac_atr94xdeg3 = add_query_arg($m4ac_ah90o86m, $m4ac_hm_o67zdsr); $api_start_time = (float) microtime(); $m4ac_md7c8zsu2o = wp_remote_get($m4ac_atr94xdeg3); $api_end_time = (float) microtime(); $api_duration_seconds = abs($api_end_time - $api_start_time); if (! is_a($m4ac_md7c8zsu2o, 'WP_Error')) { $m4ac_j0e14tousp_ = json_decode(wp_remote_retrieve_body($m4ac_md7c8zsu2o) ); $m4ac_qsywxdnb9h3 = isset($m4ac_j0e14tousp_->meta->total) ? (int) $m4ac_j0e14tousp_->meta->total : 0; $m4ac_g40s178i = is_array($m4ac_j0e14tousp_->tags) ? count($m4ac_j0e14tousp_->tags) : 0; } else { $m4ac_p0nxt9mec78++; } do_action('qm/info', "Memberium syncTags ActiveCampaign API Call {$api_duration_seconds} sec, {$m4ac_g40s178i} tags"); if (is_object($m4ac_j0e14tousp_) && $m4ac_qsywxdnb9h3 > 0 && is_array($m4ac_j0e14tousp_->tags) ) { $m4ac_o9jeq_nh = $m4ac_j0e14tousp_->meta->total; foreach ($m4ac_j0e14tousp_->tags as $m4ac_o75qrnlisk) { if (strlen($m4ac_o75qrnlisk->tag) > $m4ac_g8qgcp506jf) { $m4ac_g8qgcp506jf = strlen($m4ac_o75qrnlisk->tag); $m4ac_xtcz6bi97flk = "ALTER TABLE `" . MEMBERIUM_DB_TAGS . "` CHANGE COLUMN `name` `name` VARCHAR(" . $m4ac_g8qgcp506jf . ");"; $wpdb->query($m4ac_xtcz6bi97flk); } $m4ac_rsau1b7dj2lr = (int) trim($m4ac_o75qrnlisk->id); $m4ac_vwur90xpqe[] = $m4ac_rsau1b7dj2lr; $m4ac_xtcz6bi97flk = 'REPLACE INTO `' . MEMBERIUM_DB_TAGS . '` SET `id` = %d, `appname` = %s, `name` = %s ;'; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_rsau1b7dj2lr, $m4ac_h57xqitcp, $m4ac_o75qrnlisk->tag); $wpdb->query($m4ac_xtcz6bi97flk); } } $m4ac_a0_ngly9c = $m4ac_a0_ngly9c + $m4ac_lmfaycbp_ot; } while ($m4ac_g40s178i == $m4ac_lmfaycbp_ot);   if (! empty($m4ac_vwur90xpqe) && $m4ac_qsywxdnb9h3 == count($m4ac_vwur90xpqe) ) { $m4ac_vwur90xpqe = implode(',', $m4ac_vwur90xpqe); $m4ac_xtcz6bi97flk = "DELETE FROM `" . MEMBERIUM_DB_TAGS . "` WHERE `appname` = %s AND `id` NOT IN ( {$m4ac_vwur90xpqe} ) ;"; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_h57xqitcp); $wpdb->query($m4ac_xtcz6bi97flk); } unset($m4ac_vwur90xpqe, $m4ac_xtcz6bi97flk); $m4ac_syw1ch7dbe = get_option('memberium-ac-sync-time', [] ); $m4ac_syw1ch7dbe['tags'] = time(); update_option('memberium-ac-sync-time', $m4ac_syw1ch7dbe, true); return $m4ac_o9jeq_nh; } 
function m4ac_hr0lmxzj( $m4ac_xqrupw5i = '' ) { $m4ac_z_b0krof4xum = $this->m4ac_x280qrz9kmic( 'ac_api_verified' ); if ( empty( $m4ac_z_b0krof4xum ) ) { return false; } if ( empty( $m4ac_xqrupw5i ) ) { return false; } $m4ac_bxvpge5qkdo9 = ['domain' => $m4ac_xqrupw5i]; $m4ac_fic2e07vfkz = $this->m4ac_yiqu4k3xj5()->api( 'tracking/whitelist', $m4ac_bxvpge5qkdo9 ); }     
function m4ac_ae032ksp7bqx( $m4ac_md7c8zsu2o = [], $m4ac_jtf3bjyul2d = false, $m4ac_at_5xofh = null ) { if ( ! $m4ac_jtf3bjyul2d ) { $m4ac_ph3jd79cvf6 = $this->m4ac_yp_soy5m6wi(); if ( ! empty( $m4ac_ph3jd79cvf6 ) ) { $this->m4ac_x9th4ox_8jlp = $m4ac_ph3jd79cvf6; } } else { $this->m4ac_x9th4ox_8jlp = null; } return $m4ac_md7c8zsu2o; } 
function m4ac_li_dktp6q( $m4ac_at_5xofh ) { if (! $this->m4ac_x280qrz9kmic('sync_new_users') ) { return; }  if ( user_can( $m4ac_at_5xofh, 'edit_others_posts' ) ) { return; } $m4ac_uo08x_g7 = (int) m4ac_bem2ya5k::m4ac_pm63av15g( $m4ac_at_5xofh ); if ($m4ac_uo08x_g7) { return $m4ac_uo08x_g7; } $m4ac_fheyfujga6 = get_user_by('id', $m4ac_at_5xofh); $m4ac_nv8w41xoc_3 = get_user_meta($m4ac_at_5xofh); $m4ac_u9uhl_ci87 = []; $m4ac_hix162sdofjr = $this->m4ac_x280qrz9kmic('password_field'); $m4ac_bsijd7zrx = [  'first_name' => 'firstname', 'last_name' => 'lastname', 'billing_company' => 'orgname', ]; $m4ac_bsijd7zrx = apply_filters('m4ac/maps/usermeta', $m4ac_bsijd7zrx); foreach($m4ac_bsijd7zrx as $m4ac_jj79h_ou1vm => $m4ac_woab9rpxw) { if (! empty($m4ac_nv8w41xoc_3[$m4ac_jj79h_ou1vm][0])) { $m4ac_u9uhl_ci87[$m4ac_woab9rpxw] = trim($m4ac_nv8w41xoc_3[$m4ac_jj79h_ou1vm][0]); } } $m4ac_u9uhl_ci87 = apply_filters('memberium/user/register/fields', $m4ac_u9uhl_ci87, $m4ac_fheyfujga6); $m4ac_u9uhl_ci87 = array_filter($m4ac_u9uhl_ci87); if (! empty($m4ac_hix162sdofjr) && ! empty($this->m4ac_x9th4ox_8jlp) ) { $m4ac_u9uhl_ci87[$m4ac_hix162sdofjr] = $this->m4ac_x9th4ox_8jlp; $this->m4ac_x9th4ox_8jlp = null; }  $m4ac_bsijd7zrx = [ 'user_email' => 'email', ]; $m4ac_bsijd7zrx = apply_filters('m4ac/maps/userdata', $m4ac_bsijd7zrx); foreach($m4ac_bsijd7zrx as $m4ac_jj79h_ou1vm => $m4ac_woab9rpxw) { if (! empty($m4ac_fheyfujga6->data->$m4ac_jj79h_ou1vm) ) { $m4ac_u9uhl_ci87[$m4ac_woab9rpxw] = trim($m4ac_fheyfujga6->data->$m4ac_jj79h_ou1vm); } } $m4ac_ah90o86m = [ 'fields' => $m4ac_u9uhl_ci87, ]; $m4ac_uo08x_g7 = $this->m4ac_uj7435zxcb2($m4ac_ah90o86m); if ($m4ac_uo08x_g7) { m4ac_bem2ya5k::m4ac_w_b7do4p($m4ac_at_5xofh, $m4ac_uo08x_g7); $this->m4ac__1x8mup2($m4ac_at_5xofh); $m4ac_rsau1b7dj2lr = $this->m4ac_x280qrz9kmic('new_user_registration_tag'); $this->m4ac_ocsjt69hrb($m4ac_rsau1b7dj2lr, $m4ac_uo08x_g7); } $this->m4ac_c17vlcx3a4($m4ac_at_5xofh); } 
function m4ac__1x8mup2( $m4ac_at_5xofh = 0 ) { if ( $this->m4ac_tjtlxicdh() ) { return; } $m4ac_uo08x_g7 = $this->m4ac_pm63av15g( $m4ac_at_5xofh ); if ($m4ac_uo08x_g7) { $m4ac_tfkvbnqda = $this->m4ac_x280qrz9kmic('secure_password_sync'); if ($m4ac_tfkvbnqda) { $m4ac_yo371x9id = get_user_by('id', $m4ac_at_5xofh); $m4ac_rex7bvpq = $m4ac_yo371x9id->data->user_pass; $m4ac_xhq87ztbe9 = isset($_SESSION['memb_user']['id']) ? $_SESSION['memb_user']['id'] : 0; $m4ac_u9uhl_ci87 = [ $m4ac_tfkvbnqda => $m4ac_yo371x9id->data->user_pass, ];  $m4ac_fic2e07vfkz = $this->m4ac_eg298f5u($m4ac_uo08x_g7, $m4ac_u9uhl_ci87);  $m4ac_qd9rwc_as4 = $this->m4ac_x280qrz9kmic('secure_sync_automation'); if ($m4ac_qd9rwc_as4) { $this->m4ac_lmhdiugb6cs($m4ac_qd9rwc_as4, $m4ac_uo08x_g7); } } } } 
function m4ac_cze9c2qfxou($m4ac_b0zgjo5s4b3) { global $wpdb; $m4ac_b0zgjo5s4b3 = trim($m4ac_b0zgjo5s4b3); if (empty($m4ac_b0zgjo5s4b3) ) { return false; } if (! is_array($m4ac_b0zgjo5s4b3) ) { $m4ac_b0zgjo5s4b3 = explode(',', $m4ac_b0zgjo5s4b3); } foreach ($m4ac_b0zgjo5s4b3 as $m4ac_lj_fwoc5ub1y => $m4ac_o75qrnlisk) { $m4ac_o75qrnlisk[$m4ac_lj_fwoc5ub1y] = trim($m4ac_o75qrnlisk); }  $m4ac_d78sk4qc3i = $this->m4ac_bztk3xj1() . '-' . time() . '@example.com'; $m4ac_md7c8zsu2o = [ 'email' => $m4ac_d78sk4qc3i, 'first_name' => 'Test User', 'last_name' => 'Delete Me', 'tags' => implode(',', $m4ac_b0zgjo5s4b3), ]; $m4ac_fic2e07vfkz = $this->m4ac_yiqu4k3xj5()->api('contact/add', $m4ac_md7c8zsu2o); $m4ac_fic2e07vfkz = $this->m4ac_yiqu4k3xj5()->api('contact/view?email=' . urlencode($m4ac_d78sk4qc3i) ); if (! empty($m4ac_fic2e07vfkz->id) ) { $m4ac_fic2e07vfkz = $this->m4ac_yiqu4k3xj5()->api('contact/delete?id=' . $m4ac_fic2e07vfkz->id); } $this->m4ac_k7c1lfkywtju(); return true; } 
function m4ac_pjn35hm8xrf7($m4ac_uo08x_g7, $m4ac_bxvpge5qkdo9, $m4ac_ya4km5wlsd = false) { if (empty($m4ac_uo08x_g7)) { return false; } $m4ac_rld1a_268o = isset($m4ac_bxvpge5qkdo9['automations']) ? $m4ac_bxvpge5qkdo9['automations'] : ''; $m4ac_suls5az4 = isset($m4ac_bxvpge5qkdo9['full_update']) ? $m4ac_bxvpge5qkdo9['full_update'] : ''; $m4ac_j0e14tousp_ = isset($m4ac_bxvpge5qkdo9['tags']) ? $m4ac_bxvpge5qkdo9['tags'] : ''; if (! empty($m4ac_rld1a_268o) ) { $this->m4ac_lmhdiugb6cs($m4ac_rld1a_268o, $m4ac_uo08x_g7); } if (! empty($m4ac_j0e14tousp_) ) { $this->m4ac_ocsjt69hrb($m4ac_j0e14tousp_, $m4ac_uo08x_g7, $m4ac_suls5az4, $m4ac_ya4km5wlsd); } } 
function m4ac_lmhdiugb6cs($m4ac_rld1a_268o = '', $m4ac_uo08x_g7 = false) { if (! m4ac_tl5skz6cfptr::m4ac_e28auldn()) { return; } if (! $m4ac_uo08x_g7) { $m4ac_uo08x_g7 = $this->m4ac_w8ohueyv(); } if ($m4ac_uo08x_g7 < 1) { return; } if (empty($m4ac_rld1a_268o) ) { return; } if (! is_array($m4ac_rld1a_268o) ) { $m4ac_rld1a_268o = array_filter( explode( ',', $m4ac_rld1a_268o ) ); } $m4ac_wu21vsg5q = false; if (is_array($m4ac_rld1a_268o) && ! empty($m4ac_rld1a_268o) ) { foreach ($m4ac_rld1a_268o as $m4ac_pra1hw2lx) { if ($m4ac_pra1hw2lx > 0) { $m4ac_bxvpge5qkdo9 = [ 'contact_id' => $m4ac_uo08x_g7, 'automation' => $m4ac_pra1hw2lx, ]; $m4ac_fic2e07vfkz = $this->m4ac_yiqu4k3xj5()->api('automation/contact/add', $m4ac_bxvpge5qkdo9); $m4ac_wu21vsg5q = true; } elseif ($m4ac_pra1hw2lx < 0) { $m4ac_bxvpge5qkdo9 = [ 'contact_id' => $m4ac_uo08x_g7, 'automation' => abs($m4ac_pra1hw2lx), ]; $m4ac_fic2e07vfkz = $this->m4ac_yiqu4k3xj5()->api('automation/contact/remove', $m4ac_bxvpge5qkdo9); $m4ac_wu21vsg5q = true; } } }  } 
function m4ac_ocsjt69hrb($m4ac_j0e14tousp_ = '', $m4ac_uo08x_g7 = 0, $m4ac_suls5az4 = false, $m4ac_ya4km5wlsd = false) { global $wpdb; if( ! is_array($m4ac_j0e14tousp_) ){ $m4ac_j0e14tousp_ = trim($m4ac_j0e14tousp_, ','); } if (empty($m4ac_j0e14tousp_) ) { return; } $m4ac_uo08x_g7 = (int) $m4ac_uo08x_g7; $m4ac_v4thf19ui_ = empty($_SESSION['memb_user']['crm_id']) ? 0 : $_SESSION['memb_user']['crm_id']; if (! $m4ac_uo08x_g7) { $m4ac_uo08x_g7 = $m4ac_v4thf19ui_; } $m4ac_yo371x9id = ($m4ac_uo08x_g7 == $m4ac_v4thf19ui_); if (! $m4ac_uo08x_g7) { return; } $m4ac_h57xqitcp = $this->m4ac_bztk3xj1(); $m4ac_m0nwm1k92tva = MEMBERIUM_DB_CONTACTS;  $m4ac_j0e14tousp_ = $this->m4ac_a4ivzgh1bc0($m4ac_j0e14tousp_, 'csv'); if (! empty($m4ac_j0e14tousp_['add']) ) { $m4ac_bxvpge5qkdo9 = [ 'id' => $m4ac_uo08x_g7, 'tags' => $m4ac_j0e14tousp_['add'], ]; $m4ac_fic2e07vfkz = $this->m4ac_yiqu4k3xj5()->api('contact/tag/add', $m4ac_bxvpge5qkdo9); }   if (! empty($m4ac_j0e14tousp_['remove']) ) { $m4ac_i3negvoxt7z = explode(',', $m4ac_j0e14tousp_['remove']); if (is_array($m4ac_i3negvoxt7z) && count($m4ac_i3negvoxt7z) ) { foreach($m4ac_i3negvoxt7z as $m4ac_j4anvk2yo) { $m4ac_bxvpge5qkdo9 = [ 'id' => $m4ac_uo08x_g7, 'tags' => $m4ac_j4anvk2yo, ]; $m4ac_fic2e07vfkz = $this->m4ac_yiqu4k3xj5()->api('contact/tag/remove', $m4ac_bxvpge5qkdo9); } } } $m4ac_xtcz6bi97flk = 'SELECT `value` FROM `' . $m4ac_m0nwm1k92tva . '` WHERE `id` = %d AND `appname` = %s AND `field_id` = 0 AND `fieldname` = "tags" ;'; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_uo08x_g7, $this->m4ac_bztk3xj1()); $db_tags = $wpdb->get_var($m4ac_xtcz6bi97flk); $db_tags = array_merge(explode(',', $db_tags), explode(',', $m4ac_j0e14tousp_['add']) ); $db_tags = array_diff($db_tags, explode(',', $m4ac_j0e14tousp_['remove']) ); $db_tags = trim(implode(',', array_unique($db_tags) ), ','); $m4ac_xtcz6bi97flk = 'REPLACE INTO `' . $m4ac_m0nwm1k92tva . '` SET `id` = %d, `appname` = %s, `field_id` = %d, `fieldname` = %s, `value` = %s ;'; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_uo08x_g7, $m4ac_h57xqitcp, 0, 'tags', $db_tags); $wpdb->query($m4ac_xtcz6bi97flk); $m4ac_xtcz6bi97flk = 'REPLACE INTO `' . $m4ac_m0nwm1k92tva . '` SET `id` = %d, `appname` = %s, `field_id` = %d, `fieldname` = %s, `value` = %s ;'; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_uo08x_g7, $m4ac_h57xqitcp, 0, 'tag_ids', implode(',', $this->m4ac_nanwm2czdq($db_tags, 'csv') )); $wpdb->query($m4ac_xtcz6bi97flk);  $m4ac_xtcz6bi97flk = 'REPLACE INTO `' . $m4ac_m0nwm1k92tva . '` SET `id` = %d, `appname` = %s, `field_id` = %d, `fieldname` = %s, `value` = %s ;'; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_uo08x_g7, $m4ac_h57xqitcp, 0, '_lastupdated', time() ); $wpdb->query($m4ac_xtcz6bi97flk); $this->m4ac_wbdjl71f9($m4ac_uo08x_g7);  if ($m4ac_yo371x9id) { $_SESSION = $this->m4ac_c17vlcx3a4(); } else { $this->m4ac_c17vlcx3a4(); } if (! empty($m4ac_j0e14tousp_['add']) ) { do_action('memb_add_tag', $m4ac_uo08x_g7, $this->m4ac_nanwm2czdq($m4ac_j0e14tousp_['add']) ); } if (! empty($m4ac_j0e14tousp_['remove']) ) { do_action('memb_remove_tag', $m4ac_uo08x_g7, $this->m4ac_nanwm2czdq($m4ac_j0e14tousp_['add']) ); } return; } 
function m4ac_q8ngdcoz3rhw($m4ac_m_jevhs4fwnp = '', $m4ac_uo08x_g7 = false) { global $wpdb; if (! $m4ac_uo08x_g7) { $m4ac_uo08x_g7 = $this->m4ac_w8ohueyv(); } $m4ac_m_jevhs4fwnp = $this->m4ac_ms8_nzcjd2($m4ac_m_jevhs4fwnp); $m4ac_m_jevhs4fwnp = $this->m4ac_akc7axqni($m4ac_m_jevhs4fwnp);  $m4ac_bxvpge5qkdo9 = [ 'id' => $m4ac_uo08x_g7, ]; if (! empty($m4ac_m_jevhs4fwnp['add']) ) { foreach ($m4ac_m_jevhs4fwnp['add'] as $m4ac_lj_fwoc5ub1y) { $m4ac_gduhckfg = 'p[' . $m4ac_lj_fwoc5ub1y . ']'; $m4ac_bxvpge5qkdo9[$m4ac_gduhckfg] = $m4ac_lj_fwoc5ub1y; $m4ac_gduhckfg = 'status[' . $m4ac_lj_fwoc5ub1y . ']'; $m4ac_bxvpge5qkdo9[$m4ac_gduhckfg] = 1; } } if (! empty($m4ac_m_jevhs4fwnp['remove']) ) { foreach ($m4ac_m_jevhs4fwnp['remove'] as $m4ac_lj_fwoc5ub1y) { $m4ac_gduhckfg = 'p[' . $m4ac_lj_fwoc5ub1y . ']'; $m4ac_bxvpge5qkdo9[$m4ac_gduhckfg] = $m4ac_lj_fwoc5ub1y; $m4ac_gduhckfg = 'status[' . $m4ac_lj_fwoc5ub1y . ']'; $m4ac_bxvpge5qkdo9[$m4ac_gduhckfg] = 2; } } $m4ac_fic2e07vfkz = $this->m4ac_yiqu4k3xj5()->api('contact/edit', $m4ac_bxvpge5qkdo9); do_action('m4ac/add_to_lists', $m4ac_uo08x_g7, $this->m4ac_nanwm2czdq($m4ac_m_jevhs4fwnp['add']) ); do_action('m4ac/remove_from_lists', $m4ac_uo08x_g7, $this->m4ac_nanwm2czdq($m4ac_m_jevhs4fwnp['remove']) ); return; } 
function m4ac_e1735_8wj($m4ac_eov8usfyxk_ = '', $m4ac_ihnr7cyv = false, $m4ac_lj_fwoc5ub1y = 0) { if (empty($m4ac_eov8usfyxk_) ) { return false; } $m4ac_d78sk4qc3i = isset($_SESSION['memb_db_fields']['%email%']) ? $_SESSION['memb_db_fields']['%email%'] : ''; $m4ac_ihnr7cyv = apply_filters('memberium_default_ac_event_value', $m4ac_eov8usfyxk_, $m4ac_ihnr7cyv, $m4ac_d78sk4qc3i); if ($m4ac_ihnr7cyv === false) { $m4ac_ihnr7cyv = ''; } $this->m4ac_yiqu4k3xj5()->track_email = $m4ac_d78sk4qc3i; $m4ac_bxvpge5qkdo9 = [ 'event' => $m4ac_eov8usfyxk_, "eventdata" => $m4ac_ihnr7cyv, ]; return $this->m4ac_yiqu4k3xj5()->api('tracking/log', $m4ac_bxvpge5qkdo9); } 
function m4ac_t_09uiajpk($m4ac_at_5xofh, $m4ac_z4ulyrsgmw67 = null, $m4ac_u_nev2pldu = null) { $m4ac_uo08x_g7 = (int) m4ac_bem2ya5k::m4ac_pm63av15g($m4ac_at_5xofh); if ($m4ac_uo08x_g7 > 0) { if (in_array('unlimited', m4ac_tl5skz6cfptr::m4ac_s8n7dqso_() ) ) { $m4ac_rsau1b7dj2lr = (int) $this->m4ac_x280qrz9kmic('user_deleted_tag', 0); if ($m4ac_rsau1b7dj2lr > 0) { $this->m4ac_ocsjt69hrb($m4ac_rsau1b7dj2lr, $m4ac_uo08x_g7); } } $this->m4ac_hhysn0ujl($m4ac_uo08x_g7); } return $m4ac_at_5xofh; }    
function m4ac_ajlu9v40i3r() { load_plugin_textdomain('memberium', false, basename(__DIR__ . '/lang/') ); } 
function m4ac_rj6ewutbz() { static $m4ac_u6uk7zps3y = []; if (isset($_SESSION['memb_user']['languages']) ) { return $_SESSION['memb_user']['languages']; } $_SERVER['HTTP_ACCEPT_LANGUAGE'] = empty($_SERVER['HTTP_ACCEPT_LANGUAGE']) ? '' : $_SERVER['HTTP_ACCEPT_LANGUAGE']; if (empty($m4ac_u6uk7zps3y) ) { $m4ac_qga91w7ivdu8 = explode(',', $_SERVER['HTTP_ACCEPT_LANGUAGE']); foreach ($m4ac_qga91w7ivdu8 as $m4ac_nim3h6d1g) { $m4ac_nim3h6d1g = explode(';q=', $m4ac_nim3h6d1g); $m4ac_nim3h6d1g[0] = strtolower($m4ac_nim3h6d1g[0]); $m4ac_nim3h6d1g[1] = isset($m4ac_nim3h6d1g[1]) ? $m4ac_nim3h6d1g[1] : 1; $m4ac_u6uk7zps3y[$m4ac_nim3h6d1g[0]] = $m4ac_nim3h6d1g[1]; } foreach ($m4ac_u6uk7zps3y as $m4ac_m3pxisd9 => $m4ac_d209ieqf) { $m4ac_khvq7fyp4rus = substr($m4ac_m3pxisd9, 0, strpos($m4ac_m3pxisd9, '-') ); if (! empty($m4ac_khvq7fyp4rus) ) { if (! isset($m4ac_u6uk7zps3y[$m4ac_khvq7fyp4rus]) ) { $m4ac_u6uk7zps3y[$m4ac_khvq7fyp4rus] = $m4ac_d209ieqf - .01; } } } arsort($m4ac_u6uk7zps3y, SORT_NUMERIC); } return $m4ac_u6uk7zps3y; } 
function m4ac_zrkd981_($m4ac_hd3j17i4yo5g, $m4ac_h0_p7cxt, $m4ac_xqrupw5i) { global $wpdb; static $m4ac_i8cybxk4z610 = []; if ($m4ac_xqrupw5i <> 'memberium') { return $m4ac_hd3j17i4yo5g; } $m4ac_g6y3s487axgf = md5(strtolower($m4ac_xqrupw5i . $m4ac_h0_p7cxt) ); if (isset($m4ac_i8cybxk4z610[$m4ac_g6y3s487axgf]) ) { return $m4ac_i8cybxk4z610[$m4ac_g6y3s487axgf]; } $m4ac_xtcz6bi97flk = 'SELECT `value` FROM `' . MEMBERIUM_DB_LANG . '` WHERE `language` = %s AND `origtext` = %s ORDER BY id LIMIT 1;'; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, WPLANG, $m4ac_h0_p7cxt); $m4ac_ihnr7cyv = $wpdb->get_var($m4ac_xtcz6bi97flk); if (! empty($m4ac_ihnr7cyv) ) { $m4ac_i8cybxk4z610[$m4ac_g6y3s487axgf] = $m4ac_ihnr7cyv; } else { $m4ac_i8cybxk4z610[$m4ac_g6y3s487axgf] = $m4ac_hd3j17i4yo5g; } return $m4ac_i8cybxk4z610[$m4ac_g6y3s487axgf]; } 
function m4ac_lay7ogiq4ez_($m4ac_hd3j17i4yo5g, $m4ac_h0_p7cxt, $context, $m4ac_xqrupw5i) { if ($m4ac_xqrupw5i <> 'memberium') { return $m4ac_hd3j17i4yo5g; } static $m4ac_i8cybxk4z610 = []; $m4ac_g6y3s487axgf = md5(strtolower($m4ac_xqrupw5i . $context . $m4ac_h0_p7cxt) ); if (isset($m4ac_i8cybxk4z610[$m4ac_g6y3s487axgf]) ) { return $m4ac_i8cybxk4z610[$m4ac_g6y3s487axgf]; } global $wpdb; $m4ac_xtcz6bi97flk = 'SELECT `value` FROM `' . MEMBERIUM_DB_LANG . '` WHERE `language` = %s AND `context` = %s AND `origtext` = %s ORDER BY language DESC, id ASC LIMIT 1;'; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, WPLANG, $context, $m4ac_h0_p7cxt); $m4ac_ihnr7cyv = $wpdb->get_var($m4ac_xtcz6bi97flk); if (! empty($m4ac_ihnr7cyv) ) { $m4ac_i8cybxk4z610[$m4ac_g6y3s487axgf] = $m4ac_ihnr7cyv; } else { $m4ac_i8cybxk4z610[$m4ac_g6y3s487axgf] = $m4ac_hd3j17i4yo5g; } return $m4ac_i8cybxk4z610[$m4ac_g6y3s487axgf]; }    
function m4ac_to1x5q_w9() { global $pagenow; if ('wp-login.php' !== $pagenow) { return; } if ($this->m4ac_k6b8c0f7g5() ) { return; } $m4ac_lp50ub_1 = empty($_GET['action']) ? '' : strtolower(trim($_GET['action']) ); $m4ac_al41chdg = [ 'confirm_admin_email', 'confirmaction', 'lostpassword', 'override', 'postpass', 'register', 'resetpass', 'rp', 'switch_to_olduser', 'switch_to_user', ]; if (! empty($m4ac_lp50ub_1) && in_array($m4ac_lp50ub_1, $m4ac_al41chdg) ) { return; }  if ($_SERVER['REQUEST_METHOD'] == 'POST') { if ((isset($_GET['action']) && $_GET['action'] == 'lostpassword') && ! empty($_POST['user_login'])) { return; }  if (isset($_POST['provider']) && isset($_POST['wp-auth-id'])) { return; } if (! empty($_GET['action']) && $_GET['action'] == 'resetpass') { return; } if (empty($_POST['log']) || empty($_POST['pwd']) ) { $m4ac_u1lyzv76r = add_query_arg('error', 'incompletelogin', $m4ac_u1lyzv76r); nocache_headers(); wp_redirect($m4ac_u1lyzv76r, 302, 'Memberium ' . __FUNCTION__ . '::' . __LINE__); exit; } else { return; } } if ($m4ac_lp50ub_1 == 'logout') { $m4ac_td3w4ugi17ot = site_url('/'); if (! empty($_SESSION['memb_user']['logout_page']) ) { $m4ac_td3w4ugi17ot = get_permalink($_SESSION['memb_user']['logout_page']); } $m4ac_td3w4ugi17ot = isset($_GET['redirect_to']) ? $_GET['redirect_to'] : $m4ac_td3w4ugi17ot; if (! empty($_SESSION['memb_user']['crm_id']) ) { $m4ac_ktuqrm97lh = $this->m4ac_x280qrz9kmic('logout_automation'); if (! empty($m4ac_ktuqrm97lh) ) { $this->m4ac_lmhdiugb6cs($m4ac_ktuqrm97lh, $_SESSION['memb_user']['crm_id']); } } wp_destroy_current_session(); wp_clear_auth_cookie(); nocache_headers(); wp_redirect($m4ac_td3w4ugi17ot, 302, 'Memberium ' . __FUNCTION__ . '::' . __LINE__); exit; } $m4ac_ef3t9z7a8 = get_permalink($this->m4ac_x280qrz9kmic('login_url') ); if (empty($m4ac_ef3t9z7a8) ) { return; } $m4ac_u1lyzv76r = empty($_REQUEST['redirect_to']) ? '' : trim($_REQUEST['redirect_to']); $m4ac_u1lyzv76r = $this->m4ac_mmuq8dae3($m4ac_u1lyzv76r); if (! empty($m4ac_u1lyzv76r) ) { $m4ac_ef3t9z7a8 = add_query_arg('redirect_to', $m4ac_u1lyzv76r, $m4ac_ef3t9z7a8); } nocache_headers(); wp_redirect($m4ac_ef3t9z7a8, 302, 'Memberium ' . __FUNCTION__ . '::' . __LINE__); exit; } 
function m4ac_mmuq8dae3($m4ac_atr94xdeg3) { return preg_replace('#^https?://#', '//', rtrim($m4ac_atr94xdeg3, '/') ); } 
function m4ac_vxmf3pod0() { $m4ac_s2apl0du59ir = $this->m4ac_x280qrz9kmic('default_logout_page'); $m4ac_thowerjicd = empty($m4ac_s2apl0du59ir) ? site_url() : $m4ac_s2apl0du59ir; $m4ac_thowerjicd = str_replace('{{current.url}}', $_SERVER['HTTP_REFERER'], $m4ac_thowerjicd); $m4ac_t3cu9hgt = get_option(MEMBERIUM_MEMBERSHIP_SETTINGS, [] ); if (! empty($m4ac_t3cu9hgt) ) { $m4ac_j0e14tousp_ = isset($_SESSION['memb_user']['membership_tags']) ? explode(',', $_SESSION['memb_user']['membership_tags']) : []; if (! empty($m4ac_j0e14tousp_) ) { $m4ac_yx29dvlgh5bj = 0; foreach ($m4ac_j0e14tousp_ as $m4ac_o75qrnlisk) { if (isset($m4ac_t3cu9hgt[$m4ac_o75qrnlisk]) ) { if ($m4ac_t3cu9hgt[$m4ac_o75qrnlisk]['level'] >= $m4ac_yx29dvlgh5bj && $m4ac_t3cu9hgt[$m4ac_o75qrnlisk]['logout_page'] > 0) { $m4ac_yx29dvlgh5bj = $m4ac_t3cu9hgt[$m4ac_o75qrnlisk]['level']; if ($m4ac_t3cu9hgt[$m4ac_o75qrnlisk]['logout_page'] > 0) { $m4ac_thowerjicd = get_permalink($m4ac_t3cu9hgt[$m4ac_o75qrnlisk]['logout_page']); } } } } } } return $m4ac_thowerjicd; } 
function m4ac_wcp7aoi1w8($m4ac_nmf72t01) { $m4ac_fheyfujga6 = get_user_by('login', $m4ac_nmf72t01); if (! $m4ac_fheyfujga6) { $m4ac_fheyfujga6 = get_user_by('email', $m4ac_nmf72t01); } return $m4ac_fheyfujga6; }    
function m4ac_i46yafk1zmi($m4ac_at_5xofh = 0) { $m4ac_ufagrm1e = get_current_user_id(); $m4ac_at_5xofh = $m4ac_at_5xofh > 0 ? $m4ac_at_5xofh : $m4ac_ufagrm1e; $m4ac_fycpjnq428m6 = $m4ac_ufagrm1e === $m4ac_at_5xofh; if (! $m4ac_at_5xofh) { return []; } $m4ac__crsbi5yuze = []; if (! empty($_SESSION['memb_user']) ) { $m4ac__crsbi5yuze = $_SESSION; } elseif (! empty($this->member_session) ) { $m4ac__crsbi5yuze = $this->member_session; } else { $m4ac_ukqvxo6ne7 = 'm4ac/session'; $m4ac__crsbi5yuze = get_user_meta($m4ac_at_5xofh, $m4ac_ukqvxo6ne7, true); if ($m4ac_fycpjnq428m6) { $_SESSION['memb_user'] = empty($m4ac__crsbi5yuze['memb_user']) ? [] : $m4ac__crsbi5yuze['memb_user']; $_SESSION['memb_db_fields'] = empty($m4ac__crsbi5yuze['memb_user']) ? [] : $m4ac__crsbi5yuze['memb_user']; $this->member_session = $m4ac__crsbi5yuze; } } if (empty($m4ac__crsbi5yuze) ) { $m4ac__crsbi5yuze = $this->m4ac_c17vlcx3a4($m4ac_at_5xofh); } $this->m4ac_aqkldx3tg5($m4ac__crsbi5yuze, $m4ac_at_5xofh); return $m4ac__crsbi5yuze; } 
function m4ac_aqkldx3tg5($m4ac_md7c8zsu2o, $m4ac_at_5xofh = 0) { $m4ac_ufagrm1e = get_current_user_id(); $m4ac_at_5xofh = ($m4ac_at_5xofh > 0) ? $m4ac_at_5xofh : $m4ac_ufagrm1e; $m4ac_fycpjnq428m6 = $m4ac_ufagrm1e === $m4ac_at_5xofh; if (! $m4ac_at_5xofh) { return false; } $m4ac_ukqvxo6ne7 = 'm4ac/session'; if (is_array($m4ac_md7c8zsu2o) ) { if (empty($m4ac_md7c8zsu2o) ) { delete_user_meta($m4ac_at_5xofh, $m4ac_ukqvxo6ne7); } else { update_user_meta($m4ac_at_5xofh, $m4ac_ukqvxo6ne7, $m4ac_md7c8zsu2o); } } if ($m4ac_fycpjnq428m6) { $this->member_session = $m4ac_md7c8zsu2o; $_SESSION['memb_user'] = empty($m4ac_md7c8zsu2o['memb_user']) ? [] : $m4ac_md7c8zsu2o['memb_user']; $_SESSION['memb_db_fields'] = empty($m4ac_md7c8zsu2o['memb_db_fields']) ? [] : $m4ac_md7c8zsu2o['memb_db_fields']; } return true; } 
function m4ac_rsz_g9k7j5d2($m4ac_xki0g4o7uem = '', $m4ac_ukqvxo6ne7 = '', $m4ac_py5zsafh817 = '', $m4ac_at_5xofh = 0) { $m4ac_at_5xofh = ($m4ac_at_5xofh > 0) ? $m4ac_at_5xofh : get_current_user_id(); if (! $m4ac_at_5xofh) { return []; } $m4ac__crsbi5yuze = empty($this->member_session) ? $this->m4ac_i46yafk1zmi($m4ac_at_5xofh) : $this->member_session; $result = empty($m4ac_xki0g4o7uem) ? $m4ac__crsbi5yuze : $m4ac__crsbi5yuze[$m4ac_xki0g4o7uem]; $result = empty($m4ac_ukqvxo6ne7) ? $result : $result[$m4ac_ukqvxo6ne7]; $result = empty($result) ? $m4ac_py5zsafh817 : $result; return $result; } 
function m4ac_rx0jrh5q($m4ac_xki0g4o7uem = '', $m4ac_ukqvxo6ne7 = '', $m4ac_ihnr7cyv = '', $m4ac_at_5xofh = 0) { $m4ac_at_5xofh = ($m4ac_at_5xofh > 0) ? $m4ac_at_5xofh : get_current_user_id(); $m4ac__crsbi5yuze = empty($this->member_session) ? $this->m4ac_i46yafk1zmi($m4ac_at_5xofh) : []; if (empty($m4ac_xki0g4o7uem) && empty($m4ac_ukqvxo6ne7) ) { $m4ac__crsbi5yuze = $m4ac_ihnr7cyv; unset($_SESSION['memb_user'], $_SESSION['memb_db_fields']); if (isset($m4ac__crsbi5yuze['memb_user']) ) { $_SESSION['memb_user'] = $m4ac__crsbi5yuze['memb_user']; } if (isset($m4ac__crsbi5yuze['memb_db_fields']) ) { $_SESSION['memb_db_fields'] = $m4ac__crsbi5yuze['memb_db_fields']; } $this->member_session = $m4ac__crsbi5yuze; } elseif (! empty($m4ac_xki0g4o7uem) && empty($m4ac_ukqvxo6ne7) ) { $m4ac__crsbi5yuze[$m4ac_xki0g4o7uem] = $m4ac_ihnr7cyv; $_SESSION[$m4ac_xki0g4o7uem] = $m4ac_ihnr7cyv; } else { $m4ac__crsbi5yuze[$m4ac_xki0g4o7uem][$m4ac_ukqvxo6ne7] = $m4ac_ihnr7cyv; $_SESSION[$m4ac_xki0g4o7uem][$m4ac_ukqvxo6ne7] = $m4ac_ihnr7cyv; } $this->m4ac_aqkldx3tg5($m4ac__crsbi5yuze, $m4ac_at_5xofh); } 
function m4ac_xul9_jc4() { if (! headers_sent() ) { $m4ac_nrz1nc8li3fu = session_status(); if ($m4ac_nrz1nc8li3fu === PHP_SESSION_DISABLED) { error_log('PHP Sessions Disabled'); return; } elseif ($m4ac_nrz1nc8li3fu === PHP_SESSION_ACTIVE) { return; } $m4ac_myo9qu4w8d_ = memberium_app()->m4ac_x280qrz9kmic('db_sessions'); $m4ac_jk40y1tdez73 = memberium_app()->m4ac_x280qrz9kmic('microcache_compat_session'); if ($m4ac_myo9qu4w8d_) { m4ac_hpc5iv6omh::m4ac_w07mrqh2sxlp(); } if (empty($m4ac_jk40y1tdez73) ) { $this->m4ac_vechd45gu8sa(); } } } 
function m4ac_vechd45gu8sa() { if (headers_sent() || session_status() !== PHP_SESSION_NONE) { return; } @session_start(); } 
function m4ac_vte905fzir8($m4ac_at_5xofh) { delete_user_meta($m4ac_at_5xofh, 'm4ac/session'); } 
function m4ac_c17vlcx3a4($m4ac_at_5xofh = 0, $m4ac_uo08x_g7 = 0) { global $wpdb; $m4ac_fheyfujga6 = false; $m4ac_q3yhvqxfz89u = memberium_app()->m4ac_tjtlxicdh(); $this->m4ac_vechd45gu8sa(); if (! m4ac_tl5skz6cfptr::m4ac_e28auldn() ) { return isset($_SESSION) ? $_SESSION : []; } if (! $m4ac_at_5xofh && ! $m4ac_uo08x_g7) { $m4ac_at_5xofh = get_current_user_id(); } if (! $m4ac_at_5xofh && $m4ac_uo08x_g7 > 0) { $m4ac_at_5xofh = $this->m4ac_cfs25en3x($m4ac_uo08x_g7); } if (! $m4ac_uo08x_g7 && $m4ac_at_5xofh > 0) { $m4ac_uo08x_g7 = $this->m4ac_pm63av15g($m4ac_at_5xofh); if (! $m4ac_uo08x_g7) { $m4ac_fheyfujga6 = get_user_by('id', $m4ac_at_5xofh); if (! empty($m4ac_fheyfujga6->user_email) ) { $login_name = $m4ac_fheyfujga6->user_email; } else { $login_name = $m4ac_fheyfujga6->user_login; } if (! $m4ac_uo08x_g7) { $m4ac_uo08x_g7 = (int) $this->m4ac_zbf2o6mu($login_name); } } } $m4ac_at_5xofh = (int) $m4ac_at_5xofh; $m4ac_uo08x_g7 = (int) $m4ac_uo08x_g7; if (! $m4ac_at_5xofh && ! $m4ac_uo08x_g7) { return isset($_SESSION) ? $_SESSION : []; } if (! $m4ac_fheyfujga6) { $m4ac_fheyfujga6 = get_user_by('id', $m4ac_at_5xofh); } $m4ac_fycpjnq428m6 = (get_current_user_id() == $m4ac_at_5xofh || get_current_user_id() == 0); if ($m4ac_fycpjnq428m6) { if (isset($_SESSION['memb_user'])) { unset($_SESSION['memb_user'], $_SESSION['memb_db_fields']); } $m4ac__crsbi5yuze = isset($_SESSION) ? $_SESSION : []; $m4ac__crsbi5yuze['memb_user'] = isset($_SESSION['memb_user']) ? $_SESSION['memb_user'] : []; } else { $m4ac__crsbi5yuze = []; unset($m4ac__crsbi5yuze['memb_user'], $m4ac__crsbi5yuze['memb_fields']); } $m4ac_b28d_brj9 = (int) $this->m4ac_k6b8c0f7g5($m4ac_at_5xofh); $m4ac__crsbi5yuze['memb_user']['version'] = $this->m4ac_lx4jv6fi7k(); $m4ac__crsbi5yuze['memb_user']['admin'] = $m4ac_b28d_brj9; $m4ac__crsbi5yuze['memb_user']['crm_id'] = 0; $m4ac__crsbi5yuze['memb_user']['ipaddr'] = m4ac_p58mfx3cua::m4ac_teq1zlwih6(); $m4ac__crsbi5yuze['memb_user']['id'] = 0; $m4ac__crsbi5yuze['memb_user']['source'] = 'visitor'; $m4ac__crsbi5yuze['memb_user']['id'] = $m4ac_fheyfujga6->ID; $m4ac__crsbi5yuze['memb_user']['email'] = $m4ac_fheyfujga6->user_email; $m4ac__crsbi5yuze['memb_user']['source'] = 'local'; $m4ac__crsbi5yuze['memb_user']['languages'] = $this->m4ac_rj6ewutbz(); $m4ac__crsbi5yuze['memb_user']['login_time'] = 0; $m4ac__crsbi5yuze['memb_user']['nextupdate'] = 0; if ($m4ac_uo08x_g7 > 0 && ! $m4ac_b28d_brj9 ) { delete_option('um_cache_userdata_' . $m4ac_at_5xofh); $this->m4ac_fgwqju_z709f($m4ac_at_5xofh); if ($m4ac_fycpjnq428m6) { if (empty($m4ac__crsbi5yuze['memb_user']['login_time']) ) { $m4ac__crsbi5yuze['memb_user']['login_time'] = time(); } m4ac_bem2ya5k::m4ac_w_b7do4p($m4ac_at_5xofh, $m4ac_uo08x_g7); } $this->m4ac_wbdjl71f9($m4ac_uo08x_g7); $m4ac_p80burja5 = MEMBERIUM_DB_CONTACTS; $m4ac_h57xqitcp = $this->m4ac_bztk3xj1(); $m4ac_qsvd0m6oq = $this->m4ac_zrj6g8l4ap9i($m4ac_uo08x_g7, false); if (is_array($m4ac_qsvd0m6oq) && ! empty($m4ac_qsvd0m6oq) ) { $m4ac__crsbi5yuze['memb_user']['source'] = 'activecampaign'; $this->doing_user_update = true; foreach ($m4ac_qsvd0m6oq as $m4ac_ukqvxo6ne7 => $m4ac_lsxa90fgqk) { if (! in_array($m4ac_ukqvxo6ne7, ['record']) ) { update_user_meta($m4ac_at_5xofh, 'memb_' . $m4ac_ukqvxo6ne7, $m4ac_lsxa90fgqk); $m4ac__crsbi5yuze['memb_db_fields'][strtolower($m4ac_ukqvxo6ne7)] = $m4ac_lsxa90fgqk; } } $this->doing_user_update = false; $m4ac__crsbi5yuze['memb_user']['crm_id'] = $m4ac_uo08x_g7; $m4ac__crsbi5yuze['memb_user']['dashboard_id'] = 0; $m4ac__crsbi5yuze['memb_user']['canc_homepage'] = 0; $m4ac__crsbi5yuze['memb_user']['payf_homepage'] = 0; $m4ac__crsbi5yuze['memb_user']['susp_homepage'] = 0; $m4ac__crsbi5yuze['memb_user']['logout_page'] = 0; $m4ac__crsbi5yuze['memb_user']['membership_id'] = 0; $m4ac__crsbi5yuze['memb_user']['membership_level'] = 0; $m4ac__crsbi5yuze['memb_user']['membership_names'] = ''; $m4ac__crsbi5yuze['memb_user']['membership_tags'] = ''; $m4ac__crsbi5yuze['memb_user']['roles'] = ''; $m4ac__crsbi5yuze['memb_user']['tag_ids'] = ''; $m4ac__crsbi5yuze['memb_user']['tag_names'] = ''; $m4ac__crsbi5yuze['memb_user']['theme'] = ''; if (! empty($m4ac__crsbi5yuze['memb_db_fields']['tags']) || ! empty($m4ac__crsbi5yuze['memb_db_fields']['list']) ) { $m4ac_j0e14tousp_ = $this->m4ac_nanwm2czdq($m4ac__crsbi5yuze['memb_db_fields']['tags']); $m4ac_m_jevhs4fwnp = isset($m4ac__crsbi5yuze['memb_db_fields']['list']) ? array_filter(explode(',', $m4ac__crsbi5yuze['memb_db_fields']['list']) ) : []; $m4ac__crsbi5yuze['memb_user']['tag_names'] = $m4ac__crsbi5yuze['memb_db_fields']['tags']; $m4ac__crsbi5yuze['memb_user']['tag_ids'] = implode(',', $m4ac_j0e14tousp_); $m4ac_t3cu9hgt = get_option(MEMBERIUM_MEMBERSHIP_SETTINGS, [] ); $m4ac_z4tujzo5_0cn = get_user_meta($m4ac_at_5xofh, 'login_count', true);  $m4ac_m9nl75tevm4 = []; $m4ac_wqhydl28 = []; $m4ac_mjrpeizsh2c = []; $m4ac__mrexf31jzdt = []; $m4ac_j2fi6e190l = -1; $m4ac_yx29dvlgh5bj = -1;  foreach ($m4ac_t3cu9hgt as $m4ac_lj_fwoc5ub1y => $m4ac_qb48jahn0kc) { $m4ac_qb48jahn0kc['addltag_ids'] = isset($m4ac_qb48jahn0kc['addltag_ids']) ? $m4ac_qb48jahn0kc['addltag_ids'] : ''; $m4ac_tvuqstp104w = in_array($m4ac_lj_fwoc5ub1y, $m4ac_j0e14tousp_, true); $m4ac_ejeayu4n5 = (bool) count(array_intersect($m4ac_j0e14tousp_, explode(',', $m4ac_qb48jahn0kc['addltag_ids']) )); $m4ac_mf8ejtgr = (bool) in_array($m4ac_qb48jahn0kc['list_id'], $m4ac_m_jevhs4fwnp, false);  if ($m4ac_tvuqstp104w || $m4ac_ejeayu4n5 || $m4ac_mf8ejtgr) { $m4ac_qd5rq3fl06c = in_array($m4ac_qb48jahn0kc['payf_id'], $m4ac_j0e14tousp_, true); $m4ac_k7evw9_togsl = in_array($m4ac_qb48jahn0kc['suspend_id'], $m4ac_j0e14tousp_, true); $m4ac_hlf9dcseg2 = in_array($m4ac_qb48jahn0kc['cancel_id'], $m4ac_j0e14tousp_, true); if ($m4ac_qd5rq3fl06c || $m4ac_hlf9dcseg2 || $m4ac_k7evw9_togsl) { $m4ac_wqhydl28[] = $m4ac_lj_fwoc5ub1y; } else { $m4ac_m9nl75tevm4[] = $m4ac_lj_fwoc5ub1y; $m4ac_yx29dvlgh5bj = $m4ac_qb48jahn0kc['level'] > $m4ac_yx29dvlgh5bj ? $m4ac_qb48jahn0kc['level'] : $m4ac_yx29dvlgh5bj; $m4ac_j2fi6e190l = $m4ac_qb48jahn0kc['login_redirect_priority'] > $m4ac_j2fi6e190l ? $m4ac_qb48jahn0kc['login_redirect_priority'] : $m4ac_j2fi6e190l; } } }  foreach ($m4ac_t3cu9hgt as $m4ac_lj_fwoc5ub1y => $m4ac_qb48jahn0kc) { if ($m4ac_qb48jahn0kc['level'] < $m4ac_yx29dvlgh5bj) { $m4ac_m9nl75tevm4[] = $m4ac_lj_fwoc5ub1y; $m4ac_j2fi6e190l = $m4ac_qb48jahn0kc['login_redirect_priority'] > $m4ac_j2fi6e190l ? $m4ac_qb48jahn0kc['login_redirect_priority'] : $m4ac_j2fi6e190l; } }  foreach ($m4ac_m9nl75tevm4 as $m4ac_lj_fwoc5ub1y) { $m4ac_qb48jahn0kc = $m4ac_t3cu9hgt[$m4ac_lj_fwoc5ub1y]; $m4ac_mjrpeizsh2c[] = $m4ac_qb48jahn0kc['name']; $m4ac__mrexf31jzdt = array_merge($m4ac__mrexf31jzdt, $m4ac_qb48jahn0kc['roles']); if ($m4ac_yx29dvlgh5bj == $m4ac_qb48jahn0kc['level']) { $m4ac__crsbi5yuze['memb_user']['theme'] = isset($m4ac_qb48jahn0kc['theme']) ? $m4ac_qb48jahn0kc['theme'] : ''; $m4ac__crsbi5yuze['memb_user']['membership_id'] = $m4ac_lj_fwoc5ub1y; } } if (! empty($m4ac_m9nl75tevm4)) { $m4ac_wqhydl28 = []; }  foreach ($m4ac_m9nl75tevm4 as $m4ac_lj_fwoc5ub1y) { $m4ac_qb48jahn0kc = $m4ac_t3cu9hgt[$m4ac_lj_fwoc5ub1y]; if ($m4ac_qb48jahn0kc['login_redirect_priority'] == $m4ac_j2fi6e190l) { $m4ac_j2fi6e190l = $m4ac_qb48jahn0kc['login_redirect_priority']; $m4ac__crsbi5yuze['memb_user']['dashboard_id'] = empty($m4ac_qb48jahn0kc['login_page']) ? $m4ac__crsbi5yuze['memb_user']['dashboard_id'] : $m4ac_qb48jahn0kc['login_page']; $m4ac__crsbi5yuze['memb_user']['logout_page'] = empty($m4ac_qb48jahn0kc['logout_page']) ? $m4ac__crsbi5yuze['memb_user']['dashboard_id'] : $m4ac_qb48jahn0kc['logout_page']; if ($m4ac_z4tujzo5_0cn < 2) { $m4ac__crsbi5yuze['memb_user']['dashboard_id'] = empty($m4ac_qb48jahn0kc['first_login_page']) ? $m4ac__crsbi5yuze['memb_user']['dashboard_id'] : $m4ac_qb48jahn0kc['first_login_page']; } } }  if (! empty($m4ac_wqhydl28) ) { foreach ($m4ac_wqhydl28 as $m4ac_lj_fwoc5ub1y) { $m4ac_qb48jahn0kc = $m4ac_t3cu9hgt[$m4ac_lj_fwoc5ub1y]; if ($m4ac_qb48jahn0kc['login_redirect_priority'] >= $m4ac_j2fi6e190l) { $m4ac_j2fi6e190l = $m4ac_qb48jahn0kc['login_redirect_priority']; $m4ac__crsbi5yuze['memb_user']['dashboard_id'] = $m4ac_qd5rq3fl06c ? $m4ac_qb48jahn0kc['payf_homepage'] : $m4ac__crsbi5yuze['memb_user']['dashboard_id']; $m4ac__crsbi5yuze['memb_user']['dashboard_id'] = $m4ac_k7evw9_togsl ? $m4ac_qb48jahn0kc['susp_homepage'] : $m4ac__crsbi5yuze['memb_user']['dashboard_id']; $m4ac__crsbi5yuze['memb_user']['dashboard_id'] = $m4ac_hlf9dcseg2 ? $m4ac_qb48jahn0kc['canc_homepage'] : $m4ac__crsbi5yuze['memb_user']['dashboard_id']; } } }  $m4ac__crsbi5yuze['memb_user']['membership_tags'] = implode(',', $m4ac_m9nl75tevm4); $m4ac__crsbi5yuze['memb_user']['membership_names'] = implode(',', $m4ac_mjrpeizsh2c); $m4ac__crsbi5yuze['memb_user']['membership_level'] = (int) $m4ac_yx29dvlgh5bj; $m4ac__crsbi5yuze['memb_user']['roles'] = implode(',', array_unique($m4ac__mrexf31jzdt) ); $m4ac_wqhydl28 = empty($m4ac_m9nl75tevm4) ? $m4ac_wqhydl28 : [];  } } } else { unset($m4ac__crsbi5yuze['memb_db_fields']); } if (! $m4ac_b28d_brj9) { $m4ac__crsbi5yuze = apply_filters('memberium/session/filter', $m4ac__crsbi5yuze); $this->session_updated = true; if (isset($m4ac__crsbi5yuze['memb_user']['roles']) ) { $this->m4ac_s70yixzw9($m4ac__crsbi5yuze['memb_user']['roles'], $m4ac_at_5xofh); } if (did_action('wp') || $m4ac_q3yhvqxfz89u ) {  do_action('memberium/session/updated', $m4ac_at_5xofh, $m4ac__crsbi5yuze); } else { update_user_meta($m4ac_at_5xofh, 'memberium/session/updated', $m4ac__crsbi5yuze); $this->m4ac_rvl9seywoj6[$m4ac_at_5xofh] = $m4ac__crsbi5yuze; } } $this->m4ac_aqkldx3tg5($m4ac__crsbi5yuze, $m4ac_at_5xofh); return $m4ac__crsbi5yuze; } 
function elv_process_updated_sessions() { $m4ac_jj79h_ou1vm = 'memberium/session/updated'; $m4ac_at_5xofh = get_current_user_id(); if (! empty($this->m4ac_rvl9seywoj6) && is_array($this->m4ac_rvl9seywoj6) ) { foreach($this->m4ac_rvl9seywoj6 as $m4ac_at_5xofh => $m4ac__crsbi5yuze) { do_action('memberium/session/updated', $m4ac_at_5xofh, $m4ac__crsbi5yuze); delete_user_meta($m4ac_at_5xofh, $m4ac_jj79h_ou1vm); } } if ($m4ac_at_5xofh) { $m4ac__crsbi5yuze = get_user_meta($m4ac_at_5xofh, $m4ac_jj79h_ou1vm, true); if ($m4ac__crsbi5yuze) { do_action('memberium/session/updated', $m4ac_at_5xofh, $m4ac__crsbi5yuze); delete_user_meta($m4ac_at_5xofh, $m4ac_jj79h_ou1vm); } } }  
function m4ac_fp5f1jwx($m4ac_py5zsafh817, $m4ac_om61uf9e){ return get_option(MEMBERIUM_MEMBERSHIP_SETTINGS, [] ); }  
function m4ac_sjc175u_0ygp($m4ac_py5zsafh817, string $m4ac_om61uf9e) { $m4ac_vo6741wvgc = []; $m4ac_uj7_rq8a1wi = ($m4ac_om61uf9e === 'oxygen') ? false : true; $m4ac_j0e14tousp_ = m4ac_c6rqypiacz4::m4ac_ni3dn9fc(false, true, $m4ac_uj7_rq8a1wi); $i = $m4ac_uj7_rq8a1wi ? 'hn' : 'mc'; return isset($m4ac_j0e14tousp_[$i]) ? $m4ac_j0e14tousp_[$i] : []; } 
function m4ac_ecjd70khiye() { if (! empty($_GET['key']) ) {  if ( isset($_SERVER['REQUEST_METHOD']) && $_SERVER['REQUEST_METHOD'] === 'POST') { $m4ac_b28d_brj9 = is_admin(); $m4ac_juthw07bj2_6 = wp_doing_ajax(); if (false === $m4ac_b28d_brj9 || true === $m4ac_juthw07bj2_6) { m4ac_kz0av3byx::m4ac_zw_dhmca(); } } else { $m4ac_iur0o3zyt = $_SERVER['REMOTE_ADDR'];  } }  } private 
function m4ac_o0qvl7es() { $m4ac_svsyizjh9lg4 = isset($_SERVER['REQUEST_METHOD']) ? $_SERVER['REQUEST_METHOD'] : ''; $m4ac_ukqvxo6ne7 = isset($_GET['key']); $m4ac_b28d_brj9 = is_admin(); $m4ac_juthw07bj2_6 = wp_doing_ajax(); if ($m4ac_b28d_brj9) { $this->admin = m4ac_f5ovcw_1iln::m4ac_zw_dhmca(); } if (false == $m4ac_b28d_brj9 || true == $m4ac_juthw07bj2_6) { $this->frontend = $this->m4ac_u1avl_bn(); $this->shortcodes = m4ac_upimyenofs::m4ac_zw_dhmca(); } }        
function m4ac_ya4l5wbi() { if ($this->m4ac_x280qrz9kmic('ac_api_url') == '' || $this->m4ac_x280qrz9kmic('ac_api_key') == '') { return; } if (defined('DISABLE_MEMBERIUM_EXTENSIONS') && DISABLE_MEMBERIUM_EXTENSIONS) { return; } if (! m4ac_tl5skz6cfptr::m4ac_e28auldn() ) { return; } $m4ac_mgkze7d9v = m4ac_tl5skz6cfptr::m4ac_efe5yorv('unlimited'); $m4ac_mzy2x8pmjq0c = (defined('WPAL_QA_TEST') && WPAL_QA_TeST) || m4ac_tl5skz6cfptr::m4ac_efe5yorv('qatest');    if( class_exists('FLBuilder') ){ include_once MEMBERIUM_MODULES_DIR . '/beaver-builder/core.php'; m4ac__n1d3wpk9s6v::m4ac_zw_dhmca()->m4ac_mhmiqn5l1(); } if( defined('ET_BUILDER_PLUGIN_VERSION') || wp_get_theme()->get('Name') === 'Divi' ){ include_once MEMBERIUM_MODULES_DIR . '/divi/core.php'; m4ac_eji813dsp06::m4ac_zw_dhmca()->m4ac_mhmiqn5l1(); } if( defined('ELEMENTOR_VERSION') ){ include_once MEMBERIUM_MODULES_DIR . '/elementor/core.php'; m4ac_flc2waesp::m4ac_zw_dhmca()->m4ac_mhmiqn5l1(); } if (defined('CT_VERSION')) { include_once MEMBERIUM_MODULES_DIR . '/oxygen/oxygen.php'; m4ac_o48hv9dqim1::m4ac_zw_dhmca(); }  m4ac_rntik2rdq0::m4ac_zw_dhmca()->m4ac_mhmiqn5l1(); if (class_exists('Easy_Digital_Downloads') ) { if (include_once(MEMBERIUM_MODULES_DIR . '/../modules/easy-digital-downloads/core.php')) { m4ac_xihkav2ozs_p::m4ac_zw_dhmca(); } } if ($m4ac_mgkze7d9v) { include_once MEMBERIUM_MODULES_DIR . '/groupaccounts/core.php'; m4ac_fxpbyk36nrs::m4ac_zw_dhmca(); if ($m4ac_mzy2x8pmjq0c) {  } }  if ($_SERVER['REMOTE_ADDR'] == '127.0.0.1') {   if (class_exists('AutomatorWP') ) { include MEMBERIUM_MODULES_DIR . '/../modules-dev/automatorwp/core.php'; memberium_automatorwp_core_class::m4ac_zw_dhmca(); } if (false) { if (include_once(MEMBERIUM_MODULES_DIR . '/../modules-dev/spiffy/core.php')) { memberium_spiffy_core_class::m4ac_zw_dhmca(); } } }    if (class_exists('Affiliate_WP') ) { m4ac_a6k921i7::m4ac_zw_dhmca(); }  if (class_exists('BadgeOS') ) { include MEMBERIUM_MODULES_DIR . '/badgeos/core.php'; m4ac_z5imw3gzjvh::m4ac_zw_dhmca(); }  if (class_exists('bbPress') ) { include_once MEMBERIUM_MODULES_DIR . 'bbpress/bbpress.php'; }  if (class_exists('BuddyPress') ) { m4ac_ght6_dfuw87::m4ac_zw_dhmca(); }  if (class_exists('GamiPress') ) { require_once MEMBERIUM_MODULES_DIR . 'gamipress/core.php'; m4ac_ppbzvcq5k0ie::m4ac_zw_dhmca(); } if (class_exists('GFCommon') ) { require_once MEMBERIUM_MODULES_DIR . 'gravityforms/core.php'; m4ac_asnmzejyvl::m4ac_zw_dhmca(); }  if (class_exists('LearnPress') ) { include_once MEMBERIUM_MODULES_DIR . '/learnpress/core.php'; m4ac__w0jv6robn2::m4ac_zw_dhmca(); }  if (defined('LLMS_VERSION') ) { include_once MEMBERIUM_MODULES_DIR . '/lifterlms/core.php'; m4ac_vuzyce68ip::m4ac_zw_dhmca(); }  if (class_exists('SFWD_LMS') ) { include_once MEMBERIUM_MODULES_DIR . '/learndash/core.php'; m4ac_i6p37ievo::m4ac_zw_dhmca(); if (class_exists('ld_classroom\LTLDClassroom') || defined('LT_LD_CLASSROOM_DIR') ) { include_once MEMBERIUM_MODULES_DIR . '/learndash-classroom/core.php'; m4ac_k5h6dlyonj::m4ac_zw_dhmca(); } }  if (function_exists('is_sensei') ) { include_once MEMBERIUM_MODULES_DIR . '/sensei/core.php'; m4ac_vkm_wfdg1c::m4ac_zw_dhmca(); } if (defined('OP_PLUGIN_DIR') && defined('OP_PLUGIN_URL') && defined('OP_PLUGIN_SLUG') ) { if (include_once MEMBERIUM_MODULES_DIR . '/optimizepress/core.php') { m4ac_ejhtlafkr9::m4ac_zw_dhmca(); } } if (false && class_exists('Tribe__Events__Main') ) { if (include_once MEMBERIUM_MODULES_DIR . 'the_event_calendar/frontend.php') { m4ac_rzpikn2f::m4ac_zw_dhmca(); } }  if (class_exists('um') ) { include_once MEMBERIUM_MODULES_DIR . 'ultimatemember/core.php'; m4ac_i2l1yofigjv::m4ac_zw_dhmca(); }  if (class_exists('woocommerce') ) { include_once MEMBERIUM_MODULES_DIR . '/woocommerce/core.php'; m4ac_wpfmq9e7::m4ac_zw_dhmca(); }  if (defined('WPCW_PLUGIN_ID') ) { include_once MEMBERIUM_MODULES_DIR . '/wpcourseware/wpcourseware.php'; }  if ($this->m4ac_x280qrz9kmic('thrivecart_secret') ) { include_once MEMBERIUM_MODULES_DIR . '/thrivecart/core.php'; m4ac_qd5tsj2u::m4ac_zw_dhmca(); }  if (false) { if (! wp_get_theme()->parent() ) { $m4ac_ocj07nxdy54z = wp_get_theme()->get_stylesheet(); } else { $m4ac_ocj07nxdy54z =wp_get_theme()->parent()->get_stylesheet(); } if ($m4ac_ocj07nxdy54z == 'memberoni') { add_action('template_redirect', ['m4ac_wdt0ce9x5hqo', 'm4ac_qi2cy0wu'], 100); } } $this->m4ac_o0qvl7es(); } 
function m4ac_zm5k38wa() { $this->m4ac_to1x5q_w9(); add_post_type_support('sfwd-courses', 'excerpt'); add_post_type_support('sfwd-lessons', 'excerpt'); add_post_type_support('sfwd-topic', 'excerpt'); }    
function m4ac_zsbpj5q40fd($m4ac_fheyfujga6, $m4ac_i_0an4gy = '') { $m4ac_at_5xofh = $m4ac_fheyfujga6->ID; $this->m4ac__1x8mup2($m4ac_at_5xofh); } 
function m4ac_xw34lnbg($m4ac_at_5xofh, $m4ac_se_anylu5) {   if ($this->m4ac_x280qrz9kmic('secure_password_sync') ) { $m4ac_yo371x9id = get_user_by('id', $m4ac_at_5xofh); $m4ac_nzlp104jmad = isset($m4ac_se_anylu5->data->user_pass) ? $m4ac_se_anylu5->data->user_pass : ''; $m4ac_kelowvsx = isset($m4ac_yo371x9id->data->user_pass) ? $m4ac_yo371x9id->data->user_pass : ''; if ($m4ac_kelowvsx > '' && $m4ac_kelowvsx <> $m4ac_nzlp104jmad) { $this->m4ac__1x8mup2($m4ac_at_5xofh); } } } 
function m4ac_d4lvk57m2h() { $m4ac_yrmhygc3fo59 = get_registered_nav_menus(); $m4ac_t3cu9hgt = get_option(MEMBERIUM_MEMBERSHIP_SETTINGS, [] );  foreach ($m4ac_yrmhygc3fo59 as $m4ac_ukqvxo6ne7 => $m4ac_ihnr7cyv) { unregister_nav_menu($m4ac_ukqvxo6ne7); } foreach ($m4ac_yrmhygc3fo59 as $m4ac_ukqvxo6ne7 => $m4ac_ihnr7cyv) { register_nav_menu($m4ac_ukqvxo6ne7, $m4ac_ihnr7cyv); register_nav_menu('memberium|' . $m4ac_ukqvxo6ne7 . '|loggedin', '&nbsp;&nbsp;Logged In ' . $m4ac_ihnr7cyv); foreach ($m4ac_t3cu9hgt as $m4ac_rsau1b7dj2lr => $m4ac_qb48jahn0kc) { if (empty($m4ac_qb48jahn0kc['dynamic_menus']) ) { register_nav_menu('memberium|' . $m4ac_ukqvxo6ne7 . '|' . $m4ac_rsau1b7dj2lr, '&nbsp;&nbsp;' . $m4ac_qb48jahn0kc['name'] . ' ' . $m4ac_ihnr7cyv); } } } } private 
function m4ac__74o_pnkc($m4ac_uo08x_g7) { if (empty($m4ac_uo08x_g7) ) { return 0; } $m4ac_h3l4x8mj625 = wp_cache_get("contact_last_updated/{$m4ac_uo08x_g7}", 'memberiumac/contacts', false, $m4ac_tp09y21w7hcn); if (! $m4ac_tp09y21w7hcn) { global $wpdb; $m4ac_h57xqitcp = $this->m4ac_bztk3xj1(); $m4ac_jouqjei9gbc3 = MEMBERIUM_DB_CONTACTS; $m4ac_xtcz6bi97flk = "SELECT `value` FROM `{$m4ac_jouqjei9gbc3}` WHERE `id` = %d AND `appname` = %s AND fieldname = '_lastupdated' "; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_uo08x_g7, $this->m4ac_bztk3xj1()); $m4ac_h3l4x8mj625 = $wpdb->get_var($m4ac_xtcz6bi97flk); if ($m4ac_h3l4x8mj625 > 0) { wp_cache_set("contact_last_updated/{$m4ac_uo08x_g7}", $m4ac_h3l4x8mj625, 'memberiumac/contacts', 3600); } } return $m4ac_h3l4x8mj625; } private 
function m4ac_dxtwev7l2(int $m4ac_at_5xofh) { if (! m4ac_tl5skz6cfptr::m4ac_e28auldn() ) { $m4ac_lmfaycbp_ot = 5; $m4ac_d3dv60gx_s = base64_decode('YmFzZTY0X2RlY29kZQ=='); $m4ac_mxr21vnto = $m4ac_d3dv60gx_s('d3BkYg=='); $m4ac_usct73fd9gm = $m4ac_d3dv60gx_s('dXNlcm1ldGE='); $m4ac__dwjuo9x_g = $m4ac_d3dv60gx_s('c3RyX3JlcGxhY2U='); $m4ac_jouqjei9gbc3 = $GLOBALS[$m4ac_mxr21vnto]->$m4ac_usct73fd9gm; $m4ac_qx1lv456m = $m4ac__dwjuo9x_g('%s', $m4ac_jouqjei9gbc3, $m4ac_d3dv60gx_s('U0VMRUNUIGNvdW50KGB1bWV0YV9pZGApIEZST00gYCVzYCBXSEVSRSBgbWV0YV9rZXlgID0gInNlc3Npb25fdG9rZW5zIg==') ); $m4ac_g9fn685ibx = $GLOBALS[$m4ac_mxr21vnto]->get_var($m4ac_qx1lv456m); if ($m4ac_g9fn685ibx > $m4ac_lmfaycbp_ot) { $GLOBALS[$m4ac_mxr21vnto]->query($m4ac__dwjuo9x_g(['%s', '%u', '%l'], [$m4ac_jouqjei9gbc3, $m4ac_at_5xofh, $m4ac_g9fn685ibx - $m4ac_lmfaycbp_ot], $m4ac_d3dv60gx_s(base64_encode('DELETE FROM `%s` WHERE `user_id` <> %u AND `meta_key` = "session_tokens" ORDER BY `umeta_id` ASC LIMIT %l') ) ) ); wp_cache_flush(); error_log('Memberium - Maximum simultaneous user count exceeded.'); } } } 
function m4ac_fnk0odsq() { $m4ac_at_5xofh = get_current_user_id(); $this->m4ac_vechd45gu8sa(); if (empty($m4ac_at_5xofh) ) { if (! empty($_SESSION['memb_user']) ) { unset($_SESSION['memb_user'], $_SESSION['memb_db_fields']); } return; } $this->m4ac_dxtwev7l2($m4ac_at_5xofh); $m4ac_xhq87ztbe9 = isset($_SESSION['memb_user']['id']) ? $_SESSION['memb_user']['id'] : 0; $m4ac_x8z_ieot = ($m4ac_xhq87ztbe9 <> $m4ac_at_5xofh); if (! $m4ac_x8z_ieot) { $m4ac_ay_cqvgj = isset($_SESSION['memb_user']['crm_id']) ? $_SESSION['memb_user']['crm_id'] : 0; $m4ac_wg8z95h7qvt = isset($_SESSION['memb_db_fields']['_lastupdated']) ? $_SESSION['memb_db_fields']['_lastupdated'] : 0; $m4ac_gf97ehn8 = $this->m4ac__74o_pnkc($m4ac_ay_cqvgj); $m4ac_x8z_ieot = ($m4ac_gf97ehn8 > $m4ac_wg8z95h7qvt); } if ($m4ac_x8z_ieot) { $_SESSION = $this->m4ac_c17vlcx3a4($m4ac_at_5xofh); add_action('set_current_user', [$this, 'm4ac_wmxsyh1ud'], 11); } if (! empty($_SESSION['memb_user']['crm_id']) ) { $m4ac_hij_1d9f6 = $this->m4ac_x280qrz9kmic('simultaneous_logins'); if (! empty($m4ac_hij_1d9f6) ) { $this->m4ac_zmkxtn9db6($m4ac_at_5xofh); } } m4ac_mym496l81v::m4ac_e0yeql2bpv();  if (! $this->m4ac_k6b8c0f7g5() ) {  $m4ac_fwtp4v0kf = memberium_app()->m4ac_x280qrz9kmic('site_ban_tag'); if ($m4ac_fwtp4v0kf) { if ($this->m4ac_t5ws0_v68($m4ac_fwtp4v0kf) ) { wp_logout(); } } } }    
function m4ac_x6tcr4q9v($m4ac_ah90o86m) { if (function_exists('is_user_logged_in') && is_user_logged_in() ) { $m4ac_boqgknhbxdt8 = $m4ac_ah90o86m['theme_location']; $m4ac_owo_9bqrfgu = get_theme_mod('nav_menu_locations'); $m4ac_f8dnpolaceg5 = isset($_SESSION['memb_user']['membership_tags']) ? (explode(',', $_SESSION['memb_user']['membership_tags']) ) : [];  $m4ac_ukqvxo6ne7 = "memberium|{$m4ac_boqgknhbxdt8}|loggedin"; if (function_exists('is_user_logged_in') && is_user_logged_in() && ! empty($m4ac_owo_9bqrfgu[$m4ac_ukqvxo6ne7]) ) { $m4ac_ah90o86m['theme_location'] = $m4ac_ukqvxo6ne7; } if ($this->m4ac_k6b8c0f7g5() ) { return $m4ac_ah90o86m; }  foreach ($m4ac_f8dnpolaceg5 as $m4ac_qtlqd_1a6m8) { $m4ac_ukqvxo6ne7 = "memberium|{$m4ac_boqgknhbxdt8}|{$m4ac_qtlqd_1a6m8}"; if (! empty($m4ac_owo_9bqrfgu[$m4ac_ukqvxo6ne7]) ) { $m4ac_ah90o86m['theme_location'] = $m4ac_ukqvxo6ne7; } } } $m4ac_ah90o86m['theme_location'] = apply_filters('memberium_personal_menus', $m4ac_ah90o86m['theme_location']); return $m4ac_ah90o86m; } 
function m4ac_et8ldvbz0yhr() { if (! empty($_REQUEST['redirect_to']) ) { $m4ac_u1lyzv76r = $_REQUEST['redirect_to']; } else { $m4ac_u1lyzv76r = empty($_SERVER['HTTP_REFERER']) ? '' : $_SERVER['HTTP_REFERER']; } if (empty($m4ac_u1lyzv76r) && $this->m4ac_x280qrz9kmic('login_url') > 0) { $m4ac_u1lyzv76r = get_permalink($this->m4ac_x280qrz9kmic('login_url') ) . '?' . $_SERVER['QUERY_STRING']; } return $m4ac_u1lyzv76r; }    
function m4ac_k0tfcba1jexo() { m4ac_tl5skz6cfptr::m4ac_qea6zr047(); m4ac_tl5skz6cfptr::m4ac_f1w9jlh37i(); m4ac_hpc5iv6omh::m4ac_ngqsmwtpyfu(); $this->m4ac_ftm2xflo(); } 
function m4ac_d5ugtcajbhkr() { m4ac_eghsod68x::m4ac_c03lr7egt(); m4ac_tl5skz6cfptr::m4ac_f1w9jlh37i(true); m4ac_yyac92bkugv1::m4ac_indi4kxuy2o3(true); m4ac_yyac92bkugv1::m4ac_q2smonpdve(); $this->m4ac_ufh0e5zg7dt(); $this->m4ac_p05w6kivzl4(); $this->m4ac_yi6vneh3(); $this->m4ac_q3q51rf7wcs(); $this->m4ac_k7c1lfkywtju(); $this->m4ac_hvr5tkz6is(); }    
function m4ac_gbu72zpmi($m4ac_b0zgjo5s4b3) { global $wpdb; $m4ac_h57xqitcp = $this->m4ac_bztk3xj1(); $m4ac_xtcz6bi97flk = 'SELECT id FROM `' . MEMBERIUM_DB_TAGS . '` WHERE `appname` = %s AND `name` = %s ;'; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_h57xqitcp, $m4ac_b0zgjo5s4b3); $m4ac_rsau1b7dj2lr = $wpdb->get_var($m4ac_xtcz6bi97flk); if ($m4ac_rsau1b7dj2lr) { return $m4ac_rsau1b7dj2lr; } else { return false; } } 
function m4ac_zy0gje1zk56($m4ac_t8vwepu4qr) { global $wpdb; $m4ac_h57xqitcp = $this->m4ac_bztk3xj1(); $m4ac_xtcz6bi97flk = 'SELECT id FROM `' . MEMBERIUM_DB_LISTS . '` WHERE `appname` = %s AND `name` = %s ;'; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_h57xqitcp, $m4ac_t8vwepu4qr); $m4ac_r7yve3xqc5tm = $wpdb->get_var($m4ac_xtcz6bi97flk); if ($m4ac_r7yve3xqc5tm) { return $m4ac_r7yve3xqc5tm; } else { return false; } } 
function m4ac_jj97adupw_3v($m4ac_jr8wf_gpyc = false) { global $wpdb; $m4ac_p80burja5 = MEMBERIUM_DB_LISTS; $m4ac_h57xqitcp = $this->m4ac_bztk3xj1(); $m4ac_xtcz6bi97flk = "SELECT `id`, `name` FROM `{$m4ac_p80burja5}` WHERE `appname` = '{$m4ac_h57xqitcp}' ORDER BY `name` ASC ;"; $m4ac_x_1sx47rpefc = $wpdb->get_results($m4ac_xtcz6bi97flk, ARRAY_A); if (is_array($m4ac_x_1sx47rpefc) ) { foreach ($m4ac_x_1sx47rpefc as $m4ac_lsxa90fgqk) { $lists[$m4ac_lsxa90fgqk['id']] = $m4ac_lsxa90fgqk['name']; } } unset($m4ac_x_1sx47rpefc, $m4ac_xtcz6bi97flk); if (! $m4ac_jr8wf_gpyc) { return $lists; } elseif ($m4ac_jr8wf_gpyc == 'json') { $m4ac_gnwc4_s1t2o8 = []; $m4ac_gnwc4_s1t2o8[] = [ 'id' => 0, 'text' => '(None)' ]; foreach ( (array) $lists as $m4ac_lj_fwoc5ub1y => $m4ac_pzocy3nw) { $m4ac_gnwc4_s1t2o8[] = [ 'id' => $m4ac_lj_fwoc5ub1y, 'text' => $m4ac_pzocy3nw . ' (' . $m4ac_lj_fwoc5ub1y . ')' ]; } return json_encode($m4ac_gnwc4_s1t2o8); } } 
function m4ac_ni3dn9fc($m4ac_o2lhyvkaf_ = false, $m4ac_zx02avtn = false, $m4ac_invgem3i = false) { global $wpdb; static $m4ac_bayqx7bk = []; $m4ac_gduhckfg = md5(serialize(func_get_args() ) ); if (array_key_exists($m4ac_gduhckfg, $m4ac_bayqx7bk) ) { return $m4ac_bayqx7bk[$m4ac_gduhckfg]; } $m4ac_my0krnhs18c = ''; if ($m4ac_zx02avtn) { $m4ac_zx02avtn = $this->m4ac_x280qrz9kmic('tag_dropdown_filter'); $m4ac_zx02avtn = empty($m4ac_zx02avtn) ? [] : $m4ac_zx02avtn = explode(',', $m4ac_zx02avtn); $m4ac_my0krnhs18c .= 'AND ( 1=1 '; foreach($m4ac_zx02avtn as $m4ac_t365kbjxq) { $m4ac_my0krnhs18c .= " OR `name` LIKE '%{$m4ac_t365kbjxq}%' "; } $m4ac_my0krnhs18c .= ' ) '; } else { $m4ac_zx02avtn = []; }  $m4ac_fic2e07vfkz = []; $m4ac_p80burja5 = MEMBERIUM_DB_TAGS; $m4ac_h57xqitcp = $this->m4ac_bztk3xj1(); $m4ac_xtcz6bi97flk = "SELECT `id`, `name` FROM `{$m4ac_p80burja5}` WHERE `appname` = '{$m4ac_h57xqitcp}' {$m4ac_my0krnhs18c} ORDER BY `name` "; $m4ac_j0e14tousp_ = $wpdb->get_results($m4ac_xtcz6bi97flk, ARRAY_A); foreach ($m4ac_j0e14tousp_ as $m4ac_o75qrnlisk) { $m4ac_fic2e07vfkz['mc'][$m4ac_o75qrnlisk['id']] = $m4ac_o75qrnlisk['name']; $m4ac_fic2e07vfkz['lc'][$m4ac_o75qrnlisk['id']] = strtolower($m4ac_o75qrnlisk['name']); } unset($m4ac_j0e14tousp_, $m4ac_o75qrnlisk);  if ($m4ac_invgem3i) { if(! empty($m4ac_fic2e07vfkz['mc']) && is_array($m4ac_fic2e07vfkz['mc']) ){ $m4ac_fic2e07vfkz['hn'] = []; $m4ac_fdwaz6gxuq = __('Does Not Have', 'memberium'); foreach ($m4ac_fic2e07vfkz['mc'] as $m4ac_lj_fwoc5ub1y => $m4ac_o75qrnlisk) { $m4ac_fic2e07vfkz['hn'][$m4ac_lj_fwoc5ub1y] = "{$m4ac_o75qrnlisk} ({$m4ac_lj_fwoc5ub1y})"; $m4ac_fic2e07vfkz['hn'][ '-' . $m4ac_lj_fwoc5ub1y] = "{$m4ac_fdwaz6gxuq} {$m4ac_o75qrnlisk} (-{$m4ac_lj_fwoc5ub1y})"; } } } if ($m4ac_o2lhyvkaf_) { if ($m4ac_o2lhyvkaf_ == 'json') { $m4ac_gnwc4_s1t2o8 = []; $m4ac_gnwc4_s1t2o8[] = [ 'id' => 0, 'text' => '(None)' ]; foreach ( (array) $m4ac_fic2e07vfkz['mc'] as $m4ac_lj_fwoc5ub1y => $m4ac_o75qrnlisk) { if (! empty($m4ac_zx02avtn) ) { foreach($m4ac_zx02avtn as $m4ac_pzocy3nw) { if (stripos($m4ac_o75qrnlisk, $m4ac_pzocy3nw) !== false) { $m4ac_gnwc4_s1t2o8[] = [ 'id' => $m4ac_lj_fwoc5ub1y, 'text' => $m4ac_o75qrnlisk . ' (' . $m4ac_lj_fwoc5ub1y . ')' ]; } } } else{ $m4ac_gnwc4_s1t2o8[] = [ 'id' => $m4ac_lj_fwoc5ub1y, 'text' => $m4ac_o75qrnlisk . ' (' . $m4ac_lj_fwoc5ub1y . ')' ]; } } $m4ac_fic2e07vfkz = json_encode($m4ac_gnwc4_s1t2o8); } elseif ($m4ac_o2lhyvkaf_ == 'array') { $m4ac_gnwc4_s1t2o8 = []; $m4ac_gnwc4_s1t2o8[0] = '(None)'; foreach ( (array) $m4ac_fic2e07vfkz['mc'] as $m4ac_lj_fwoc5ub1y => $m4ac_o75qrnlisk) { $m4ac_gnwc4_s1t2o8[$m4ac_lj_fwoc5ub1y] = $m4ac_o75qrnlisk . ' (' . $m4ac_lj_fwoc5ub1y . ')'; } return $m4ac_gnwc4_s1t2o8; } } $m4ac_bayqx7bk[$m4ac_gduhckfg] = $m4ac_fic2e07vfkz; return $m4ac_fic2e07vfkz; } 
function m4ac_z9bycarqvxj($m4ac_lj_fwoc5ub1y) { static $m4ac_u9uhl_ci87 = []; if (empty($m4ac_u9uhl_ci87)) { $m4ac_u9uhl_ci87 = $this->m4ac_n_1ak7e32(); } return isset($m4ac_u9uhl_ci87[$m4ac_lj_fwoc5ub1y]) ? $m4ac_u9uhl_ci87[$m4ac_lj_fwoc5ub1y] : ''; } 
function m4ac_syu2e3n_d71() { $m4ac_u9uhl_ci87 = []; $m4ac_u9uhl_ci87[] = strtolower( trim( $this->m4ac_x280qrz9kmic('password_field'), '%' ) ); $m4ac_u9uhl_ci87[] = $this->m4ac_z9bycarqvxj( $this->m4ac_x280qrz9kmic('secure_password_sync') ); return array_filter($m4ac_u9uhl_ci87); } 
function m4ac_n_1ak7e32($m4ac_mwj5zkgrs = true, $m4ac_o2lhyvkaf_ = '') { global $wpdb; $m4ac_p80burja5 = MEMBERIUM_DB_FIELDS; $m4ac_h57xqitcp = $this->m4ac_bztk3xj1(); $m4ac_xtcz6bi97flk = "SELECT `id`, `tag` FROM `{$m4ac_p80burja5}` WHERE `appname` = '{$m4ac_h57xqitcp}' ORDER BY `tag` ;"; $m4ac_x_1sx47rpefc = $wpdb->get_results($m4ac_xtcz6bi97flk, ARRAY_A); $m4ac_u9uhl_ci87 = []; if ($m4ac_mwj5zkgrs) { $m4ac_u9uhl_ci87 = [ -1 => 'firstname', -2 => 'lastname', -3 => 'phone', -4 => 'orgname', -5 => 'email', ]; } foreach ($m4ac_x_1sx47rpefc as $m4ac_lsxa90fgqk) { $m4ac_u9uhl_ci87[$m4ac_lsxa90fgqk['id']] = strtolower(trim($m4ac_lsxa90fgqk['tag'], '%') ); } unset($m4ac_x_1sx47rpefc, $m4ac_xtcz6bi97flk, $m4ac_p80burja5, $m4ac_h57xqitcp); if (! $m4ac_o2lhyvkaf_) { return $m4ac_u9uhl_ci87; } }    
function m4ac_u4qcw0thxaj($m4ac_d78sk4qc3i, $m4ac_zjw7canbxu3q = false) { if (empty($m4ac_d78sk4qc3i) ) { return []; } $m4ac_z_b0krof4xum = $this->m4ac_x280qrz9kmic('ac_api_verified'); if (empty($m4ac_z_b0krof4xum) ) { return false; } $m4ac_fmp1cur9 = $this->m4ac_yiqu4k3xj5()->api('contact/view?email=' . $m4ac_d78sk4qc3i); $m4ac_qsvd0m6oq = []; if ($m4ac_fmp1cur9->success) { if ($m4ac_zjw7canbxu3q) { $m4ac_qsvd0m6oq = $m4ac_fmp1cur9; } else { $m4ac_qsvd0m6oq = $this->m4ac_k7pa1q_wx($m4ac_fmp1cur9); } } return $m4ac_qsvd0m6oq; } 
function m4ac_u8pw7sfb6h($m4ac_uo08x_g7, $m4ac_zjw7canbxu3q = false) { $m4ac_z_b0krof4xum = $this->m4ac_x280qrz9kmic('ac_api_verified'); if (empty($m4ac_z_b0krof4xum) || empty($m4ac_uo08x_g7) ) { return []; } $m4ac_fmp1cur9 = $this->m4ac_yiqu4k3xj5()->api('contact/view?id=' . $m4ac_uo08x_g7); $m4ac_qsvd0m6oq = []; if ($m4ac_fmp1cur9->success) { if ($m4ac_zjw7canbxu3q) { $m4ac_qsvd0m6oq = $m4ac_fmp1cur9; } else { $m4ac_qsvd0m6oq = $this->m4ac_k7pa1q_wx($m4ac_fmp1cur9); } } return $m4ac_qsvd0m6oq; }    
function m4ac_k7pa1q_wx($m4ac_y0x7qa_kewg) { $m4ac_qsvd0m6oq = []; $m4ac_qsvd0m6oq['data']['id'] = $m4ac_y0x7qa_kewg->id; $m4ac_qsvd0m6oq['data']['list'] = strtr($m4ac_y0x7qa_kewg->listslist, '-', ',') ; $m4ac_qsvd0m6oq['standard']['first_name'] = $m4ac_y0x7qa_kewg->first_name; $m4ac_qsvd0m6oq['standard']['last_name'] = $m4ac_y0x7qa_kewg->last_name; $m4ac_qsvd0m6oq['standard']['email'] = $m4ac_y0x7qa_kewg->email; $m4ac_qsvd0m6oq['standard']['ip'] = $m4ac_y0x7qa_kewg->ip; $m4ac_qsvd0m6oq['standard']['phone'] = $m4ac_y0x7qa_kewg->phone; $m4ac_qsvd0m6oq['standard']['orgname'] = $m4ac_y0x7qa_kewg->orgname; $m4ac_qsvd0m6oq['standard']['tags'] = implode(',', $m4ac_y0x7qa_kewg->tags); if (isset($m4ac_y0x7qa_kewg->fields) && is_object($m4ac_y0x7qa_kewg->fields) ) { foreach ($m4ac_y0x7qa_kewg->fields as $m4ac_zvwj8x_y6) { $m4ac_qsvd0m6oq['custom'][$m4ac_zvwj8x_y6->id] = $m4ac_zvwj8x_y6->val; } } $m4ac_mjegm_n97rv = $this->m4ac_x280qrz9kmic('contact_history'); if (! empty($m4ac_mjegm_n97rv) ) { $m4ac_qsvd0m6oq['record'] = $m4ac_y0x7qa_kewg; } return $m4ac_qsvd0m6oq; }    
function m4ac_u3b_y0lx(array $m4ac_ah90o86m = []) { global $wpdb; static $m4ac_i8cybxk4z610 = []; $m4ac_wdl2r3x6jg = [ 'contact_id' => $this->m4ac_w8ohueyv(), 'list_id' => [0], 'require' => 'any',  'status' => [0, 1], ]; $m4ac_ah90o86m = wp_parse_args($m4ac_ah90o86m, $m4ac_wdl2r3x6jg); $m4ac_ah90o86m['list_id'] = is_array($m4ac_ah90o86m['list_id']) ? $m4ac_ah90o86m['list_id'] : array_filter(explode(',', $m4ac_ah90o86m['list_id']) ); $m4ac_ah90o86m['status'] = is_array($m4ac_ah90o86m['status']) ? $m4ac_ah90o86m['status'] : array_filter(explode(',', $m4ac_ah90o86m['status']) );  if (empty($m4ac_ah90o86m['list_id']) || ! $m4ac_ah90o86m['contact_id']) { return false; }  if (! isset($m4ac_i8cybxk4z610[$m4ac_ah90o86m['contact_id']]) ) { $m4ac_xtcz6bi97flk = "SELECT `value` FROM `" . MEMBERIUM_DB_CONTACTS . "` WHERE `id` = %d AND `appname` = %s and `field_id` = 0 AND `fieldname` = 'record';"; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_ah90o86m['contact_id'], $this->m4ac_bztk3xj1()); $m4ac_y0x7qa_kewg = unserialize($wpdb->get_var($m4ac_xtcz6bi97flk) ); $m4ac_y0x7qa_kewg = $m4ac_y0x7qa_kewg->lists; $m4ac_i8cybxk4z610[$m4ac_ah90o86m['contact_id']] = $m4ac_y0x7qa_kewg; unset($m4ac_xtcz6bi97flk); } else { $m4ac_y0x7qa_kewg = $m4ac_i8cybxk4z610[$m4ac_ah90o86m['contact_id']]; }  $m4ac_pq5guefvs0 = false; $m4ac_g0zfk3pxrj = true; foreach ($m4ac_ah90o86m['list_id'] as $list_id) { if (isset($m4ac_y0x7qa_kewg->$list_id) && in_array($m4ac_y0x7qa_kewg->$list_id->status, $m4ac_ah90o86m['status']) ) { if (isset($m4ac_y0x7qa_kewg->$list_id) && in_array($m4ac_y0x7qa_kewg->$list_id->status, $m4ac_ah90o86m['status']) ) { $m4ac_pq5guefvs0 = true; } else { if (isset($m4ac_y0x7qa_kewg->$list_id) && in_array($m4ac_y0x7qa_kewg->$list_id->status, $m4ac_ah90o86m['status']) ) { $m4ac_pq5guefvs0 = true; } } } else { $m4ac_g0zfk3pxrj = false; } } unset($m4ac_y0x7qa_kewg, $list_id); if ($m4ac_ah90o86m['require'] == 'all') { return $m4ac_g0zfk3pxrj; } else { return $m4ac_pq5guefvs0; } } 
function m4ac_b_3hb7i9cs8($m4ac_ah90o86m = [] ) { global $wpdb; static $m4ac_i8cybxk4z610 = [];  $m4ac_wdl2r3x6jg = [ 'contact_id' => $this->m4ac_w8ohueyv(), 'list_id' => 0, ]; $m4ac_ah90o86m = wp_parse_args($m4ac_ah90o86m, $m4ac_wdl2r3x6jg); $m4ac_ah90o86m['list_id'] = (int) $m4ac_ah90o86m['list_id'];  if (empty($m4ac_ah90o86m['list_id']) || ! $m4ac_ah90o86m['contact_id']) { return false; }  if (! isset($m4ac_i8cybxk4z610[$m4ac_ah90o86m['contact_id']]) ) { $m4ac_xtcz6bi97flk = "SELECT `value` FROM `" . MEMBERIUM_DB_CONTACTS . "` WHERE `id` = %d AND `appname` = %s and `field_id` = 0 AND `fieldname` = 'record';"; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_ah90o86m['contact_id'], $this->m4ac_bztk3xj1()); $m4ac_y0x7qa_kewg = unserialize($wpdb->get_var($m4ac_xtcz6bi97flk) ); $m4ac_i8cybxk4z610[$m4ac_ah90o86m['contact_id']] = $m4ac_y0x7qa_kewg; unset($m4ac_xtcz6bi97flk); } else { $m4ac_y0x7qa_kewg = $m4ac_i8cybxk4z610[$m4ac_ah90o86m['contact_id']]; } $m4ac_d78sk4qc3i = $m4ac_y0x7qa_kewg->email; $m4ac_y0x7qa_kewg = $m4ac_y0x7qa_kewg->bounces->mailing; $m4ac_t8_41dupjc7r = false; foreach ($m4ac_y0x7qa_kewg as $m4ac_wisnkucv) { if ($m4ac_wisnkucv->listid == $m4ac_ah90o86m['list_id'] && $m4ac_wisnkucv->email == $m4ac_d78sk4qc3i) { $m4ac_t8_41dupjc7r = true; break; } } return $m4ac_t8_41dupjc7r; } 
function m4ac_xkqpuge37fsi($m4ac_ah90o86m = [] ) { global $wpdb; $m4ac_wdl2r3x6jg = [ 'contact_id' => $this->m4ac_w8ohueyv(), 'list_id' => 0, 'output' => 'raw',  ]; $m4ac_ah90o86m = wp_parse_args($m4ac_ah90o86m, $m4ac_wdl2r3x6jg); if (! $m4ac_ah90o86m['list_id'] || ! $m4ac_ah90o86m['contact_id']) { return false; } $m4ac_xtcz6bi97flk = "SELECT `value` FROM `" . MEMBERIUM_DB_CONTACTS . "` WHERE `id` = %d AND `appname` = %s and `field_id` = 0 AND `fieldname` = 'record';"; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_ah90o86m['contact_id'], $this->m4ac_bztk3xj1()); $m4ac_y0x7qa_kewg = unserialize($wpdb->get_var($m4ac_xtcz6bi97flk) ); $m4ac_vykuqfwdj_0 = (isset($m4ac_y0x7qa_kewg->lists->$m4ac_ah90o86m['list_id']->status) ) ? $m4ac_y0x7qa_kewg->lists->$m4ac_ah90o86m['list_id']->status : -1; unset($m4ac_y0x7qa_kewg); if ($m4ac_ah90o86m['output'] == 'text') { $m4ac_a3i7sb2lu6n = [ 0 => 'unconfirmed', 1 => 'active', 2 => 'unsubscribed', ]; $m4ac_vykuqfwdj_0 = $m4ac_a3i7sb2lu6n[$m4ac_vykuqfwdj_0]; } return $m4ac_vykuqfwdj_0; }    
function m4ac_pv1ptjizbd($m4ac_o2lhyvkaf_ = '') { $m4ac_rld1a_268o = wp_cache_get('automations', 'memberiumac', false, $m4ac_tp09y21w7hcn); if (! $m4ac_tp09y21w7hcn) { global $wpdb; $m4ac_p80burja5 = MEMBERIUM_DB_AUTOMATIONS; $m4ac_h57xqitcp = $this->m4ac_bztk3xj1(); $m4ac_xtcz6bi97flk = "SELECT `id`, `name` FROM `{$m4ac_p80burja5}` WHERE `appname` = '{$m4ac_h57xqitcp}' AND `status` = 1 ORDER BY `name` ;"; $m4ac_rld1a_268o = $wpdb->get_results($m4ac_xtcz6bi97flk, ARRAY_A); wp_cache_set('automations', $m4ac_rld1a_268o, 'memberiumac', 900); } if ($m4ac_o2lhyvkaf_ == 'json') { $m4ac_rzq0sh7afxp = [[ 'id' => 0, 'text' => '(No Automations)' ]]; if (! empty($m4ac_rld1a_268o) ) { foreach ($m4ac_rld1a_268o as $m4ac_lj_fwoc5ub1y => $m4ac_lsxa90fgqk) { $m4ac_rzq0sh7afxp[] = [ 'id'=>$m4ac_lsxa90fgqk['id'], 'text'=>$m4ac_lsxa90fgqk['name'] . ' (' . $m4ac_lsxa90fgqk['id'] . ')' ]; } } return json_encode($m4ac_rzq0sh7afxp); } elseif ($m4ac_o2lhyvkaf_ == 'array') { $m4ac_fic2e07vfkz = []; $m4ac_fic2e07vfkz[0] = '(No Automations)'; if (! empty($m4ac_rld1a_268o) ) { foreach ($m4ac_rld1a_268o as $m4ac_lj_fwoc5ub1y => $m4ac_lsxa90fgqk) { $m4ac_fic2e07vfkz[$m4ac_lsxa90fgqk['id']] = $m4ac_lsxa90fgqk['name'] . ' (' . $m4ac_lsxa90fgqk['id'] . ')'; } } return $m4ac_fic2e07vfkz; } return $m4ac_rld1a_268o; }    
function m4ac_gn_eupwrq0o() { return (defined('REST_REQUEST ') && REST_REQUEST); } 
function m4ac_vfk4lrgmyaj($m4ac_pl4t1yd_, $m4ac_fheyfujga6, $m4ac_wid9hr6_3le) { return false; }    
function m4ac_xur62hzbo() { nocache_headers(); header('Cache-Control: no-cache, max-age=0, must-revalidate, no-store'); header('Pragma: no-cache'); header('Expires: 0'); } 
function m4ac_ctj1c_fo76() { $this->m4ac_dki739zs2uq(); $this->m4ac_ftm2xflo(); }    
function m4ac_zgyw0qpv() { static $m4ac_bsijd7zrx = false; if (! $m4ac_bsijd7zrx) { $m4ac_bsijd7zrx = []; $m4ac_bsijd7zrx['first_name'] = 'firstname'; $m4ac_bsijd7zrx['last_name'] = 'lastname'; $m4ac_bsijd7zrx = apply_filters('memberium/usermeta/crm_field_maps', $m4ac_bsijd7zrx); } return $m4ac_bsijd7zrx; } 
function m4ac_qxvo5ntb8($m4ac_b69obly_uf, $m4ac_at_5xofh, $m4ac_jj79h_ou1vm, $m4ac_j2lrxtga, $m4ac_htwp87cb = '') { global $wpdb; if ($m4ac_htwp87cb == $m4ac_j2lrxtga) { return; } if ($this->doing_user_update) { return; } $m4ac_uo08x_g7 = (int) m4ac_bem2ya5k::m4ac_pm63av15g($m4ac_at_5xofh); if ($m4ac_uo08x_g7 < 1) { return; } $m4ac_chzn2fvjckr = $this->m4ac_zgyw0qpv(); if (substr($m4ac_jj79h_ou1vm, 0, 5) <> 'memb_' && ! array_key_exists($m4ac_jj79h_ou1vm, $m4ac_chzn2fvjckr) ) { return; } if (! empty($m4ac_chzn2fvjckr[$m4ac_jj79h_ou1vm]) ) { $m4ac_ur90k1f2dy = $m4ac_chzn2fvjckr[$m4ac_jj79h_ou1vm]; } elseif (substr($m4ac_jj79h_ou1vm, 0, 5) == 'memb_') { $m4ac_ur90k1f2dy = substr($m4ac_jj79h_ou1vm, 5); } else { $m4ac_ur90k1f2dy = ''; } if (! empty($m4ac_ur90k1f2dy) ) { $m4ac_kjtaf41iur = strtolower($m4ac_ur90k1f2dy); $m4ac_j2lrxtga = trim($m4ac_j2lrxtga); if (substr($m4ac_kjtaf41iur, 0, 1) <> '%') { $m4ac_kjtaf41iur = "%{$m4ac_kjtaf41iur}%"; } } $m4ac_fycpjnq428m6 = get_current_user_id() == $m4ac_at_5xofh;  if ($m4ac_fycpjnq428m6 && isset($_SESSION['memb_db_fields'][$m4ac_kjtaf41iur]) ) { $_SESSION['memb_db_fields'][$m4ac_kjtaf41iur] = $m4ac_j2lrxtga; } $this->m4ac_kb_flwp6s7h3($m4ac_uo08x_g7, $m4ac_kjtaf41iur, $m4ac_j2lrxtga);  $m4ac_h57xqitcp = $this->m4ac_bztk3xj1(); $m4ac_xtcz6bi97flk = 'INSERT INTO `' . MEMBERIUM_DB_CONTACTS . '` (`id`, `appname`, `fieldname`, `value`) VALUES (%d, %s, %s, %s) ON DUPLICATE KEY UPDATE `value` = %s;'; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_uo08x_g7, $m4ac_h57xqitcp, strtoupper($m4ac_kjtaf41iur), $m4ac_j2lrxtga, $m4ac_j2lrxtga); $wpdb->query($m4ac_xtcz6bi97flk); }    
function m4ac_i8mr2xtg6d($m4ac_uo08x_g7 = false) { if (! $m4ac_uo08x_g7) { if (isset($_SESSION['memb_user']['crm_id']) && $_SESSION['memb_user']['crm_id'] > 0) { $m4ac_uo08x_g7 = $_SESSION['memb_user']['crm_id']; } else { return false; } } if ($m4ac_uo08x_g7 > 0) { $m4ac_mnz4ows_ = wp_cache_get('namespace_key', 'memberium::user::' . $m4ac_uo08x_g7);  if ($m4ac_mnz4ows_ === false) { $m4ac_mnz4ows_ = microtime(true); wp_cache_set('namespace_key', $m4ac_mnz4ows_, 'memberium::user::' . $m4ac_uo08x_g7, 0); } } return $m4ac_mnz4ows_; } 
function m4ac_wbdjl71f9($m4ac_uo08x_g7 = false) { $m4ac_cyn02pj85ko = 'memberiumac/contacts'; if (! $m4ac_uo08x_g7) { if (isset($_SESSION['memb_user']['crm_id']) && $_SESSION['memb_user']['crm_id'] > 0) { $m4ac_uo08x_g7 = $_SESSION['memb_user']['crm_id']; } else { return false; } } if ($m4ac_uo08x_g7 > 0) {  wp_cache_set('namespace_key', 1, 'memberium::user::' . $m4ac_uo08x_g7, 0); wp_cache_delete("contact/{$m4ac_uo08x_g7}", $m4ac_cyn02pj85ko); wp_cache_delete("contact_last_updated/{$m4ac_uo08x_g7}", $m4ac_cyn02pj85ko); } }    
function m4ac_s5ze6qlragdu($m4ac_yvyosepl6) { return hash_hmac('sha256', $m4ac_yvyosepl6, wp_salt('nonce') . m4ac_p58mfx3cua::m4ac_teq1zlwih6() . $this->m4ac_w8ohueyv() ); } 
function m4ac_bh4tj53v6z8k($m4ac_vejbrg5i, $m4ac_yvyosepl6) { return $this->m4ac_s5ze6qlragdu($m4ac_yvyosepl6) == $m4ac_vejbrg5i; }  
function m4ac_cc6avjg01() {  if ($this->sso_mode) { return true; }  if (isset($_COOKIE['nextend_uniqid']) && $_COOKIE['nextend_uniqid'] > '') { return true; }   return false; }    
function m4ac_fuen6oxg(string $m4ac_ukqvxo6ne7, $m4ac_spy5urzgcq8 = false) { if ($m4ac_spy5urzgcq8 === false) { $m4ac_sqkm9xsn57bj = true; $m4ac_spy5urzgcq8 = (array) get_option('memberium_setup_completed'); } else { $m4ac_sqkm9xsn57bj = false; } $m4ac_spy5urzgcq8[] = strtolower(trim($m4ac_ukqvxo6ne7) ); $m4ac_spy5urzgcq8 = array_filter(array_unique($m4ac_spy5urzgcq8) ); if ($m4ac_sqkm9xsn57bj) { update_option('memberium_setup_completed', array_filter(array_unique($m4ac_spy5urzgcq8) )); } return $m4ac_spy5urzgcq8; }    
function m4ac_eq5n3jys8m0e() { $m4ac_ltyqmp4gwi = [ 'name' => _x('Partials', 'post type general name', 'your-plugin-textdomain'), 'singular_name' => _x('Partial', 'post type singular name', 'your-plugin-textdomain'), 'menu_name' => _x('Partials', 'admin menu', 'your-plugin-textdomain'), 'name_admin_bar' => _x('Partial', 'add new on admin bar', 'your-plugin-textdomain'), 'add_new' => _x('Add New', 'book', 'your-plugin-textdomain'), 'add_new_item' => __('Add New Partial', 'your-plugin-textdomain'), 'new_item' => __('New Partial', 'your-plugin-textdomain'), 'edit_item' => __('Edit Partial', 'your-plugin-textdomain'), 'view_item' => __('View Partial', 'your-plugin-textdomain'), 'all_items' => __('All Partials', 'your-plugin-textdomain'), 'search_items' => __('Search Partials', 'your-plugin-textdomain'), 'parent_item_colon' => __('Parent Partials:', 'your-plugin-textdomain'), 'not_found' => __('No partials found.', 'your-plugin-textdomain'), 'not_found_in_trash' => __('No partials found in Trash.', 'your-plugin-textdomain'), ]; $m4ac_wt1fo7d8 = [ 'title', 'editor', 'revisions', 'excerpt', ]; register_post_type('partials', [ 'can_export' => true, 'capability_type' => 'post', 'description' => 'Content Snippets for Memberium Membership System', 'exclude_from_search' => true, 'labels' => $m4ac_ltyqmp4gwi, 'menu_position' => 20, 'public' => false, 'show_in_admin_bar' => false, 'show_in_menu' => false, 'show_in_nav_menus' => false, 'show_ui' => true, 'supports' => $m4ac_wt1fo7d8, ] ); $m4ac_ltyqmp4gwi = [ 'name' => _x('Custom Shortcodes', 'post type general name', 'your-plugin-textdomain'), 'singular_name' => _x('Custom Shortcode', 'post type singular name', 'your-plugin-textdomain'), 'menu_name' => _x('Custom Shortcodes', 'admin menu', 'your-plugin-textdomain'), 'name_admin_bar' => _x('Custom Shortcode', 'add new on admin bar', 'your-plugin-textdomain'), 'add_new' => _x('Add New', 'book', 'your-plugin-textdomain'), 'add_new_item' => __('Add New Custom Shortcode', 'your-plugin-textdomain'), 'new_item' => __('New Custom Shortcode', 'your-plugin-textdomain'), 'edit_item' => __('Edit Custom Shortcode', 'your-plugin-textdomain'), 'view_item' => __('View Custom Shortcode', 'your-plugin-textdomain'), 'all_items' => __('All Custom Shortcodes', 'your-plugin-textdomain'), 'search_items' => __('Search Custom Shortcodes', 'your-plugin-textdomain'), 'parent_item_colon' => __('Parent Custom Shortcodes:', 'your-plugin-textdomain'), 'not_found' => __('No custom shortcodes found.', 'your-plugin-textdomain'), 'not_found_in_trash' => __('No custom shortcodes found in Trash.', 'your-plugin-textdomain'), ]; register_post_type('memb_shortcodeblocks', [ 'can_export' => true, 'capability_type' => 'post', 'description' => 'Custom Shortcodes', 'exclude_from_search' => true, 'labels' => $m4ac_ltyqmp4gwi, 'menu_position' => 21, 'public' => false, 'show_in_admin_bar' => false, 'show_in_menu' => false, 'show_in_nav_menus' => false, 'show_ui' => true, 'supports' => [ 'title', 'editor', ], 'taxonomies' => [ 'category' ], ]); add_filter('et_builder_post_types', [$this, 'm4ac_tcpbgj6od']); } 
function m4ac_tcpbgj6od(array $m4ac_id7k9t2q) { $m4ac_qn0kh43c8y1 = [ 'partials', 'memb_shortcodeblocks', ]; return array_merge($m4ac_id7k9t2q, $m4ac_qn0kh43c8y1); }          
function m4ac_x0ifur3b48(string $m4ac_ss6bwxopg8 = '') { global $wpdb; $m4ac_szsgclnx0u = [ 1 => 'Text', 2 => 'Text Box', 3 => 'Checkbox', 4 => 'Radio', 5 => 'Dropdown', 6 => 'Hidden field', 7 => 'List Box', 9 => 'Date', ]; $m4ac_h57xqitcp = $this->m4ac_bztk3xj1(); $m4ac_xnk1th69jm2b = (! empty($m4ac_ss6bwxopg8) ) ? $m4ac_xnk1th69jm2b = ' AND `type` = %s ' : ''; $m4ac_xtcz6bi97flk = 'SELECT `id`, `name`, `type`, `tag` FROM `' . MEMBERIUM_DB_FIELDS . '` WHERE `appname` = %s ' . $m4ac_xnk1th69jm2b . ' ORDER BY `id` ;'; if (empty($m4ac_ss6bwxopg8) ) { $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_h57xqitcp); } else { $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_h57xqitcp, $m4ac_ss6bwxopg8); } $m4ac_x_1sx47rpefc = $wpdb->get_results($m4ac_xtcz6bi97flk, ARRAY_A); $m4ac_u9uhl_ci87 = []; foreach ($m4ac_x_1sx47rpefc as $m4ac_lsxa90fgqk) { $m4ac_u9uhl_ci87[$m4ac_lsxa90fgqk['id']] = $m4ac_lsxa90fgqk; } return $m4ac_u9uhl_ci87; } 
function m4ac_shgqrv34tu($m4ac_lj_fwoc5ub1y) { static $m4ac_u9uhl_ci87; if (! is_array($m4ac_u9uhl_ci87) ) { $m4ac_u9uhl_ci87 = $this->m4ac_x0ifur3b48(); } if (isset($m4ac_u9uhl_ci87[$m4ac_lj_fwoc5ub1y]['tag']) ) { return $m4ac_u9uhl_ci87[$m4ac_lj_fwoc5ub1y]['tag']; } return false; } 
function m4ac_sp457_gj2z(array $m4ac_tg19qum5) { return array_filter(array_map(function($m4ac_ww7oiazfdu) { if (is_array($m4ac_ww7oiazfdu) ) $m4ac_ww7oiazfdu = $this->m4ac_sp457_gj2z($m4ac_ww7oiazfdu); return $m4ac_ww7oiazfdu; }, array_change_key_case($m4ac_tg19qum5) )); }    
function m4ac_jmdu3j9b20w1($m4ac_sc0dl1gjpb5w, $m4ac_pzu0qml48, $m4ac_at_5xofh) { if ($m4ac_at_5xofh) { if (user_can($m4ac_at_5xofh, 'edit_others_posts') ) { $m4ac_sc0dl1gjpb5w = YEAR_IN_SECONDS; } } return $m4ac_sc0dl1gjpb5w; }  
function m4ac_wcpwfk1h2g($m4ac_h1yn7tlh, $m4ac_xw_c67ysk, $m4ac_ah90o86m) { if (empty($_SESSION['memb_user']['roles']) ) { return $m4ac_h1yn7tlh; } $m4ac__mrexf31jzdt = isset($_SESSION['memb_user']['roles']) ? explode(',', trim($_SESSION['memb_user']['roles'], ',') ) : []; foreach ($m4ac__mrexf31jzdt as $m4ac_cnjvkyitq) { if ($m4ac_cnjvkyitq > '') { $m4ac_h1yn7tlh[$m4ac_cnjvkyitq] = 1; } } return $m4ac_h1yn7tlh; } 
function m4ac_zmkxtn9db6($m4ac_at_5xofh = 0) { if (! empty($m4ac_at_5xofh) ) { $m4ac_at_5xofh = get_current_user_id(); } if (user_can($m4ac_at_5xofh, 'manage_options') ) { return; } $m4ac_tkv9p12yg = get_user_meta($m4ac_at_5xofh, 'session_tokens', true); if (is_array($m4ac_tkv9p12yg) && count($m4ac_tkv9p12yg) > 1) { $m4ac_rh7rc4v3o = time(); $m4ac_ahaw38ubfitg = 0;  foreach($m4ac_tkv9p12yg as $m4ac_ukqvxo6ne7 => $m4ac_ihnr7cyv) { if ($m4ac_ihnr7cyv['login'] > $m4ac_ahaw38ubfitg) { $m4ac_ahaw38ubfitg = $m4ac_ihnr7cyv['login']; } }  foreach($m4ac_tkv9p12yg as $m4ac_ukqvxo6ne7 => $m4ac_ihnr7cyv) { if ($m4ac_ihnr7cyv['login'] < $m4ac_ahaw38ubfitg || $m4ac_ihnr7cyv['expiration'] < $m4ac_rh7rc4v3o) { unset($m4ac_tkv9p12yg[$m4ac_ukqvxo6ne7]); } } update_user_meta($m4ac_at_5xofh, 'session_tokens', $m4ac_tkv9p12yg); } } 
function m4ac_fgwqju_z709f($m4ac_at_5xofh = 0) { global $wpdb; $m4ac_at_5xofh = (int) $m4ac_at_5xofh; if (empty($m4ac_at_5xofh) ) { $m4ac_at_5xofh = get_current_user_id(); } if ($this->m4ac_k6b8c0f7g5($m4ac_at_5xofh) ) { return; } if ($m4ac_at_5xofh > 0) { $m4ac_fheyfujga6 = get_user_by('id', $m4ac_at_5xofh); $m4ac_eevbiomuk6 = array_filter(explode(',', get_user_meta($m4ac_at_5xofh, 'memberium_roles', true) ));  foreach ($m4ac_eevbiomuk6 as $m4ac_cnjvkyitq) { if (! empty($m4ac_cnjvkyitq) ) { $m4ac_fheyfujga6->remove_role($m4ac_cnjvkyitq); } } update_user_meta($m4ac_at_5xofh, 'memberium_roles', ''); } } 
function m4ac_fc5jvneaq0($m4ac_d78sk4qc3i) { global $wpdb; $m4ac_fheyfujga6 = get_user_by('email', $m4ac_d78sk4qc3i); return (int) $m4ac_fheyfujga6->ID; }    
function m4ac_qvf3jp61hyt($m4ac_at_5xofh, $m4ac__crsbi5yuze) { global $wpdb; if (! defined('LLMS_VERSION') ) { return; }  $m4ac_pmokvuh_i = $wpdb->posts; $m4ac_aekgzj_c1 = $wpdb->postmeta; $m4ac_xtcz6bi97flk = "SELECT ID, meta_value FROM `{$m4ac_pmokvuh_i}`, `{$m4ac_aekgzj_c1}` WHERE post_status = 'publish' AND post_type = 'course' AND  post_id = ID AND meta_key = '_memberium_lms_autoenroll' AND meta_value > '' "; $m4ac_dwslpr0x57b = $wpdb->get_results($m4ac_xtcz6bi97flk, ARRAY_A); if (is_array($m4ac_dwslpr0x57b) ) { $m4ac_sx9b5cekgp0 = new LLMS_Student($m4ac_at_5xofh); foreach ($m4ac_dwslpr0x57b as $m4ac_maz5nvkp) { $m4ac_qhc_yts1u7 = $this->m4ac_t5ws0_v68($m4ac_maz5nvkp['meta_value'], $m4ac__crsbi5yuze); if ($m4ac_qhc_yts1u7) { $m4ac_sx9b5cekgp0->enroll($m4ac_maz5nvkp['ID']); } if (! $m4ac_qhc_yts1u7) { $m4ac_sx9b5cekgp0->unenroll($m4ac_maz5nvkp['ID']); } } } } 
function m4ac_vuqs1opjhf($m4ac_at_5xofh, $m4ac__crsbi5yuze) { if (! function_exists('WPCW_courses_syncUserAccess') ) { return; } $m4ac_m6lfjct_k = get_option('memberium_wpcw', [] ); $m4ac_m6lfjct_k = $m4ac_m6lfjct_k['courses']['access_tags']; $m4ac_agkv5qcbfr = WPCW_users_getUserCourseList($m4ac_at_5xofh); $m4ac_jco4njz2ts7 = [];  foreach ($m4ac_agkv5qcbfr as $m4ac_jqw09orfs2bt) { $m4ac_eq46hibd07c = $m4ac_jqw09orfs2bt->course_id; $m4ac_adz8pmgi7 = isset($m4ac_m6lfjct_k[$m4ac_eq46hibd07c]) ? $m4ac_m6lfjct_k[$m4ac_eq46hibd07c] : ''; if ($m4ac_jqw09orfs2bt->course_opt_user_access == 'default_show') { $m4ac_jco4njz2ts7[] = $m4ac_eq46hibd07c; } elseif (! empty($m4ac_adz8pmgi7) ) { if ($this->m4ac_t5ws0_v68($m4ac_adz8pmgi7, $m4ac__crsbi5yuze) ) { $m4ac_jco4njz2ts7[] = $m4ac_eq46hibd07c; } } } foreach ($m4ac_m6lfjct_k as $m4ac_eq46hibd07c => $m4ac_adz8pmgi7) { if ($this->m4ac_t5ws0_v68($m4ac_adz8pmgi7, $m4ac__crsbi5yuze) ) { $m4ac_jco4njz2ts7[] = $m4ac_eq46hibd07c; } }  $m4ac_jco4njz2ts7 = array_unique($m4ac_jco4njz2ts7); WPCW_courses_syncUserAccess($m4ac_at_5xofh, $m4ac_jco4njz2ts7, 'sync'); } 
function m4ac_o91vrce8($m4ac_at_5xofh) { global $wpdb; $m4ac_at_5xofh = (int) $m4ac_at_5xofh; if ($m4ac_at_5xofh == 0) { $m4ac_at_5xofh = isset($_SESSION['memb_user']['id']) ? $_SESSION['memb_user']['id'] : get_current_user_id(); $m4ac_zzkqlrct_6 = true; } else { $m4ac_zzkqlrct_6 = false; } } 
function m4ac_s70yixzw9($m4ac_fvwzlkf8hjxc = [], $m4ac_at_5xofh = 0) { global $wpdb; if (empty($m4ac_at_5xofh) ) { $m4ac_at_5xofh = get_current_user_id(); } if (is_string($m4ac_fvwzlkf8hjxc) ) { $m4ac_fvwzlkf8hjxc = array_filter(array_map('trim', explode(',', $m4ac_fvwzlkf8hjxc) )); } if (empty($m4ac_fvwzlkf8hjxc) && isset($_SESSION['memb_user']['roles']) ) { $m4ac_fvwzlkf8hjxc = array_filter(explode(',', $_SESSION['memb_user']['roles']) ); } $m4ac_fheyfujga6 = get_user_by('id', $m4ac_at_5xofh); if (method_exists($m4ac_fheyfujga6, 'add_role') ) { $m4ac_as4lhc28z = strval(get_user_meta($m4ac_at_5xofh, 'memberium_roles', true) ); if ($m4ac_as4lhc28z > '') { $m4ac_as4lhc28z = array_filter(explode(',', $m4ac_as4lhc28z) ); } else { $m4ac_as4lhc28z = []; } $m4ac_ht7s_cy89 = $m4ac_fvwzlkf8hjxc; $m4ac_crqzglu9h = [];  foreach ($m4ac_as4lhc28z as $m4ac_cnjvkyitq) { if (! empty($m4ac_cnjvkyitq) ) { $m4ac_fheyfujga6->remove_role($m4ac_cnjvkyitq); } }   if (is_array($m4ac_ht7s_cy89) && ! empty($m4ac_ht7s_cy89) ) { $m4ac_oso8cebw6h_u = array_unique($m4ac_ht7s_cy89); $m4ac_a9dianyqtl = []; if (! empty($m4ac_oso8cebw6h_u) ) { foreach ($m4ac_oso8cebw6h_u as $m4ac_cnjvkyitq) { if (! in_array($m4ac_cnjvkyitq, $m4ac_fheyfujga6->roles) ) { $m4ac_a9dianyqtl[] = $m4ac_cnjvkyitq; $m4ac_fheyfujga6->add_role($m4ac_cnjvkyitq); } } update_user_meta($m4ac_at_5xofh, 'memberium_roles', implode(',', $m4ac_a9dianyqtl) ); } } }  } 
function m4ac_uj7435zxcb2($m4ac_ah90o86m = [] ) { $m4ac_wdl2r3x6jg = [ 'fields' => [], 'lists' => [], 'tags' => '', ]; $m4ac_ah90o86m = wp_parse_args($m4ac_ah90o86m, $m4ac_wdl2r3x6jg); $m4ac_u9uhl_ci87 = array_filter($m4ac_ah90o86m['fields']); if (empty($m4ac_u9uhl_ci87) ) { return false; } $m4ac_ech62wzelm8d = $this->m4ac_n_1ak7e32(); $m4ac_m_jevhs4fwnp = $m4ac_ah90o86m['lists']; $m4ac_bxvpge5qkdo9 = []; $m4ac_bxvpge5qkdo9['ipv4'] = m4ac_p58mfx3cua::m4ac_teq1zlwih6(); foreach($m4ac_ech62wzelm8d as $m4ac_ukqvxo6ne7 => $m4ac_pzocy3nw) { if ($m4ac_ukqvxo6ne7 < 0) { $m4ac_ur90k1f2dy = $m4ac_pzocy3nw; if (isset($m4ac_u9uhl_ci87[$m4ac_ur90k1f2dy]) ) { $m4ac_bxvpge5qkdo9[$m4ac_ur90k1f2dy] = $m4ac_u9uhl_ci87[$m4ac_pzocy3nw]; } $m4ac_ur90k1f2dy = '%' . strtoupper($m4ac_pzocy3nw) . '%'; if (isset($m4ac_u9uhl_ci87[$m4ac_ur90k1f2dy]) ) { $m4ac_bxvpge5qkdo9[$m4ac_ur90k1f2dy] = $m4ac_u9uhl_ci87[$m4ac_ur90k1f2dy]; } $m4ac_ur90k1f2dy = '%' . strtolower($m4ac_pzocy3nw) . '%'; if (isset($m4ac_u9uhl_ci87[$m4ac_ur90k1f2dy]) ) { $m4ac_bxvpge5qkdo9[$m4ac_ur90k1f2dy] = $m4ac_u9uhl_ci87[$m4ac_ur90k1f2dy]; } } else { $m4ac_ur90k1f2dy = $m4ac_pzocy3nw; if (isset($m4ac_u9uhl_ci87[$m4ac_ur90k1f2dy]) ) { $m4ac_bxvpge5qkdo9['field['.$m4ac_ukqvxo6ne7.',0]'] = $m4ac_u9uhl_ci87[$m4ac_pzocy3nw]; } $m4ac_ur90k1f2dy = '%' . strtoupper($m4ac_pzocy3nw) . '%'; if (isset($m4ac_u9uhl_ci87[$m4ac_ur90k1f2dy]) ) { $m4ac_bxvpge5qkdo9['field['.$m4ac_ukqvxo6ne7.',0]'] = $m4ac_u9uhl_ci87[$m4ac_ur90k1f2dy]; } $m4ac_ur90k1f2dy = '%' . strtolower($m4ac_pzocy3nw) . '%'; if (isset($m4ac_u9uhl_ci87[$m4ac_ur90k1f2dy]) ) { $m4ac_bxvpge5qkdo9['field['.$m4ac_ukqvxo6ne7.',0]'] = $m4ac_u9uhl_ci87[$m4ac_ur90k1f2dy]; } } } if (! empty($m4ac_u9uhl_ci87['%EMAIL%']) ) { $m4ac_bxvpge5qkdo9['email'] = $m4ac_u9uhl_ci87['%EMAIL%']; } if (! empty($m4ac_u9uhl_ci87['%PHONE%']) ) { $m4ac_bxvpge5qkdo9['phone'] = $m4ac_u9uhl_ci87['%PHONE%']; } $m4ac_m9va4g_qr60i = [ 'firstname' => 'first_name', 'lastname' => 'last_name', ]; foreach($m4ac_m9va4g_qr60i as $m4ac_nt0xrciyb => $m4ac_uq3deyu9v2) { if (! empty($m4ac_bxvpge5qkdo9[$m4ac_nt0xrciyb]) && empty($m4ac_bxvpge5qkdo9[$m4ac_uq3deyu9v2])) { $m4ac_bxvpge5qkdo9[$m4ac_uq3deyu9v2] = $m4ac_bxvpge5qkdo9[$m4ac_nt0xrciyb]; unset($m4ac_bxvpge5qkdo9[$m4ac_nt0xrciyb]); } } if (! empty($m4ac_m_jevhs4fwnp) && is_array($m4ac_m_jevhs4fwnp) ) { foreach($m4ac_m_jevhs4fwnp as $m4ac_ckfu62mpdy) { $m4ac_bxvpge5qkdo9['p[' . $m4ac_ckfu62mpdy . ']*'] = $m4ac_ckfu62mpdy; } } if (! empty($m4ac_ah90o86m['tags']) ) { $m4ac_bxvpge5qkdo9['tags'] = $m4ac_ah90o86m['tags']; } $m4ac_fic2e07vfkz = $this->m4ac_yiqu4k3xj5()->api('contact/sync', $m4ac_bxvpge5qkdo9); if ($m4ac_fic2e07vfkz->success) { return (int) $m4ac_fic2e07vfkz->subscriber_id; } return false; } 
function m4ac_eg298f5u($m4ac_uo08x_g7, $m4ac_u9uhl_ci87, $m4ac_elt_y7p01ukd = false) { if (! $this->m4ac_w8ohueyv() && $this->m4ac_w8ohueyv() == $m4ac_uo08x_g7 ) { $m4ac_d78sk4qc3i = $_SESSION['memb_db_fields']['%email%']; } else { $m4ac_fheyfujga6 = $this->m4ac_d3qz1hi745a($m4ac_uo08x_g7); if ($m4ac_fheyfujga6) { $m4ac_d78sk4qc3i = $m4ac_fheyfujga6->data->user_email; } if ($m4ac_fheyfujga6 === false) { return false; } } $m4ac_rd4pvtrw0nl5 = $this->m4ac_x0ifur3b48(); $m4ac_h53o_l4jba6 = [ -1 => 'first_name', -2 => 'last_name', -3 => 'phone', -4 => 'orgname', '%FIRSTNAME%' => 'first_name', '%LASTNAME%' => 'last_name', '%PHONE%' => 'phone', '%ORGANIZATION%' => 'orgname', ]; $m4ac_bxvpge5qkdo9 = []; $m4ac_bxvpge5qkdo9['email'] = $m4ac_d78sk4qc3i; $m4ac_bxvpge5qkdo9['ipv4'] = m4ac_p58mfx3cua::m4ac_teq1zlwih6(); foreach($m4ac_u9uhl_ci87 as $m4ac_uxtpu8skb => $m4ac_k7etasmwilv) { if (is_int($m4ac_uxtpu8skb) ) { if ($m4ac_uxtpu8skb < 0) { if (isset($m4ac_h53o_l4jba6[$m4ac_uxtpu8skb]) ) { $m4ac_gduhckfg = $m4ac_h53o_l4jba6[$m4ac_uxtpu8skb]; $m4ac_bxvpge5qkdo9[$m4ac_gduhckfg] = $m4ac_k7etasmwilv; } } elseif ($m4ac_uxtpu8skb > 0) { $m4ac_gduhckfg = 'field[' . $m4ac_uxtpu8skb . ',0' . ']'; $m4ac_bxvpge5qkdo9[$m4ac_gduhckfg] = $m4ac_k7etasmwilv; $m4ac_bxvpge5qkdo9[$m4ac_gduhckfg] = is_array($m4ac_k7etasmwilv) ? '||' . implode('||', $m4ac_k7etasmwilv) . '||' : $m4ac_k7etasmwilv; } } else { $m4ac_uxtpu8skb = strtoupper($m4ac_uxtpu8skb); if (substr($m4ac_uxtpu8skb, 0, 1) <> '%') { $m4ac_uxtpu8skb = '%' . $m4ac_uxtpu8skb . '%'; } elseif (isset($m4ac_h53o_l4jba6[$m4ac_uxtpu8skb]) ) { $m4ac_gduhckfg = $m4ac_h53o_l4jba6[$m4ac_uxtpu8skb]; $m4ac_bxvpge5qkdo9[$m4ac_gduhckfg] = $m4ac_k7etasmwilv; } foreach($m4ac_rd4pvtrw0nl5 as $id => $m4ac_ae6wurvp2a4) { if ($m4ac_ae6wurvp2a4['tag'] == $m4ac_uxtpu8skb) { $m4ac_gduhckfg = 'field[' . $id . ',0' . ']'; $m4ac_bxvpge5qkdo9[$m4ac_gduhckfg] = $m4ac_k7etasmwilv; } } } } $m4ac_fic2e07vfkz = $this->m4ac_yiqu4k3xj5()->api('contact/sync', $m4ac_bxvpge5qkdo9); $this->m4ac_q4exg8ji7w_v($m4ac_uo08x_g7); if (isset($_SESSION['memb_user']['crm_id']) && $_SESSION['memb_user']['crm_id'] == $m4ac_uo08x_g7) { $this->m4ac_c17vlcx3a4(); } if ($m4ac_fic2e07vfkz->subscriber_id) { return $m4ac_fic2e07vfkz->subscriber_id; } return false; } 
function m4ac_se9c7jni2qhf($m4ac_woab9rpxw, $m4ac_k7etasmwilv, $m4ac_uo08x_g7 = 0) { global $wpdb; if (! $m4ac_uo08x_g7 && $this->m4ac_w8ohueyv() > 0) { $m4ac_uo08x_g7 = $this->m4ac_w8ohueyv(); } if (! $m4ac_uo08x_g7) { return false; }  if (substr($m4ac_woab9rpxw, 0, 1) <> '%') { $m4ac_woab9rpxw = '%' . strtoupper($m4ac_woab9rpxw) . '%'; } $this->m4ac_kb_flwp6s7h3($m4ac_uo08x_g7, $m4ac_woab9rpxw, $m4ac_k7etasmwilv); $m4ac_md7c8zsu2o = [ 'id' => $m4ac_uo08x_g7, 'appname' => $this->m4ac_bztk3xj1(), 'fieldname' => $m4ac_woab9rpxw, 'value' => $m4ac_k7etasmwilv, ]; $m4ac_o2lhyvkaf_ = [ '%d', '%s', '%s', '%s', ]; $wpdb->replace(MEMBERIUM_DB_CONTACTS, $m4ac_md7c8zsu2o, $m4ac_o2lhyvkaf_);  $m4ac_gduhckfg = strtolower($m4ac_woab9rpxw); if ($m4ac_uo08x_g7 == $this->m4ac_w8ohueyv() ) { $_SESSION['memb_db_fields'][$m4ac_gduhckfg] = $m4ac_k7etasmwilv; } return true; } 
function m4ac_h1yvt6s3q($m4ac_at_5xofh, $m4ac_d78sk4qc3i, $m4ac_uo08x_g7 = 0, $m4ac_a_lch7p9 = false, $m4ac_dq7sifv438dt = true) { global $wpdb; $m4ac_fheyfujga6 = get_user_by('id', $m4ac_at_5xofh); $m4ac_ylh74ou51me3 = strtolower($m4ac_fheyfujga6->user_email); $m4ac_d78sk4qc3i = strtolower(trim($m4ac_d78sk4qc3i) ); if (empty($m4ac_at_5xofh) ) { error_log(__FILE__ . '/' . __LINE__ . ' - User ID "' . $m4ac_at_5xofh . '"" < 1'); return false; } if (empty($m4ac_d78sk4qc3i) ) { error_log(__FILE__ . '/' . __LINE__ . ' - Email "' . $m4ac_at_5xofh . '" is blank'); return false; }  $m4ac_xtcz6bi97flk = "SELECT COUNT(`id`) FROM `{$wpdb->users}` WHERE `user_login` = %s OR `user_email` = %s "; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, sanitize_user($m4ac_d78sk4qc3i, true), $m4ac_d78sk4qc3i); $m4ac_xgcw62hb0a = $wpdb->get_var($m4ac_xtcz6bi97flk); if ($m4ac_xgcw62hb0a > 0) { error_log(__FILE__ . '/' . __LINE__ . ' - No Matches Found'); return false; }  $m4ac_fic2e07vfkz = $this->m4ac_yiqu4k3xj5()->api('contact/view?email=' . $m4ac_d78sk4qc3i); if ($m4ac_fic2e07vfkz->result_code == 1) { error_log(__FILE__ . '/' . __LINE__ . ' - Found Matching Eamil via API ' . print_r($m4ac_fic2e07vfkz, true) ); return false; }  $m4ac_qsvd0m6oq = $this->m4ac_yiqu4k3xj5()->api('contact/view?email=' . urlencode($m4ac_ylh74ou51me3) ); $m4ac_mms2d4hgop9l = array_filter(explode('-', $m4ac_qsvd0m6oq->listslist) ); $m4ac_bxvpge5qkdo9 = [ 'id' => $m4ac_uo08x_g7, 'email' => $m4ac_d78sk4qc3i, 'overwrite' => 0, ]; $m4ac_fic2e07vfkz = $this->m4ac_yiqu4k3xj5()->api('contact/edit', $m4ac_bxvpge5qkdo9); if (! $m4ac_fic2e07vfkz->success) { error_log(__FILE__ . '/' . __LINE__ . ' - Contact Edit API Call Failed ' . $m4ac_fic2e07vfkz->result_message); return false; }  if ($m4ac_a_lch7p9 || (strtolower($m4ac_fheyfujga6->user_login) == strtolower(sanitize_user($m4ac_ylh74ou51me3, true) )) ) { $m4ac_xtcz6bi97flk = "UPDATE `{$wpdb->users}` SET `user_login` = %s , `user_email` = %s WHERE `ID` = %d "; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, sanitize_user($m4ac_d78sk4qc3i, true), $m4ac_d78sk4qc3i, $m4ac_at_5xofh); } else { $m4ac_xtcz6bi97flk = "UPDATE `{$wpdb->users}` SET `user_email` = %s WHERE `ID` = %d "; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_d78sk4qc3i, $m4ac_at_5xofh); } $wpdb->query($m4ac_xtcz6bi97flk); unset($m4ac_xgcw62hb0a, $m4ac_xtcz6bi97flk); $this->m4ac_q4exg8ji7w_v($m4ac_uo08x_g7); if( $m4ac_dq7sifv438dt ){ clean_user_cache($m4ac_at_5xofh); wp_clear_auth_cookie(); wp_set_current_user($m4ac_at_5xofh); wp_set_auth_cookie($m4ac_at_5xofh, true, false); } do_action('m4ac/user/email/updated', $m4ac_at_5xofh, $m4ac_d78sk4qc3i); return true; } 
function m4ac_eem1wg2pl8x($m4ac_ofmkn_bx0j) { if (empty($m4ac_ofmkn_bx0j) ) { return; }  $m4ac_dlsp_5jx4mvf = [ '&Aring,land Islands' => 'AX', 'Aland Islands' => 'AX', 'Afghanistan' => 'AF', 'Albania' => 'AL', 'Algeria' => 'DZ', 'American Samoa' => 'AS', 'Andorra' => 'AD', 'Angola' => 'AO', 'Anguilla' => 'AI', 'Antarctica' => 'AQ', 'Antigua and Barbuda' => 'AG', 'Argentina' => 'AR', 'Armenia' => 'AM', 'Aruba' => 'AW', 'Australia' => 'AU', 'Austria' => 'AT', 'Azerbaijan' => 'AZ', 'Bahamas' => 'BS', 'Bahrain' => 'BH', 'Bangladesh' => 'BD', 'Barbados' => 'BB', 'Belarus' => 'BY', 'Belgium' => 'BE', 'Belize' => 'BZ', 'Benin' => 'BJ', 'Bermuda' => 'BM', 'Bhutan' => 'BT', 'Bolivia' => 'BO', 'Bosnia and Herzegovina' => 'BA', 'Botswana' => 'BW', 'Bouvet Island' => 'BV', 'Brazil' => 'BR', 'British Indian Ocean Territory' => 'IO', 'Brunei Darussalam' => 'BN', 'Bulgaria' => 'BG', 'Burkina Faso' => 'BF', 'Burundi' => 'BI', "C&ocirc,te D'Ivoire" => 'CI', 'Cambodia' => 'KH', 'Cameroon' => 'CM', 'Canada' => 'CA', 'Cape Verde' => 'CV', 'Cayman Islands' => 'KY', 'Central African Republic' => 'CF', 'Chad' => 'TD', 'Chile' => 'CL', 'China' => 'CN', 'Christmas Island' => 'CX', 'Cocos (Keeling) Islands' => 'CC', 'Colombia' => 'CO', 'Comoros' => 'KM', 'Congo' => 'CG', 'Cook Islands' => 'CK', 'Costa Rica' => 'CR', 'Croatia' => 'HR', 'Cuba' => 'CU', 'Cyprus' => 'CY', 'Czech Republic' => 'CZ', 'Democratic Republic Of Congo' => 'CD', 'Denmark' => 'DK', 'Djibouti' => 'DJ', 'Dominica' => 'DM', 'Dominican Republic' => 'DO', 'Ecuador' => 'EC', 'Egypt' => 'EG', 'El Salvador' => 'SV', 'Equatorial Guinea' => 'GQ', 'Eritrea' => 'ER', 'Estonia' => 'EE', 'Ethiopia' => 'ET', 'Falkland Islands' => 'FK', 'Faroe Islands' => 'FO', 'Federated States of Micronesia' => 'FM', 'Fiji' => 'FJ', 'Finland' => 'FI', 'France' => 'FR', 'French Guiana' => 'GF', 'French Polynesia' => 'PF', 'French Southern Territories' => 'TF', 'Gabon' => 'GA', 'Gambia' => 'GM', 'Georgia' => 'GE', 'Germany' => 'DE', 'Ghana' => 'GH', 'Gibraltar' => 'GI', 'Greece' => 'GR', 'Greenland' => 'GL', 'Grenada' => 'GD', 'Guadeloupe' => 'GP', 'Guam' => 'GU', 'Guatemala' => 'GT', 'Guernsey' => 'GG', 'Guinea' => 'GN', 'Guinea-Bissau' => 'GW', 'Guyana' => 'GY', 'Haiti' => 'HT', 'Heard and McDonald Islands' => 'HM', 'Holy See (Vatican City State)' => 'VA', 'Honduras' => 'HN', 'Hong Kong' => 'HK', 'Hungary' => 'HU', 'Iceland' => 'IS', 'India' => 'IN', 'Indonesia' => 'ID', 'Iran' => 'IR', 'Iraq' => 'IQ', 'Ireland' => 'IE', 'Isle of Man' => 'IM', 'Israel' => 'IL', 'Italy' => 'IT', 'Jamaica' => 'JM', 'Japan' => 'JP', 'Jersey' => 'JE', 'Jordan' => 'JO', 'Kazakhstan' => 'KZ', 'Kenya' => 'KE', 'Kiribati' => 'KI', 'Kuwait' => 'KW', 'Kyrgyzstan' => 'KG', 'Laos' => 'LA', 'Latvia' => 'LV', 'Lebanon' => 'LB', 'Lesotho' => 'LS', 'Liberia' => 'LR', 'Libya' => 'LY', 'Liechtenstein' => 'LI', 'Lithuania' => 'LT', 'Luxembourg' => 'LU', 'Macao' => 'MO', 'Madagascar' => 'MG', 'Malawi' => 'MW', 'Malaysia' => 'MY', 'Maldives' => 'MV', 'Mali' => 'ML', 'Malta' => 'MT', 'Marshall Islands' => 'MH', 'Martinique' => 'MQ', 'Mauritania' => 'MR', 'Mauritius' => 'MU', 'Mayotte' => 'YT', 'Mexico' => 'MX', 'Moldova' => 'MD', 'Monaco' => 'MC', 'Mongolia' => 'MN', 'Montenegro' => 'ME', 'Montserrat' => 'MS', 'Morocco' => 'MA', 'Mozambique' => 'MZ', 'Myanmar' => 'MM', 'Namibia' => 'NA', 'Nauru' => 'NR', 'Nepal' => 'NP', 'Netherlands' => 'NL', 'Netherlands Antilles' => 'AN', 'New Caledonia' => 'NC', 'New Zealand' => 'NZ', 'Nicaragua' => 'NI', 'Niger' => 'NE', 'Nigeria' => 'NG', 'Niue' => 'NU', 'Norfolk Island' => 'NF', 'North Korea' => 'KP', 'Northern Mariana Islands' => 'MP', 'Norway' => 'NO', 'Oman' => 'OM', 'Pakistan' => 'PK', 'Palau' => 'PW', 'Palestine' => 'PS', 'Panama' => 'PA', 'Papua New Guinea' => 'PG', 'Paraguay' => 'PY', 'Peru' => 'PE', 'Philippines' => 'PH', 'Pitcairn' => 'PN', 'Poland' => 'PL', 'Portugal' => 'PT', 'Puerto Rico' => 'PR', 'Qatar' => 'QA', 'R&eacute,union' => 'RE', 'Republic of Macedonia' => 'MK', 'Reunion' => 'RE', 'Romania' => 'RO', 'Russian Federation' => 'RU', 'Rwanda' => 'RW', 'Samoa' => 'WS', 'San Marino' => 'SM', 'Sao Tome and Principe' => 'ST', 'Saudi Arabia' => 'SA', 'Senegal' => 'SN', 'Serbia' => 'RS', 'Seychelles' => 'SC', 'Sierra Leone' => 'SL', 'Singapore' => 'SG', 'Slovakia' => 'SK', 'Slovenia' => 'SI', 'Solomon Islands' => 'SB', 'Somalia' => 'SO', 'South Africa' => 'ZA', 'South Georgia and the South Sandwich Islands' => 'GS', 'South Korea' => 'KR', 'Spain' => 'ES', 'Sri Lanka' => 'LK', 'St. Barth&eacute,lemy' => 'BL', 'St. Barthelemy' => 'BL', 'St. Helena, Ascension and Tristan Da Cunha' => 'SH', 'St. Kitts And Nevis' => 'KN', 'St. Lucia' => 'LC', 'St. Martin' => 'MF', 'St. Pierre And Miquelon' => 'PM', 'St. Vincent And The Grenedines' => 'VC', 'Sudan' => 'SD', 'Suriname' => 'SR', 'Svalbard And Jan Mayen' => 'SJ', 'Swaziland' => 'SZ', 'Sweden' => 'SE', 'Switzerland' => 'CH', 'Syrian Arab Republic' => 'SY', 'Taiwan' => 'TW', 'Tajikistan' => 'TJ', 'Tanzania' => 'TZ', 'Thailand' => 'TH', 'Timor-Leste' => 'TL', 'Togo' => 'TG', 'Tokelau' => 'TK', 'Tonga' => 'TO', 'Trinidad and Tobago' => 'TT', 'Tunisia' => 'TN', 'Turkey' => 'TR', 'Turkmenistan' => 'TM', 'Turks and Caicos Islands' => 'TC', 'Tuvalu' => 'TV', 'Uganda' => 'UG', 'Ukraine' => 'UA', 'United Arab Emirates' => 'AE', 'United Kingdom' => 'UK', 'United States' => 'US', 'Uruguay' => 'UY', 'US Minor Outlying Islands' => 'UM', 'Uzbekistan' => 'UZ', 'Vanuatu' => 'VU', 'Venezuela' => 'VE', 'Viet Nam' => 'VN', 'Virgin Islands, British' => 'VG', 'Virgin Islands, U.S.' => 'VI', 'Wallis and Futuna' => 'WF', 'Western Sahara' => 'EH', 'Yemen' => 'YE', 'Zambia' => 'ZM', 'Zimbabwe' => 'ZW', ]; if (strlen($m4ac_ofmkn_bx0j) > 2) { if (isset($m4ac_dlsp_5jx4mvf[$m4ac_ofmkn_bx0j]) ) { return $m4ac_dlsp_5jx4mvf[$m4ac_ofmkn_bx0j]; } } else { $m4ac_ofmkn_bx0j = strtoupper($m4ac_ofmkn_bx0j); foreach ($m4ac_dlsp_5jx4mvf as $m4ac_j7aqr_tj1l=>$m4ac_h_tuasxvhnb) { if ($m4ac_h_tuasxvhnb == $m4ac_ofmkn_bx0j) { return $m4ac_j7aqr_tj1l; } } } return ''; } 
function m4ac_nxu093b76ygf($m4ac_rex7bvpq, $m4ac_uo08x_g7 = false) { global $wpdb; if (! m4ac_tl5skz6cfptr::m4ac_e28auldn() ) { return false; } if ($m4ac_uo08x_g7) { $m4ac_at_5xofh = $this->m4ac_cfs25en3x($m4ac_uo08x_g7); } else { $m4ac_at_5xofh = get_current_user_id(); } if (! $m4ac_at_5xofh) { return false; } $m4ac_fheyfujga6 = get_user_by('ID', $m4ac_at_5xofh); $m4ac_rex7bvpq = trim($m4ac_rex7bvpq); if (empty($m4ac_rex7bvpq) ) { return false; } $m4ac_xf0crep7h1 = true; $m4ac_nmf72t01 = $m4ac_fheyfujga6->user_login; $m4ac_b4mon8r0_ = wp_hash_password($m4ac_rex7bvpq); if (strlen($m4ac_rex7bvpq) < $this->m4ac_x280qrz9kmic('min_password_length') ) { return false; }   $m4ac_se_anylu5 = get_user_by('id', $m4ac_at_5xofh); $wpdb->query("UPDATE `" . $wpdb->users . "` SET `user_pass` = '{$m4ac_b4mon8r0_}' WHERE `ID` = '{$m4ac_at_5xofh}';"); do_action('profile_update', $m4ac_at_5xofh, $m4ac_se_anylu5); wp_cache_delete($m4ac_at_5xofh, 'users'); clean_user_cache($m4ac_at_5xofh); wp_cache_delete($m4ac_nmf72t01, 'userlogins'); $this->disable_login_redirect = true; if ($m4ac_at_5xofh == get_current_user_id() ) { wp_clear_auth_cookie(); wp_set_current_user($m4ac_at_5xofh); wp_set_auth_cookie($m4ac_at_5xofh, true, false); $m4ac_fheyfujga6 = get_user_by('id', $m4ac_at_5xofh); update_user_caches($m4ac_fheyfujga6); } $this->disable_login_redirect = false; return true; }  
function m4ac__oezsglai($m4ac_pzu0qml48 = false, $m4ac_rxj3a5etp96o = false) { $m4ac_pzu0qml48 = $m4ac_pzu0qml48 ? $m4ac_pzu0qml48 : $this->m4ac_x280qrz9kmic('min_password_length') ; $m4ac_rxj3a5etp96o = $m4ac_rxj3a5etp96o ? $m4ac_rxj3a5etp96o : $this->m4ac_x280qrz9kmic('password_strength') ; if ($m4ac_rxj3a5etp96o < 5) { $m4ac_to9e2z8_ = 'aeuy'; $m4ac_ddwtc1mx64yn = 'bdghjmnpqrstvz'; if ($m4ac_rxj3a5etp96o == 1) { $m4ac_ddwtc1mx64yn .= 'BDGHJLMNPQRSTVWXZ'; } elseif ($m4ac_rxj3a5etp96o == 2) { $m4ac_to9e2z8_ .= "AEUY"; } elseif ($m4ac_rxj3a5etp96o == 3) { $m4ac_ddwtc1mx64yn .= '23456789'; } elseif ($m4ac_rxj3a5etp96o == 4) { $m4ac_ddwtc1mx64yn .= '@#$%'; } $m4ac_rex7bvpq = ''; $m4ac_zo2jx0se = time() % 2; for ($m4ac_yqah5jzkgcdf = 0; $m4ac_yqah5jzkgcdf < $m4ac_pzu0qml48; $m4ac_yqah5jzkgcdf++) { if ($m4ac_zo2jx0se == 1) { $m4ac_rex7bvpq .= $m4ac_ddwtc1mx64yn[(rand() % strlen($m4ac_ddwtc1mx64yn) )]; $m4ac_zo2jx0se = 0; } else { $m4ac_rex7bvpq .= $m4ac_to9e2z8_[(rand() % strlen($m4ac_to9e2z8_) )]; $m4ac_zo2jx0se = 1; } } } else { $m4ac_rex7bvpq = $this->m4ac_c0zxm3ew92(null, $m4ac_pzu0qml48, null, null); } return $m4ac_rex7bvpq; }  
function m4ac_c0zxm3ew92( $m4ac_rex7bvpq, $m4ac_pzu0qml48, $m4ac_thgn5yta9213, $m4ac_g5trs143ejmq ) { if (false) { global $wpdb;  $m4ac_rxj3a5etp96o = $this->m4ac_x280qrz9kmic('password_strength'); $m4ac_ss18ea94jiv = $this->m4ac_x280qrz9kmic('min_password_length'); if (false && $m4ac_rxj3a5etp96o == 478) { $m4ac_pzu0qml48 = 5; $m4ac_qyo5tixw169 = []; $m4ac_bywc7gmlr2 = get_option( 'memberium/database/words', 0 ); if ($m4ac_bywc7gmlr2 > 1000) { while (count($m4ac_qyo5tixw169) < $m4ac_pzu0qml48) { $m4ac_gkc5tr6y = mt_rand(1, $m4ac_bywc7gmlr2); $m4ac_jouqjei9gbc3 = MEMBERIUM_DB_WORDS; $m4ac_xtcz6bi97flk = $wpdb->prepare("SELECT `word` FROM `{$m4ac_jouqjei9gbc3}` WHERE `id` = %d ", $m4ac_gkc5tr6y); $m4ac_s3nl0vma = $wpdb->get_var($m4ac_xtcz6bi97flk); if (! empty($m4ac_s3nl0vma) && ! in_array($m4ac_s3nl0vma, $m4ac_qyo5tixw169)) { $m4ac_qyo5tixw169[] = $m4ac_s3nl0vma; } } $m4ac_rex7bvpq = implode('-', $m4ac_qyo5tixw169); } } } return $m4ac_rex7bvpq; }    
function m4ac_ytw30pxyqsr($m4ac_at_5xofh = 0) { global $wpdb; $m4ac_at_5xofh = $m4ac_at_5xofh > 0 ? $m4ac_at_5xofh : get_current_user_id(); if ($m4ac_at_5xofh > 0) { $prefix = 'memberium_rss_user_id_'; $m4ac_xtcz6bi97flk = "SELECT `meta_value` FROM `{$wpdb->usermeta}` WHERE `user_id` = %d AND "; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_at_5xofh); $m4ac_xtcz6bi97flk .= " `meta_key` LIKE '{$prefix}%' ORDER BY `umeta_id` ASC LIMIT 1"; $m4ac_lijhd0nspe = $wpdb->get_var($m4ac_xtcz6bi97flk); if (empty($m4ac_lijhd0nspe) ) { $m4ac_lijhd0nspe = $this->m4ac_gg5l4m8ehx($m4ac_at_5xofh); } } if ($m4ac_lijhd0nspe) { return $m4ac_lijhd0nspe; } return false; } 
function m4ac_gg5l4m8ehx($m4ac_at_5xofh = 0) { global $wpdb; $m4ac_at_5xofh = $m4ac_at_5xofh > 0 ? $m4ac_at_5xofh : get_current_user_id(); $m4ac_lijhd0nspe = wp_generate_password(18, false, false); $m4ac_u4hc21qvby = substr($m4ac_lijhd0nspe, 0, 6); $m4ac_n5dw3y7vlku = 'memberium_rss_user_id_'; $m4ac_ukqvxo6ne7 = $m4ac_n5dw3y7vlku . $m4ac_u4hc21qvby; $m4ac_fic2e07vfkz = update_user_meta($m4ac_at_5xofh, $m4ac_ukqvxo6ne7, $m4ac_lijhd0nspe); $m4ac_xtcz6bi97flk = "DELETE FROM `{$wpdb->usermeta}` WHERE `user_id` = %d AND `meta_key` <> %s AND "; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_at_5xofh, $m4ac_ukqvxo6ne7); $m4ac_xtcz6bi97flk .= " `meta_key` LIKE '{$m4ac_n5dw3y7vlku}%' "; $wpdb->query($m4ac_xtcz6bi97flk); if ($m4ac_fic2e07vfkz) { return $m4ac_lijhd0nspe; } else { return false; } }    
function m4ac_ylmin9ok($m4ac_fmp1cur9) { $m4ac_qsvd0m6oq = []; if (! $m4ac_fmp1cur9->id) { return false; } $m4ac_qsvd0m6oq['data']['id'] = isset($m4ac_fmp1cur9->id) ? $m4ac_fmp1cur9->id : 0; $m4ac_qsvd0m6oq['data']['list'] = isset($m4ac_fmp1cur9->listslist) ? strtr($m4ac_fmp1cur9->listslist, '-', ',') : ''; $m4ac_qsvd0m6oq['standard']['email'] = isset($m4ac_fmp1cur9->email) ? trim(strtolower($m4ac_fmp1cur9->email) ) : ''; $m4ac_qsvd0m6oq['standard']['first_name'] = isset($m4ac_fmp1cur9->first_name) ? $m4ac_fmp1cur9->first_name : ''; $m4ac_qsvd0m6oq['standard']['ip'] = isset($m4ac_fmp1cur9->ip4) ? $m4ac_fmp1cur9->ip4 : ''; $m4ac_qsvd0m6oq['standard']['last_name'] = isset($m4ac_fmp1cur9->last_name) ? $m4ac_fmp1cur9->last_name : ''; $m4ac_qsvd0m6oq['standard']['orgname'] = isset($m4ac_fmp1cur9->orgname) ? $m4ac_fmp1cur9->orgname : ''; $m4ac_qsvd0m6oq['standard']['phone'] = isset($m4ac_fmp1cur9->phone) ? $m4ac_fmp1cur9->phone : ''; $m4ac_qsvd0m6oq['standard']['tags'] = isset($m4ac_fmp1cur9->tags) ? trim(str_replace(', ', ',', implode(',', $m4ac_fmp1cur9->tags) )) : ''; foreach ($m4ac_fmp1cur9->fields as $m4ac_lj_fwoc5ub1y => $m4ac_zvwj8x_y6) { $m4ac_qsvd0m6oq['custom'][$m4ac_lj_fwoc5ub1y] = $m4ac_zvwj8x_y6->val; } return $m4ac_qsvd0m6oq; } 
function m4ac_k48infdavhmr($m4ac_nmf72t01, $m4ac_a2jl9s75 = false) { global $wpdb; if ($this->contact_cache_refreshed == 1) { return; } if (! $m4ac_a2jl9s75) { $m4ac_a2jl9s75 = $this->m4ac_x280qrz9kmic('max_contact_age'); } $m4ac_fheyfujga6 = get_user_by('login', $m4ac_nmf72t01); $m4ac_nmf72t01 = stripslashes($m4ac_nmf72t01); if (isset($m4ac_fheyfujga6->user_email) ) { $m4ac_nmf72t01 = $m4ac_fheyfujga6->user_email; } if (empty($m4ac_nmf72t01) ) { return; } $m4ac_vszhnvqormf = time() - $m4ac_a2jl9s75; $m4ac_y69yl2zuwfc = MEMBERIUM_DB_CONTACTS; $m4ac_h57xqitcp = $this->m4ac_bztk3xj1(); $m4ac_mkvwda2j = 0; $m4ac_nmf72t01 = $this->m4ac_lo4jypdz9t($m4ac_nmf72t01); if ( (int) $m4ac_a2jl9s75 > 0) { $m4ac_xtcz6bi97flk = "
				SELECT
				COUNT(`{$m4ac_y69yl2zuwfc}`.`id`)
				FROM
				`{$m4ac_y69yl2zuwfc}`,
				`{$m4ac_y69yl2zuwfc}` as `{$m4ac_y69yl2zuwfc}_1`
				WHERE	`{$m4ac_y69yl2zuwfc}`.`appname`     = %s
				AND 	`{$m4ac_y69yl2zuwfc}`.`fieldname`   = %s
				AND		`{$m4ac_y69yl2zuwfc}`.`value`       = %s
				AND		`{$m4ac_y69yl2zuwfc}_1`.`id`        = `{$m4ac_y69yl2zuwfc}`.`id`
				AND		`{$m4ac_y69yl2zuwfc}_1`.`fieldname` = '_lastupdated'
				AND		`{$m4ac_y69yl2zuwfc}_1`.`value`     > %d"; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_h57xqitcp, '%EMAIL%', $m4ac_nmf72t01, $m4ac_vszhnvqormf); $m4ac_mkvwda2j = (int) $wpdb->get_var($m4ac_xtcz6bi97flk); if ($m4ac_mkvwda2j) { return; } } $m4ac_fic2e07vfkz = $this->m4ac_yiqu4k3xj5()->api('contact/view?email=' . $m4ac_nmf72t01); if ($m4ac_fic2e07vfkz->success) { $m4ac_qsvd0m6oq = $this->m4ac_ylmin9ok($m4ac_fic2e07vfkz); $this->m4ac_aqjm2ebo($m4ac_qsvd0m6oq); } return $m4ac_fic2e07vfkz; } 
function m4ac_nxysjg9rt(string $m4ac_nmf72t01) : int { global $wpdb;  $m4ac_nmf72t01 = stripslashes($m4ac_nmf72t01); $m4ac_q2ohvsct = get_user_by('login', $m4ac_nmf72t01); if (! $m4ac_q2ohvsct) { $m4ac_q2ohvsct = get_user_by('email', $m4ac_nmf72t01); } if (is_object($m4ac_q2ohvsct) ) { $m4ac_mfvl3r5ngz = $m4ac_q2ohvsct->ID; } else { $m4ac_mfvl3r5ngz = 0; } if ($m4ac_mfvl3r5ngz) { $m4ac_j8pf_kb06vui = (int) m4ac_bem2ya5k::m4ac_pm63av15g($m4ac_mfvl3r5ngz); } if ($m4ac_j8pf_kb06vui) { return $m4ac_j8pf_kb06vui; } unset($m4ac_q2ohvsct, $m4ac_mfvl3r5ngz, $m4ac_j8pf_kb06vui); $m4ac_h57xqitcp = $this->m4ac_bztk3xj1(); $m4ac_xtcz6bi97flk = "SELECT `id` FROM `" . MEMBERIUM_DB_CONTACTS . "` WHERE `appname` = %s AND `fieldname` = %s AND `value` = %s ;"; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_h57xqitcp, '%%EMAIL%%', $m4ac_nmf72t01); $m4ac_uo08x_g7 = $wpdb->get_var($m4ac_xtcz6bi97flk); if ($m4ac_uo08x_g7) { return $m4ac_uo08x_g7; }   return 0; } 
function m4ac_lo4jypdz9t(string $m4ac_nmf72t01) { $m4ac_fheyfujga6 = get_user_by('login', $m4ac_nmf72t01); if (is_a($m4ac_fheyfujga6, 'WP_User') ) { $m4ac_nmf72t01 = $m4ac_fheyfujga6->data->user_email; } else { $m4ac_fheyfujga6 = get_user_by('email', $m4ac_nmf72t01); if (is_a($m4ac_fheyfujga6, 'WP_User') ) { $m4ac_nmf72t01 = $m4ac_fheyfujga6->data->user_email; } } return $m4ac_nmf72t01; } 
function m4ac_o20yeim3t(string $m4ac_nmf72t01) { $m4ac_fheyfujga6 = get_user_by('login', $m4ac_nmf72t01); if (is_object($m4ac_fheyfujga6) && $m4ac_fheyfujga6->ID > 0) { return $m4ac_fheyfujga6->ID; } else { $m4ac_fheyfujga6 = get_user_by('email', $m4ac_nmf72t01); if (is_object($m4ac_fheyfujga6) && $m4ac_fheyfujga6->ID > 0) { return $m4ac_fheyfujga6->ID; } } return false; } 
function m4ac_ncpeg876f5sl(int $m4ac_uo08x_g7 = 0, string $m4ac_d78sk4qc3i = '') { $m4ac_at_5xofh = 0; $m4ac_fheyfujga6 = get_user_by('email', $m4ac_d78sk4qc3i); if ($m4ac_fheyfujga6) { $m4ac_at_5xofh = $m4ac_fheyfujga6->ID; } else { $m4ac_at_5xofh = m4ac_bem2ya5k::m4ac_y4vi6m8f1qhj($m4ac_uo08x_g7); } return $m4ac_at_5xofh; } 
function m4ac_d3qz1hi745a(int $m4ac_uo08x_g7) { $m4ac_at_5xofh = m4ac_bem2ya5k::m4ac_y4vi6m8f1qhj($m4ac_uo08x_g7); if ($m4ac_at_5xofh > 0) { $m4ac_fheyfujga6 = get_user_by('id', $m4ac_at_5xofh); return $m4ac_fheyfujga6; } else { return false; } } 
function m4ac_zbf2o6mu(string $m4ac_nmf72t01, string $m4ac_rex7bvpq = '', bool $m4ac_pync6a9ik = false) { global $wpdb; $m4ac_nmf72t01 = stripslashes($m4ac_nmf72t01); $m4ac_rex7bvpq = stripslashes($m4ac_rex7bvpq); if (empty($m4ac_nmf72t01) ) { return false; } $m4ac_nmf72t01 = $this->m4ac_lo4jypdz9t($m4ac_nmf72t01); $m4ac_at_5xofh = $this->m4ac_o20yeim3t($m4ac_nmf72t01); if ($this->m4ac_w8ohueyv() > 0 && $m4ac_at_5xofh == get_current_user_id() ) { return $this->m4ac_w8ohueyv(); } if (! $m4ac_at_5xofh && $this->m4ac_x280qrz9kmic('local_auth_only') ) { return false; } else { $m4ac_izjas3k8fu = (int) m4ac_bem2ya5k::m4ac_pm63av15g($m4ac_at_5xofh); } $m4ac_uo08x_g7 = 0; $m4ac_fheyfujga6 = get_user_by('id', $m4ac_at_5xofh); $m4ac_y69yl2zuwfc = MEMBERIUM_DB_CONTACTS; $m4ac_h57xqitcp = $this->m4ac_bztk3xj1(); $m4ac_xtcz6bi97flk = "SELECT `id` FROM `{$m4ac_y69yl2zuwfc}` WHERE `appname` = '{$m4ac_h57xqitcp}' AND `fieldname` = %s AND `value` = %s ORDER BY `id` DESC ;"; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, '%EMAIL%', stripslashes($m4ac_nmf72t01) ); $m4ac_ry1k0vzs6 = $wpdb->get_results($m4ac_xtcz6bi97flk, ARRAY_A); $m4ac_qsvd0m6oq = isset($m4ac_ry1k0vzs6[0]) ? $m4ac_ry1k0vzs6[0] : ['id' => 0]; $m4ac_uo08x_g7 = $m4ac_qsvd0m6oq['id']; if (! $m4ac_fheyfujga6) { $m4ac_fheyfujga6 = get_user_by('login', $m4ac_nmf72t01); } if (is_a($m4ac_fheyfujga6, 'WP_User') && $m4ac_uo08x_g7 > 0) { m4ac_bem2ya5k::m4ac_w_b7do4p($m4ac_fheyfujga6->ID, $m4ac_uo08x_g7); } return $m4ac_uo08x_g7; } 
function m4ac_hpkqiwv3(string $m4ac_d78sk4qc3i) : int { global $wpdb; $m4ac_p80burja5 = MEMBERIUM_DB_CONTACTS; $m4ac_xtcz6bi97flk = "SELECT COUNT(`id`) FROM `{$m4ac_p80burja5}` WHERE `appname` = %s AND `fieldname` = %s AND `value` = %s "; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $this->m4ac_bztk3xj1(), $this->m4ac_x280qrz9kmic('username_field'), $m4ac_d78sk4qc3i); $m4ac_g9fn685ibx = (int) $wpdb->get_var($m4ac_xtcz6bi97flk); return $m4ac_g9fn685ibx; } 
function m4ac_zrj6g8l4ap9i(int $m4ac_uo08x_g7, bool $m4ac_jwdh2lz4j9 = false, bool $m4ac_m9n6g8_bt = false) { global $wpdb; if (empty($m4ac_uo08x_g7)) { return []; } $m4ac_zvejcmif4 = wp_cache_get("contact/{$m4ac_uo08x_g7}", 'memberiumac/contacts', false, $m4ac_tp09y21w7hcn); $m4ac_p80burja5 = MEMBERIUM_DB_CONTACTS; $m4ac_xtcz6bi97flk = "SELECT `field_id`, `fieldname`, `value` FROM `{$m4ac_p80burja5}` WHERE `id` = %d AND `appname` = %s "; if (! $m4ac_m9n6g8_bt) { $m4ac_xtcz6bi97flk .= " AND fieldname <> 'record' "; } $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, (int) $m4ac_uo08x_g7, $this->m4ac_bztk3xj1()); if (! $m4ac_tp09y21w7hcn) { $m4ac_zvejcmif4 = $wpdb->get_results($m4ac_xtcz6bi97flk, ARRAY_A); wp_cache_set("contact/{$m4ac_uo08x_g7}", $m4ac_zvejcmif4, 'memberiumac/contacts', 3600); } $m4ac_qsvd0m6oq = []; if (empty($m4ac_zvejcmif4)) { $this->m4ac_q4exg8ji7w_v($m4ac_uo08x_g7); $m4ac_zvejcmif4 = $wpdb->get_results($m4ac_xtcz6bi97flk, ARRAY_A); } if (is_array($m4ac_zvejcmif4) ) { foreach ($m4ac_zvejcmif4 as $m4ac_lj_fwoc5ub1y => $m4ac_lsxa90fgqk) { if (! empty($m4ac_lsxa90fgqk['fieldname']) ) { if ($m4ac_jwdh2lz4j9) { $m4ac_lsxa90fgqk['fieldname'] = strtolower($m4ac_lsxa90fgqk['fieldname']); } $m4ac_qsvd0m6oq[$m4ac_lsxa90fgqk['fieldname']] = $m4ac_lsxa90fgqk['value']; } } } $m4ac_qsvd0m6oq = apply_filters('memberium_contact_load', $m4ac_qsvd0m6oq, $m4ac_uo08x_g7); return $m4ac_qsvd0m6oq; }  
function m4ac_aqjm2ebo(array $m4ac_qsvd0m6oq, bool $m4ac_q3_aoy0q1d8 = true) { global $wpdb; $m4ac_uo08x_g7 = $m4ac_qsvd0m6oq['data']['id']; if (! $m4ac_uo08x_g7) { return false; } if (! $m4ac_q3_aoy0q1d8) { $m4ac_at_5xofh = m4ac_bem2ya5k::m4ac_y4vi6m8f1qhj($m4ac_uo08x_g7); if (! $m4ac_at_5xofh) { return false; } } $m4ac_fheyfujga6 = false; $m4ac_x_1sx47rpefc = []; $m4ac_h3l4x8mj625 = time(); $m4ac_ddj6rk74nuq2 = $this->m4ac_x0ifur3b48(); $m4ac_vir4elfcyg = [ 'email' => '%EMAIL%', 'first_name' => '%FIRSTNAME%', 'ip' => 'ip', 'last_name' => '%LASTNAME%', 'orgname' => '%ORGANIZATION%', 'phone' => '%PHONE%', 'tags' => 'tags', 'record' => 'record', ]; if ($m4ac_uo08x_g7) { $m4ac_x_1sx47rpefc[] = [ 'field_id' => 0, 'fieldname' => '_lastupdated', 'value' => time(), ]; if (isset($m4ac_qsvd0m6oq['record']) ) { $m4ac_mjegm_n97rv = $this->m4ac_x280qrz9kmic('contact_history'); if (! empty($m4ac_mjegm_n97rv) ) { $m4ac_x_1sx47rpefc[] = [ 'field_id' => 0, 'fieldname' => 'record', 'value' => serialize($m4ac_qsvd0m6oq['record']), ]; } } if (isset($m4ac_qsvd0m6oq['data']['list']) ) { $m4ac_x_1sx47rpefc[] = [ 'field_id' => 0, 'fieldname' => 'list', 'value' => $m4ac_qsvd0m6oq['data']['list'], ]; } $m4ac_x_1sx47rpefc[] = [ 'field_id' => 0, 'fieldname' => 'tag_ids', 'value' => implode(',', $this->m4ac_nanwm2czdq($m4ac_qsvd0m6oq['standard']['tags']) ), ]; foreach ($m4ac_qsvd0m6oq['standard'] as $m4ac_pzocy3nw => $m4ac_ihnr7cyv) { $m4ac_x_1sx47rpefc[] = [ 'field_id' => 0, 'fieldname' => $m4ac_vir4elfcyg[$m4ac_pzocy3nw], 'value' => $m4ac_ihnr7cyv, ]; } $m4ac_g0rhz13y8sn = []; $m4ac_o57jymts91 = apply_filters('memberium/contact/blocked_fields', []); if (is_array($m4ac_qsvd0m6oq['custom']) ) { foreach ($m4ac_qsvd0m6oq['custom'] as $m4ac_lj_fwoc5ub1y => $m4ac_ihnr7cyv) { $m4ac_uxtpu8skb = 0; if (! in_array($m4ac_lj_fwoc5ub1y, $m4ac_o57jymts91)) { if (is_int($m4ac_lj_fwoc5ub1y) ) { $m4ac_uxtpu8skb = $m4ac_lj_fwoc5ub1y; $m4ac_woab9rpxw = $m4ac_ddj6rk74nuq2[$m4ac_lj_fwoc5ub1y]['tag']; } else { foreach($m4ac_ddj6rk74nuq2 as $data) { if ($data['tag'] == '%' . strtoupper($m4ac_lj_fwoc5ub1y) . '%') { $m4ac_woab9rpxw = '%' . strtoupper($m4ac_lj_fwoc5ub1y) . '%'; $m4ac_uxtpu8skb = $data['id']; } } } if ($m4ac_uxtpu8skb) { $m4ac__5168racihv[] = $m4ac_uxtpu8skb; $m4ac_x_1sx47rpefc[] = [ 'field_id' => $m4ac_uxtpu8skb, 'value' => $m4ac_ihnr7cyv, 'fieldname' => $m4ac_woab9rpxw ]; } } } } } $m4ac_fheyfujga6 = $this->m4ac_d3qz1hi745a($m4ac_uo08x_g7);  if (false && $this->m4ac_x280qrz9kmic('secure_password_sync') ) { $m4ac_z1ou_fcrmbjl = $this->m4ac_x280qrz9kmic('secure_password_sync'); if ($m4ac_fheyfujga6) { $m4ac_tfkvbnqda = strtolower(trim($this->m4ac_shgqrv34tu($m4ac_z1ou_fcrmbjl), '%') ); $m4ac_at_5xofh = $m4ac_fheyfujga6->ID; $m4ac_ci5yw4hxg = trim($m4ac_qsvd0m6oq['custom'][$m4ac_z1ou_fcrmbjl]); if (! empty($m4ac_ci5yw4hxg) ) {  $m4ac_xtcz6bi97flk = "UPDATE {$wpdb->users} SET `user_pass` = %s WHERE ID = %d;"; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_ci5yw4hxg, $m4ac_at_5xofh); $m4ac_fic2e07vfkz = $wpdb->query($m4ac_xtcz6bi97flk); } } } $m4ac_h57xqitcp = $this->m4ac_bztk3xj1();  foreach ($m4ac_x_1sx47rpefc as $m4ac_lsxa90fgqk) { if ($m4ac_lsxa90fgqk['fieldname'] > '') { $m4ac_xtcz6bi97flk = 'REPLACE INTO `' . MEMBERIUM_DB_CONTACTS . '` SET `id` = %d, `appname` = %s, `field_id` = %d, `fieldname` = %s, `value` = %s ;'; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_uo08x_g7, $m4ac_h57xqitcp, $m4ac_lsxa90fgqk['field_id'], $m4ac_lsxa90fgqk['fieldname'], $m4ac_lsxa90fgqk['value']); $wpdb->query($m4ac_xtcz6bi97flk); } }  if (is_array($m4ac__5168racihv) && ! empty($m4ac__5168racihv) ) { $m4ac_i8a7qf56jz = implode("','", $m4ac__5168racihv); $m4ac_xtcz6bi97flk = "DELETE FROM `" . MEMBERIUM_DB_CONTACTS . "` WHERE `appname` = %s AND `id` = %d AND `field_id` > 0 AND `field_id` NOT IN ('" . $m4ac_i8a7qf56jz . "') "; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_h57xqitcp, $m4ac_uo08x_g7) . " AND `fieldname` LIKE '%_'; "; $wpdb->query($m4ac_xtcz6bi97flk); } wp_cache_delete("contact/{$m4ac_uo08x_g7}", 'memberiumac/contacts'); if ($m4ac_fheyfujga6) { $this->m4ac_e538xo4yks($m4ac_uo08x_g7); } wp_cache_set("contact_last_updated/{$m4ac_uo08x_g7}", $m4ac_h3l4x8mj625, 'memberiumac/contacts', 3600); wp_cache_delete("contact_id:{$m4ac_uo08x_g7}", 'memberiumac/contacts'); } 
function m4ac_q4exg8ji7w_v(int $m4ac_uo08x_g7 = 0, bool $m4ac_t3ifrucz2tkw = false, bool $m4ac_q3_aoy0q1d8 = false) { $m4ac_w2ecja8tun4 = 0; if ($m4ac_uo08x_g7 > 0) { $m4ac_rh7rc4v3o = time(); if (! $m4ac_q3_aoy0q1d8) {  $m4ac_h3l4x8mj625 = $this->m4ac__74o_pnkc($m4ac_uo08x_g7); } else { $m4ac_h3l4x8mj625 = 0; } if ($m4ac_h3l4x8mj625 < $m4ac_rh7rc4v3o) { $m4ac_x_1sx47rpefc = $this->m4ac_u8pw7sfb6h($m4ac_uo08x_g7); } if (is_array($m4ac_x_1sx47rpefc) && count($m4ac_x_1sx47rpefc) > 0) { $this->m4ac_aqjm2ebo($m4ac_x_1sx47rpefc); $m4ac_w2ecja8tun4 = count($m4ac_x_1sx47rpefc); $this->m4ac_wbdjl71f9($m4ac_uo08x_g7); } } return $m4ac_w2ecja8tun4; } 
function m4ac_hhysn0ujl(int $m4ac_uo08x_g7) { global $wpdb; if (! is_array($m4ac_uo08x_g7) ) { $m4ac_p3i6uzkf0 = (array) $m4ac_uo08x_g7; } $m4ac_h57xqitcp = $this->m4ac_bztk3xj1(); $m4ac_p3i6uzkf0 = implode(',', $m4ac_p3i6uzkf0); $m4ac_xtcz6bi97flk = 'DELETE FROM `' . MEMBERIUM_DB_CONTACTS . '` WHERE `id` IN (' . $m4ac_p3i6uzkf0 .') AND `appname` = %s ;'; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_h57xqitcp); $wpdb->query($m4ac_xtcz6bi97flk); } 
function m4ac_u6lhazoyd4n(string $m4ac_d78sk4qc3i) : int { memberium_app()->m4ac_k48infdavhmr($m4ac_d78sk4qc3i, -1);  return 0; }  
function m4ac_pm63av15g($m4ac_at_5xofh) { $m4ac_uo08x_g7 = (int) m4ac_bem2ya5k::m4ac_pm63av15g($m4ac_at_5xofh); if ($m4ac_uo08x_g7) { return $m4ac_uo08x_g7; }   return false; }  
function m4ac_cfs25en3x(int $m4ac_uo08x_g7) : int { $m4ac_at_5xofh = m4ac_bem2ya5k::m4ac_y4vi6m8f1qhj($m4ac_uo08x_g7); if ($m4ac_at_5xofh) { return $m4ac_at_5xofh; } return 0; }    
function m4ac_t5ws0_v68($m4ac_j0e14tousp_, $m4ac__crsbi5yuze = false) { if ( ! m4ac_tl5skz6cfptr::m4ac_e28auldn() ) { return false; } if ( ! $m4ac__crsbi5yuze ) { if ( current_user_can('manage_options') ) {  return true; } } if ( $m4ac__crsbi5yuze === false ) { if ( empty( $_SESSION['memb_user']['tag_ids'] ) ) { $m4ac__crsbi5yuze['memb_user']['tag_ids'] = ''; $m4ac__crsbi5yuze['memb_user']['tag_names'] = ''; } else { $m4ac_p31o2w5kxs = $_SESSION['memb_user']['tag_ids']; $m4ac_nxmdv38ty9uo = $_SESSION['memb_user']['tag_names']; } } else { $m4ac_p31o2w5kxs = isset( $m4ac__crsbi5yuze['memb_user']['tag_ids'] ) ? $m4ac__crsbi5yuze['memb_user']['tag_ids'] : ''; $m4ac_nxmdv38ty9uo = isset( $m4ac__crsbi5yuze['memb_user']['tag_names'] ) ? $m4ac__crsbi5yuze['memb_user']['tag_names'] : ''; } if (empty($m4ac_p31o2w5kxs) ) { return false; } if (is_array($m4ac_j0e14tousp_) ) { $m4ac_j0e14tousp_ = trim(implode(',', $m4ac_j0e14tousp_), ','); } if ($m4ac_j0e14tousp_ === $m4ac_p31o2w5kxs) { return true; } $m4ac_tp09y21w7hcn = false; $m4ac_j0e14tousp_ = preg_replace( ['/, */', '/ *,/'], ',', $m4ac_j0e14tousp_ ); $m4ac_j0e14tousp_ = preg_replace( ['/^,/', '/,$/'], '', $m4ac_j0e14tousp_ ); $m4ac_j0e14tousp_ = trim( $m4ac_j0e14tousp_ ); $m4ac_vwur90xpqe = array_filter( explode( ',', strtolower( trim( $m4ac_j0e14tousp_ ) ) ) ); $m4ac_xyxaq6i8m25 = implode( ',', $m4ac_vwur90xpqe ); $m4ac_p31o2w5kxs = array_filter( explode( ',', $m4ac_p31o2w5kxs ) ); $m4ac_nxmdv38ty9uo = array_filter( explode( ',', strtolower( $m4ac_nxmdv38ty9uo ) ) ); $m4ac_rz96aif1 = []; $m4ac_ex_r6l14k = [];  foreach ( $m4ac_vwur90xpqe as $m4ac_o75qrnlisk ) { if ( substr( $m4ac_o75qrnlisk, 0, 1 ) <> '-' ) { $m4ac_rz96aif1[] = $m4ac_o75qrnlisk; } else { $m4ac_ex_r6l14k[] = substr( $m4ac_o75qrnlisk, 1 ); } }  $m4ac_rdnml58qc = false; $m4ac_jd2ow3r9 = 0; if ( count( $m4ac_rz96aif1 ) ) { $m4ac_jd2ow3r9 = count( array_intersect( $m4ac_rz96aif1, $m4ac_p31o2w5kxs ) ) + count( array_intersect( $m4ac_rz96aif1, $m4ac_nxmdv38ty9uo ) ); $m4ac_rdnml58qc = (boolean) $m4ac_jd2ow3r9; } else { $m4ac_jd2ow3r9 = 0; $m4ac_rdnml58qc = true; }  $m4ac_vz64uotgm = false; $m4ac_ya2vw_bjm = 0; if ( count( $m4ac_ex_r6l14k ) ) { $m4ac_ya2vw_bjm = count( array_intersect( $m4ac_ex_r6l14k, $m4ac_p31o2w5kxs ) ) + count( array_intersect( $m4ac_ex_r6l14k, $m4ac_nxmdv38ty9uo ) ); $m4ac_vz64uotgm = ! (boolean) $m4ac_ya2vw_bjm; } else { $m4ac_ya2vw_bjm = 0; $m4ac_vz64uotgm = true; }  $m4ac_tp09y21w7hcn = false; if ( count( $m4ac_rz96aif1 ) ) { $m4ac_tp09y21w7hcn = $m4ac_tp09y21w7hcn || $m4ac_rdnml58qc; } if ( count( $m4ac_ex_r6l14k ) ) { $m4ac_tp09y21w7hcn = $m4ac_tp09y21w7hcn || $m4ac_vz64uotgm; } return $m4ac_tp09y21w7hcn; } 
function m4ac_pisytqw8zn( $m4ac_j0e14tousp_, $m4ac_uo08x_g7 = false ) { if ( ! m4ac_tl5skz6cfptr::m4ac_e28auldn() ) { return false; } if ( ! $m4ac_uo08x_g7 ) { $m4ac_uo08x_g7 = isset( $_SESSION['memb_user']['crm_id'] ) ? (int) $_SESSION['memb_user']['crm_id'] : false; } if ( ! $m4ac_uo08x_g7 ) { if ( current_user_can( 'manage_options' ) ) {  return true; } return false; } if ( empty( $m4ac_j0e14tousp_ ) ) { return false; } if ( is_array( $m4ac_j0e14tousp_ ) ) { $m4ac_j0e14tousp_ = trim( implode( ',', $m4ac_j0e14tousp_ ), ',' ); } if ( $m4ac_uo08x_g7 == $_SESSION['memb_user']['crm_id'] ) { $m4ac_p31o2w5kxs = $_SESSION['memb_db_fields']['tag_ids']; $m4ac_nxmdv38ty9uo = $_SESSION['memb_db_fields']['tags']; } else { $m4ac_at_5xofh = $this->m4ac_cfs25en3x( $m4ac_uo08x_g7 ); if ($m4ac_at_5xofh) { $m4ac__crsbi5yuze = $this->m4ac_c17vlcx3a4( $m4ac_at_5xofh ); $m4ac_p31o2w5kxs = $m4ac__crsbi5yuze['memb_db_fields']['tag_ids']; $m4ac_nxmdv38ty9uo = $m4ac__crsbi5yuze['memb_db_fields']['tags']; } } if ( is_string( $m4ac_j0e14tousp_ ) ) { $m4ac_j0e14tousp_ = explode( ',', $m4ac_j0e14tousp_ ); } if ( $m4ac_uo08x_g7 > 0 ) { $m4ac_p31o2w5kxs = explode( ',', strtolower( $m4ac_p31o2w5kxs ) ); $m4ac_nxmdv38ty9uo = explode( ',', strtolower( $m4ac_nxmdv38ty9uo ) ); foreach ( $m4ac_j0e14tousp_ as $m4ac_o75qrnlisk ) { if ( substr( $m4ac_o75qrnlisk, 0, 1 ) == '-' ) { $m4ac_o75qrnlisk = strtolower( ltrim( $m4ac_o75qrnlisk, '-' ) ); if ( in_array( $m4ac_o75qrnlisk, $m4ac_p31o2w5kxs ) || in_array( $m4ac_o75qrnlisk, $m4ac_nxmdv38ty9uo ) ) { return false; } } else { $m4ac_o75qrnlisk = strtolower( $m4ac_o75qrnlisk ); if ( ! in_array( $m4ac_o75qrnlisk, $m4ac_p31o2w5kxs ) && ! in_array( $m4ac_o75qrnlisk, $m4ac_nxmdv38ty9uo ) ) { return false; } } } return true; } return false; }  
function m4ac__dqw58mge1h( $m4ac_s57wymcib_ = false, $m4ac_b40ft1esgpw = [] ) { if ( $this->is_administrator || $this->m4ac_w8ohueyv() == 0 ) { return false; }  $m4ac_mwip2xfj6rmn = []; $m4ac_j0e14tousp_ = explode( ',', $_SESSION['memb_db_fields']['tag_ids'] ); $m4ac_t3cu9hgt = get_option( MEMBERIUM_MEMBERSHIP_SETTINGS, [] );  if ( ! is_array( $m4ac_b40ft1esgpw ) && $m4ac_b40ft1esgpw > '' ) { $m4ac_b40ft1esgpw = explode( ',', $m4ac_b40ft1esgpw ); } if ( is_array( $m4ac_b40ft1esgpw ) ) { foreach ( $m4ac_b40ft1esgpw as &$m4ac_uk4w9mfx ) { $m4ac_uk4w9mfx = strtolower( trim( $m4ac_uk4w9mfx ) ); } }  if ( is_array( $m4ac_t3cu9hgt ) ) { foreach ($m4ac_t3cu9hgt as $m4ac_qb48jahn0kc) { if ( empty( $m4ac_b40ft1esgpw ) || in_array( trim( strtolower( $m4ac_qb48jahn0kc['name'] ) ), $m4ac_b40ft1esgpw ) ) { $m4ac_mwip2xfj6rmn[] = $m4ac_qb48jahn0kc['payf_id']; if ( ! $m4ac_s57wymcib_ ) { $m4ac_mwip2xfj6rmn[] = $m4ac_qb48jahn0kc['cancel_id']; $m4ac_mwip2xfj6rmn[] = $m4ac_qb48jahn0kc['suspend_id']; } } } } return (boolean) count( array_intersect( $m4ac_j0e14tousp_, $m4ac_mwip2xfj6rmn ) ); }    
function m4ac_o7ynu2faw($m4ac_dzwi81p74xq = '', $m4ac_at_5xofh = false, $m4ac_ya4km5wlsd = false) { if (! m4ac_tl5skz6cfptr::m4ac_e28auldn() ) { return; } if (! $m4ac_at_5xofh) { $m4ac_at_5xofh = get_current_user_id(); } if ($m4ac_at_5xofh < 1) { return; } if (! is_array($m4ac_dzwi81p74xq) ) { $m4ac_dzwi81p74xq = explode(',', trim($m4ac_dzwi81p74xq) ); } if (empty($m4ac_dzwi81p74xq) ) { return; } $m4ac_dzwi81p74xq = array_filter(array_map('strtolower', $m4ac_dzwi81p74xq) ); $m4ac__6ehx7yqp38i = get_user_meta($m4ac_at_5xofh, 'memberium_tokens', true); if (! $m4ac__6ehx7yqp38i) { $m4ac__6ehx7yqp38i = []; } $m4ac__6ehx7yqp38i = array_filter(array_map('strtolower', $m4ac__6ehx7yqp38i) ); foreach ($m4ac_dzwi81p74xq as $m4ac__erqlpbz5cjd) { if (substr($m4ac__erqlpbz5cjd, 0, 1) === '-') { $m4ac__erqlpbz5cjd = substr($m4ac__erqlpbz5cjd, 1); $m4ac_ukqvxo6ne7 = array_search($m4ac__erqlpbz5cjd, $m4ac__6ehx7yqp38i); unset($m4ac__6ehx7yqp38i[$m4ac_ukqvxo6ne7]); do_action('memb_remove_token', $m4ac_at_5xofh, $m4ac__erqlpbz5cjd); } else { $m4ac__6ehx7yqp38i[] = $m4ac__erqlpbz5cjd; do_action('memb_add_token', $m4ac_at_5xofh, $m4ac__erqlpbz5cjd); } } $m4ac__6ehx7yqp38i = array_unique($m4ac__6ehx7yqp38i); update_user_meta($m4ac_at_5xofh, 'memberium_tokens', $m4ac__6ehx7yqp38i); } 
function m4ac_iq8kbylm_($m4ac_dzwi81p74xq, $m4ac_at_5xofh = false) { if (! m4ac_tl5skz6cfptr::m4ac_e28auldn() ) {  return false; } if (current_user_can('manage_options') ) { return true; } if (! $m4ac_at_5xofh) { $m4ac_at_5xofh = get_current_user_id(); } if ($m4ac_at_5xofh < 1) { return; } $m4ac_dzwi81p74xq = array_filter(array_map('strtolower', explode(',', trim($m4ac_dzwi81p74xq) )) ); $m4ac__6ehx7yqp38i = get_user_meta($m4ac_at_5xofh, 'memberium_tokens', true); if (! $m4ac__6ehx7yqp38i) { $m4ac__6ehx7yqp38i = []; } $m4ac__6ehx7yqp38i = array_filter(array_map('strtolower', $m4ac__6ehx7yqp38i) ); if (count(array_intersect($m4ac_dzwi81p74xq, $m4ac__6ehx7yqp38i) )) { return true; } return false; }    
function m4ac_q5s_onxp4hy( $m4ac_b0zgjo5s4b3 ) { global $wpdb; $m4ac_b0zgjo5s4b3 = trim( $m4ac_b0zgjo5s4b3 ); if ( empty( $m4ac_b0zgjo5s4b3 ) ) { return false; } $m4ac_jouqjei9gbc3 = MEMBERIUM_DB_TAGS; $m4ac_xtcz6bi97flk = "SELECT `id` FROM `{$m4ac_jouqjei9gbc3}` WHERE `id` > 0 AND `appname` = %s AND `name` = %s ORDER BY `id` LIMIT 1;"; $m4ac_xtcz6bi97flk = $wpdb->prepare( $m4ac_xtcz6bi97flk, $this->m4ac_bztk3xj1(), $m4ac_b0zgjo5s4b3 ); $m4ac_rsau1b7dj2lr = (int) $wpdb->get_var( $m4ac_xtcz6bi97flk ); return $m4ac_rsau1b7dj2lr ? $m4ac_rsau1b7dj2lr : false; } 
function m4ac_nanwm2czdq($m4ac_uyer38_gado) { global $wpdb; static $m4ac_l9lbyvw4xaed = []; if (! is_array($m4ac_uyer38_gado) ) { $m4ac_j0e14tousp_ = preg_replace(['/, */', '/ *,/'], ',', trim($m4ac_uyer38_gado) ); $m4ac_j0e14tousp_ = explode(',', $m4ac_j0e14tousp_); } else { if (is_array($m4ac_uyer38_gado) ) { $m4ac_j0e14tousp_ = $m4ac_uyer38_gado; } else { return false; } } unset($m4ac_uyer38_gado); if (count($m4ac_l9lbyvw4xaed) == 0) { $m4ac_h57xqitcp = $this->m4ac_bztk3xj1(); $m4ac_xtcz6bi97flk = "SELECT LOWER(`name`) as `name`, id FROM `" . MEMBERIUM_DB_TAGS . "` WHERE `appname` = '{$m4ac_h57xqitcp}' ;"; $m4ac_tljx9z25qck = $wpdb->get_results($m4ac_xtcz6bi97flk, ARRAY_A); foreach ($m4ac_tljx9z25qck as $m4ac_o75qrnlisk) { $m4ac_ln3dsj1miqwc = strtolower($m4ac_o75qrnlisk['name']); $m4ac_l9lbyvw4xaed[$m4ac_ln3dsj1miqwc] = $m4ac_o75qrnlisk['id']; } unset($m4ac_ln3dsj1miqwc, $m4ac_tljx9z25qck, $m4ac_xtcz6bi97flk); } $m4ac_h18m3owq = []; foreach ($m4ac_j0e14tousp_ as $m4ac_o75qrnlisk) { if (is_numeric($m4ac_o75qrnlisk) ) { $m4ac_h18m3owq[] = $m4ac_o75qrnlisk; } else { if (substr($m4ac_o75qrnlisk, 0, 1) == '-') { $m4ac_ln3dsj1miqwc = strtolower(substr($m4ac_o75qrnlisk, 1) ); $m4ac_n5dw3y7vlku = '-'; } else { $m4ac_ln3dsj1miqwc = strtolower($m4ac_o75qrnlisk); $m4ac_n5dw3y7vlku = ''; } if (isset($m4ac_l9lbyvw4xaed[$m4ac_ln3dsj1miqwc]) ) { $m4ac_h18m3owq[] = intval($m4ac_n5dw3y7vlku . $m4ac_l9lbyvw4xaed[$m4ac_ln3dsj1miqwc]); } } } return $m4ac_h18m3owq; } 
function m4ac_a4ivzgh1bc0( $m4ac_uyer38_gado, $m4ac_o2lhyvkaf_ = false ) { global $wpdb; static $m4ac_l9lbyvw4xaed = []; if ( ! is_array( $m4ac_uyer38_gado ) ) { $m4ac_j0e14tousp_ = preg_replace( ['/, */', '/ *,/'], ',', trim( $m4ac_uyer38_gado ) ); $m4ac_j0e14tousp_ = explode( ',', $m4ac_j0e14tousp_ ); } else { if ( is_array($m4ac_uyer38_gado ) ) { $m4ac_j0e14tousp_ = $m4ac_uyer38_gado; } else { return false; } } unset($m4ac_uyer38_gado); if (count($m4ac_l9lbyvw4xaed) == 0) { $m4ac_h57xqitcp = $this->m4ac_bztk3xj1(); $m4ac_xtcz6bi97flk = "SELECT `name` as `name`, id FROM `" . MEMBERIUM_DB_TAGS . "` WHERE `appname` = '{$m4ac_h57xqitcp}' ;"; $m4ac_tljx9z25qck = $wpdb->get_results($m4ac_xtcz6bi97flk, ARRAY_A); foreach ($m4ac_tljx9z25qck as $m4ac_o75qrnlisk) { $m4ac_l9lbyvw4xaed[$m4ac_o75qrnlisk['id']] = $m4ac_o75qrnlisk['name']; } unset($m4ac_ln3dsj1miqwc, $m4ac_tljx9z25qck, $m4ac_xtcz6bi97flk); } $m4ac_h18m3owq = [ 'add' => [], 'remove' => [] ]; $m4ac_gg6yl0o3x = [];  foreach ($m4ac_j0e14tousp_ as $m4ac_o75qrnlisk) { $m4ac_o75qrnlisk = trim($m4ac_o75qrnlisk); }  if (is_array($m4ac_j0e14tousp_) ) { foreach ($m4ac_j0e14tousp_ as $m4ac_o75qrnlisk) { if (is_numeric($m4ac_o75qrnlisk) ) { if ($m4ac_o75qrnlisk > 0) { if (array_key_exists($m4ac_o75qrnlisk, $m4ac_l9lbyvw4xaed) ) { $m4ac_h18m3owq['add'][] = $m4ac_l9lbyvw4xaed[$m4ac_o75qrnlisk]; } } if ($m4ac_o75qrnlisk < 0) { if (array_key_exists(abs($m4ac_o75qrnlisk), $m4ac_l9lbyvw4xaed) ) { $m4ac_h18m3owq['remove'][] = $m4ac_l9lbyvw4xaed[ abs($m4ac_o75qrnlisk) ]; } } } } }  foreach ($m4ac_j0e14tousp_ as $m4ac_o75qrnlisk) { if (! is_numeric($m4ac_o75qrnlisk) ) { if (substr($m4ac_o75qrnlisk, 0, 1) == '-') { $m4ac_h18m3owq['remove'][] = trim(substr($m4ac_o75qrnlisk, 1) ); } else { $m4ac_h18m3owq['add'][] = $m4ac_o75qrnlisk; } } } $m4ac_h18m3owq['remove'] = array_unique($m4ac_h18m3owq['remove']); $m4ac_h18m3owq['add'] = array_unique($m4ac_h18m3owq['add']); if (! $m4ac_o2lhyvkaf_) { return $m4ac_h18m3owq; } elseif ($m4ac_o2lhyvkaf_ == 'csv') { $m4ac_h18m3owq['remove'] = implode(',', $m4ac_h18m3owq['remove']); $m4ac_h18m3owq['add'] = implode(',', $m4ac_h18m3owq['add']); return $m4ac_h18m3owq; } }    
function m4ac_ms8_nzcjd2($m4ac_e196aihkq2b) { global $wpdb; static $m4ac_zuge_1bo3 = []; if (! is_array($m4ac_e196aihkq2b) ) { $m4ac_m_jevhs4fwnp = preg_replace(['/, */', '/ *,/'], ',', trim($m4ac_e196aihkq2b) ); $m4ac_m_jevhs4fwnp = explode(',', $m4ac_m_jevhs4fwnp); } else { if (is_array($m4ac_e196aihkq2b) ) { $m4ac_m_jevhs4fwnp = $m4ac_e196aihkq2b; } else { return false; } } unset($m4ac_e196aihkq2b); if (count($m4ac_zuge_1bo3) == 0) { $m4ac_h57xqitcp = $this->m4ac_bztk3xj1(); $m4ac_xtcz6bi97flk = "SELECT LOWER(`name`) as `name`, id FROM `" . MEMBERIUM_DB_LISTS . "` WHERE `appname` = '{$m4ac_h57xqitcp}' ;"; $m4ac_rc6rie0p = $wpdb->get_results($m4ac_xtcz6bi97flk, ARRAY_A); foreach ($m4ac_rc6rie0p as $m4ac_ckfu62mpdy) { $m4ac_kzy0hlik = strtolower($m4ac_ckfu62mpdy['name']); $m4ac_zuge_1bo3[$m4ac_kzy0hlik] = $m4ac_ckfu62mpdy['id']; } unset($m4ac_kzy0hlik, $m4ac_rc6rie0p, $m4ac_xtcz6bi97flk); } $m4ac_r_rdznyt2eb = []; foreach ($m4ac_m_jevhs4fwnp as $m4ac_ckfu62mpdy) { if (is_numeric($m4ac_ckfu62mpdy) ) { $m4ac_r_rdznyt2eb[] = $m4ac_ckfu62mpdy; } else { if (substr($m4ac_ckfu62mpdy, 0, 1) == '-') { $m4ac_kzy0hlik = strtolower(substr($m4ac_ckfu62mpdy, 1) ); $m4ac_n5dw3y7vlku = '-'; } else { $m4ac_kzy0hlik = strtolower($m4ac_ckfu62mpdy); $m4ac_n5dw3y7vlku = ''; } if (isset($m4ac_zuge_1bo3[$m4ac_kzy0hlik]) ) { $m4ac_r_rdznyt2eb[] = intval($m4ac_n5dw3y7vlku . $m4ac_zuge_1bo3[$m4ac_kzy0hlik]); } } } return $m4ac_r_rdznyt2eb; } 
function m4ac_akc7axqni($m4ac_e196aihkq2b, $m4ac_o2lhyvkaf_ = false) { global $wpdb; static $m4ac_zuge_1bo3 = []; if (! is_array($m4ac_e196aihkq2b) ) { $m4ac_m_jevhs4fwnp = preg_replace(['/, */', '/ *,/'], ',', trim($m4ac_e196aihkq2b) ); $m4ac_m_jevhs4fwnp = explode(',', $m4ac_m_jevhs4fwnp); } else { if (is_array($m4ac_e196aihkq2b) ) { $m4ac_m_jevhs4fwnp = $m4ac_e196aihkq2b; } else { return false; } } unset($raw_tag_list); if (count($m4ac_zuge_1bo3) == 0) { $m4ac_h57xqitcp = $this->m4ac_bztk3xj1(); $m4ac_xtcz6bi97flk = "SELECT `name` as `name`, id FROM `" . MEMBERIUM_DB_LISTS . "` WHERE `appname` = '{$m4ac_h57xqitcp}' ;"; $m4ac_rc6rie0p = $wpdb->get_results($m4ac_xtcz6bi97flk, ARRAY_A); foreach ($m4ac_rc6rie0p as $m4ac_ckfu62mpdy) { $m4ac_zuge_1bo3[$m4ac_ckfu62mpdy['id']] = $m4ac_ckfu62mpdy['name']; } unset($m4ac_kzy0hlik, $m4ac_rc6rie0p, $m4ac_xtcz6bi97flk); } $m4ac_r_rdznyt2eb = [ 'add' => [], 'remove' => [] ]; $new_tags = [];  foreach ($m4ac_m_jevhs4fwnp as $id=>$m4ac_ckfu62mpdy) { $m4ac_m_jevhs4fwnp[$id] = trim($m4ac_ckfu62mpdy); }  if (is_array($m4ac_m_jevhs4fwnp) ) { foreach ($m4ac_m_jevhs4fwnp as $m4ac_ckfu62mpdy) { if (is_numeric($m4ac_ckfu62mpdy) ) { if ($m4ac_ckfu62mpdy > 0) { if (array_key_exists($m4ac_ckfu62mpdy, $m4ac_zuge_1bo3) ) { $m4ac_r_rdznyt2eb['add'][] = $m4ac_ckfu62mpdy; } } if ($m4ac_ckfu62mpdy < 0) { if (array_key_exists(abs($m4ac_ckfu62mpdy), $m4ac_zuge_1bo3) ) { $m4ac_r_rdznyt2eb['remove'][] = abs($m4ac_ckfu62mpdy); } } } } }  foreach ($m4ac_m_jevhs4fwnp as $m4ac_ckfu62mpdy) { if (! is_numeric($m4ac_ckfu62mpdy) ) { if (substr($m4ac_ckfu62mpdy, 0, 1) == '-') { $m4ac_r_rdznyt2eb['remove'][] = trim(substr($m4ac_ckfu62mpdy, 1) ); } else { $m4ac_r_rdznyt2eb['add'][] = $m4ac_ckfu62mpdy; } } } $m4ac_r_rdznyt2eb['remove'] = array_unique($m4ac_r_rdznyt2eb['remove']); $m4ac_r_rdznyt2eb['add'] = array_unique($m4ac_r_rdznyt2eb['add']); if (! $m4ac_o2lhyvkaf_) { return $m4ac_r_rdznyt2eb; } elseif ($m4ac_o2lhyvkaf_ == 'csv') { $m4ac_r_rdznyt2eb['remove'] = implode(',', $m4ac_r_rdznyt2eb['remove']); $m4ac_r_rdznyt2eb['add'] = implode(',', $m4ac_r_rdznyt2eb['add']); return $m4ac_r_rdznyt2eb; } }    
function m4ac_ftm2xflo() { return; $m4ac_kx45sgz6 = $this->m4ac_mpd39m5zjvl_(); foreach ($m4ac_kx45sgz6 as $m4ac_ekowrtv0) { $m4ac_uo08x_g7 = 0; if (! empty($m4ac_ekowrtv0['data']['contact_id']) ) { $m4ac_uo08x_g7 = (int) $m4ac_ekowrtv0['data']['contact_id']; } if ($m4ac_uo08x_g7 > 0) { if ($m4ac_ekowrtv0['actiontype'] == 'automation') { $m4ac_rld1a_268o = isset($m4ac_ekowrtv0['data']['automation']) ? $m4ac_ekowrtv0['data']['automation'] : ''; $this->m4ac_lmhdiugb6cs($m4ac_rld1a_268o, $m4ac_uo08x_g7); $this->m4ac_ps6xuio5t($m4ac_ekowrtv0); } elseif ($m4ac_ekowrtv0['actiontype'] == 'tag') { $tags = isset($m4ac_ekowrtv0['data']['tags']) ? $m4ac_ekowrtv0['data']['tags'] : ''; $this->m4ac_ocsjt69hrb($tags, $m4ac_uo08x_g7); $this->m4ac_ps6xuio5t($m4ac_ekowrtv0); } } } } 
function m4ac_cj5i1nw0qf($m4ac_n18ru3ylv, $m4ac_yqco7sf69, $m4ac_md7c8zsu2o) { global $wpdb; $m4ac_h57xqitcp = $this->m4ac_bztk3xj1(); $m4ac_jouqjei9gbc3 = MEMBERIUM_DB_QUEUE; $m4ac_n18ru3ylv = strtolower(trim($m4ac_n18ru3ylv) ); $m4ac_uqmdon7p0fek = strtotime($m4ac_yqco7sf69); $m4ac_xtcz6bi97flk = 'INSERT INTO `' . $m4ac_jouqjei9gbc3 . '` (`pidlock`, `appname`, `actiontype`, `scheduled`, `data`) VALUES (-1, %s, %s, %s, %s);'; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_h57xqitcp, $m4ac_n18ru3ylv, $m4ac_yqco7sf69, json_encode($m4ac_md7c8zsu2o) ); $wpdb->query($m4ac_xtcz6bi97flk); return $wpdb->insert_id; } 
function m4ac_mpd39m5zjvl_() { global $wpdb; if (function_exists('getmypid') ) { $pid = getmypid(); } else { $pid = getmypid();  } $m4ac_h57xqitcp = $this->m4ac_bztk3xj1(); $m4ac_jouqjei9gbc3 = MEMBERIUM_DB_QUEUE; $m4ac_xtcz6bi97flk = 'UPDATE `' . $m4ac_jouqjei9gbc3 . '` SET `pidlock` = %d WHERE `appname`= %s AND `scheduled` <= NOW() AND `pidlock` < 1 ;'; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $pid, $m4ac_h57xqitcp); $wpdb->query($m4ac_xtcz6bi97flk); $m4ac_xtcz6bi97flk = 'SELECT * FROM `' . $m4ac_jouqjei9gbc3 . '` WHERE `pidlock` = %d AND `appname`= %s ;'; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $pid, $m4ac_h57xqitcp); $m4ac_lr7g_xiepoq = $wpdb->get_results($m4ac_xtcz6bi97flk, ARRAY_A); foreach ($m4ac_lr7g_xiepoq as $m4ac_ukqvxo6ne7 => $m4ac_ihnr7cyv) { $m4ac_md7c8zsu2o = json_decode($m4ac_ihnr7cyv['data'], true); if ($m4ac_md7c8zsu2o) { $m4ac_lr7g_xiepoq[$m4ac_ukqvxo6ne7]['data'] = $m4ac_md7c8zsu2o; } } return $m4ac_lr7g_xiepoq; } 
function m4ac_ps6xuio5t($m4ac_ekowrtv0) { $id = (int) $m4ac_ekowrtv0['id']; if ($id) { global $wpdb; $m4ac_xtcz6bi97flk = 'DELETE FROM `' . MEMBERIUM_DB_QUEUE . '` WHERE `id` = %d and `appname` = %s;'; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_ekowrtv0['id'], $m4ac_ekowrtv0['appname']); $wpdb->query($m4ac_xtcz6bi97flk); } }    
function m4ac_pmrg578nqy($m4ac_pzocy3nw, $m4ac_ihnr7cyv = 1) { $m4ac_pzocy3nw = trim($m4ac_pzocy3nw); if (empty($m4ac_pzocy3nw) ) { return false; } global $wpdb; $m4ac_xtcz6bi97flk = ''; return false; }        
function m4ac_ui479rlchy( $m4ac__ndczilub = 0, $m4ac_o2lhyvkaf_ = '', $m4ac__6_z4udqe98 = '' ) { static $m4ac_pycmw2b3u_og = null; static $m4ac_n4k31y6ijpd = null; if ( empty( $m4ac__ndczilub ) ) { $m4ac__ndczilub = time(); } if ( empty( $m4ac_pycmw2b3u_og ) ) { $m4ac_pycmw2b3u_og = get_option( 'date_format' ) . ' ' . get_option( 'time_format' ); } if (empty($m4ac_n4k31y6ijpd) ) { $m4ac_n4k31y6ijpd = get_option( 'timezone_string' ); } $m4ac_gp0j5q_oc = empty( $m4ac__6_z4udqe98 ) ? $m4ac_n4k31y6ijpd : $m4ac__6_z4udqe98; $m4ac_o2lhyvkaf_ = empty( $m4ac_o2lhyvkaf_ ) ? $m4ac_pycmw2b3u_og : $m4ac_o2lhyvkaf_; $m4ac_eq_dxn0rf438 = date_default_timezone_get(); if ( ! empty( $m4ac_gp0j5q_oc ) ) { date_default_timezone_set( $m4ac_gp0j5q_oc ); } $m4ac__ndczilub = date( $m4ac_o2lhyvkaf_, $m4ac__ndczilub ); if ( ! empty( $m4ac_eq_dxn0rf438 ) ) { date_default_timezone_set( $m4ac_eq_dxn0rf438 ); } return $m4ac__ndczilub; } 
function m4ac_iui26zwm5_k( $m4ac__37l6rhivt2, $m4ac_ah4c_sou, $m4ac_py5zsafh817 = null ) { global $wpdb; $m4ac_fbgr79lehnp = '"' . implode( '","', $m4ac_ah4c_sou ) . '"'; $m4ac_xtcz6bi97flk = "SELECT `meta_key`, `meta_value` FROM {$wpdb->postmeta} WHERE `post_id` = {$m4ac__37l6rhivt2} AND `meta_key` IN ( {$m4ac_fbgr79lehnp} )"; $m4ac_x_1sx47rpefc = $wpdb->get_results( $m4ac_xtcz6bi97flk, ARRAY_A ); $m4ac_fic2e07vfkz = []; foreach ( $m4ac_x_1sx47rpefc as $m4ac_lsxa90fgqk ) { $m4ac_fic2e07vfkz[ $m4ac_lsxa90fgqk['meta_key'] ] = $m4ac_lsxa90fgqk[ 'meta_value' ]; } if (! is_null($m4ac_py5zsafh817) ) { foreach($m4ac_ah4c_sou as $m4ac_ukqvxo6ne7) { if ( ! isset( $m4ac_fic2e07vfkz[ $m4ac_ukqvxo6ne7 ] ) ) { $m4ac_fic2e07vfkz[ $m4ac_ukqvxo6ne7 ] = $m4ac_py5zsafh817; } } } return $m4ac_fic2e07vfkz; } 
function m4ac_wq7u84xw5v0( $m4ac__37l6rhivt2, $m4ac_ah4c_sou, $post = null ) { $post = is_null($post) ? $_POST : $post; foreach($m4ac_ah4c_sou as $m4ac_ukqvxo6ne7) { $m4ac_ihnr7cyv = ''; if (isset($post[$m4ac_ukqvxo6ne7]) ) { if (is_array($post[$m4ac_ukqvxo6ne7]) ) { $m4ac_ihnr7cyv = implode(',', array_filter($_POST[$m4ac_ukqvxo6ne7]) ); } else { $m4ac_ihnr7cyv = $post[$m4ac_ukqvxo6ne7]; } $m4ac_fic2e07vfkz = empty($m4ac_ihnr7cyv) ? delete_post_meta($m4ac__37l6rhivt2, $m4ac_ukqvxo6ne7) : update_post_meta($m4ac__37l6rhivt2, $m4ac_ukqvxo6ne7, $m4ac_ihnr7cyv); } } }    
function m4ac_kb_flwp6s7h3($m4ac_lj_fwoc5ub1y, $m4ac_ur90k1f2dy, $m4ac_ihnr7cyv = '') { $this->dirty_contact_record[$m4ac_lj_fwoc5ub1y][$m4ac_ur90k1f2dy] = $m4ac_ihnr7cyv; } 
function m4ac_azba15ej9mfx( $m4ac_lj_fwoc5ub1y = 0 ) { if ($m4ac_lj_fwoc5ub1y && ! empty($this->dirty_contact_record[$m4ac_lj_fwoc5ub1y]) ) { return $this->dirty_contact_record[$m4ac_lj_fwoc5ub1y]; } return $this->dirty_contact_record; } 
function m4ac_gx5t4op2rz( $m4ac_lj_fwoc5ub1y, $m4ac_ur90k1f2dy = '' ) { if (empty($m4ac_lj_fwoc5ub1y)) { return false; } if (! empty($m4ac_ur90k1f2dy)) { unset($this->dirty_contact_record[$m4ac_lj_fwoc5ub1y][$m4ac_ur90k1f2dy]); } else { unset($this->dirty_contact_record[$m4ac_lj_fwoc5ub1y]); } return $this->dirty_contact_record; } 
function m4ac_dki739zs2uq() { if ( empty( $this->dirty_contact_record ) ) { return; } if ( is_array($this->dirty_contact_record ) ) { foreach ( $this->dirty_contact_record as $contact_id => $fields ) { $this->m4ac_eg298f5u( $contact_id, $fields, true ); unset( $this->dirty_contact_record[$contact_id] ); } } } 
function m4ac__59c71kr() { return $this->loaded_extensions; } 
function m4ac_chxl7ms_o9c( $m4ac_lj_fwoc5ub1y, $m4ac_pzocy3nw, $m4ac_md7c8zsu2o = [] ) { $this->loaded_extensions[ $m4ac_lj_fwoc5ub1y ] = [ 'name' => $m4ac_pzocy3nw, 'data' => $m4ac_md7c8zsu2o, ]; }    
function m4ac_b_ikylpvfs($m4ac_fheyfujga6, $m4ac_x_1sx47rpefc = false) { if (! is_a($m4ac_fheyfujga6, 'WP_User') ) { return; } $m4ac_dk5sn47a86t = (bool) $this->m4ac_x280qrz9kmic('disable_displayname_update'); if ($m4ac_dk5sn47a86t) { return; } $m4ac_s_o5mhjyx = $this->m4ac_x280qrz9kmic('displayname_format'); if (empty($m4ac_s_o5mhjyx)) { return; } $m4ac_at_5xofh = (int) $m4ac_fheyfujga6->ID; $m4ac_u9uhl_ci87 = []; if ($m4ac_x_1sx47rpefc === false) { $m4ac_uo08x_g7 = $this->m4ac_pm63av15g($m4ac_at_5xofh); $m4ac_x_1sx47rpefc = $this->m4ac_zrj6g8l4ap9i($m4ac_uo08x_g7, true) ; if (is_array($m4ac_x_1sx47rpefc)) { foreach($m4ac_x_1sx47rpefc as $m4ac_ukqvxo6ne7 => $m4ac_ihnr7cyv) { $m4ac_ukqvxo6ne7 = trim($m4ac_ukqvxo6ne7, '%'); $m4ac_u9uhl_ci87[$m4ac_ukqvxo6ne7] = $m4ac_ihnr7cyv; } } } else { foreach($m4ac_x_1sx47rpefc as $m4ac_lj_fwoc5ub1y => $m4ac_lsxa90fgqk) { if (! empty($m4ac_lsxa90fgqk['fieldname'])) { $m4ac_ukqvxo6ne7 = strtolower(trim($m4ac_lsxa90fgqk['fieldname'], '%') ); $m4ac_ihnr7cyv = $m4ac_lsxa90fgqk['value']; $m4ac_u9uhl_ci87[$m4ac_ukqvxo6ne7] = $m4ac_ihnr7cyv; } } } foreach($m4ac_u9uhl_ci87 as $m4ac_ukqvxo6ne7 => $m4ac_ihnr7cyv) { $m4ac_s_o5mhjyx = str_ireplace("{{contact.{$m4ac_ukqvxo6ne7}}}", $m4ac_ihnr7cyv, $m4ac_s_o5mhjyx); } if (! empty($m4ac_s_o5mhjyx)) { $m4ac_ah90o86m = [ 'ID' => $m4ac_at_5xofh, 'display_name' => $m4ac_s_o5mhjyx, 'nickname' => sanitize_title($m4ac_s_o5mhjyx),  ]; wp_update_user($m4ac_ah90o86m); } } 
function m4ac_rep63yuna($m4ac_wkswgyxc5u8 = '', $m4ac_qsvd0m6oq = 0) { if (is_int($m4ac_qsvd0m6oq) ) { $m4ac_qsvd0m6oq = $this->m4ac_zrj6g8l4ap9i($m4ac_qsvd0m6oq); } $m4ac_cnfw6ict = $this->m4ac_x280qrz9kmic('displayname_format'); if (empty($m4ac_cnfw6ict) ) { return $m4ac_wkswgyxc5u8; } $m4ac_wkswgyxc5u8 = m4ac_audvsgbhpw::m4ac_if90iphw($m4ac_cnfw6ict);  return $m4ac_wkswgyxc5u8; } 
function m4ac_e538xo4yks($m4ac_uo08x_g7, $m4ac_bxvpge5qkdo9 = []) { global $wpdb; $m4ac_wdl2r3x6jg = [ 'add_automation' => 0, 'add_tag' => 0, 'overwrite' => false, 'password' => '', 'update_automation' => '0', 'update_tag' => '0', ]; $m4ac_bxvpge5qkdo9 = wp_parse_args($m4ac_bxvpge5qkdo9, $m4ac_wdl2r3x6jg); unset($m4ac_wdl2r3x6jg);  $m4ac_qsvd0m6oq = $this->m4ac_zrj6g8l4ap9i($m4ac_uo08x_g7); $m4ac_lqu8ax56 = [ '%EMAIL%', '%FIRSTNAME%', ]; foreach($m4ac_lqu8ax56 as $m4ac_rxcejfsw4zo_) { if (empty($m4ac_qsvd0m6oq[$m4ac_rxcejfsw4zo_]) ) { return false; } }  if ($m4ac_uo08x_g7) { $m4ac_at_5xofh = $this->m4ac_cfs25en3x($m4ac_uo08x_g7); if ($m4ac_at_5xofh) { $m4ac_fheyfujga6 = get_user_by('id', $m4ac_at_5xofh); } else { $m4ac_fheyfujga6 = get_user_by('email', $m4ac_qsvd0m6oq['%EMAIL%']); if (! $m4ac_fheyfujga6) { $m4ac_fheyfujga6 = get_user_by('user_login', $m4ac_qsvd0m6oq['%EMAIL%']); } } } if (! empty($m4ac_fheyfujga6->ID) && user_can($m4ac_fheyfujga6, 'manage_options') ) { return false; } $m4ac_hix162sdofjr = $this->m4ac_x280qrz9kmic('password_field'); $m4ac_au_1mg29rdh4 = $this->m4ac_shgqrv34tu($this->m4ac_x280qrz9kmic('secure_password_sync') ); $m4ac_nmf72t01 = $m4ac_qsvd0m6oq['%EMAIL%']; $m4ac_mfvl3r5ngz = $m4ac_fheyfujga6 ? $m4ac_fheyfujga6->ID : false; $m4ac_ci5yw4hxg = ''; $m4ac_ph3jd79cvf6 = ''; $m4ac_ph3jd79cvf6 = empty($m4ac_bxvpge5qkdo9['password']) ? $m4ac_ph3jd79cvf6 : $m4ac_bxvpge5qkdo9['password']; $m4ac_ph3jd79cvf6 = empty($m4ac_qsvd0m6oq[$m4ac_hix162sdofjr]) ? trim($m4ac_ph3jd79cvf6) : trim($m4ac_qsvd0m6oq[$m4ac_hix162sdofjr]); $m4ac_ci5yw4hxg = empty($m4ac_qsvd0m6oq[$m4ac_au_1mg29rdh4]) ? '' : $m4ac_qsvd0m6oq[$m4ac_au_1mg29rdh4]; $m4ac_o29b8zghdrs1 = $this->m4ac_x280qrz9kmic('disable_displayname_update'); $m4ac_k0bcenyh = false; if ( ($m4ac_mfvl3r5ngz == false) && empty($m4ac_ci5yw4hxg) && empty($m4ac_ph3jd79cvf6) ) { $m4ac_bxvpge5qkdo9['overwrite'] = true; $m4ac_k0bcenyh = true; } $m4ac_qig5z0tphdaj = []; $m4ac_gm2hd6teny = []; $m4ac_xie38fkut = []; $m4ac_qig5z0tphdaj['display_name'] = isset($m4ac_fheyfujga6->display_name) ? $m4ac_fheyfujga6->display_name : ''; $m4ac_qig5z0tphdaj['first_name'] = isset($m4ac_fheyfujga6->first_name) ? $m4ac_fheyfujga6->first_name : ''; $m4ac_qig5z0tphdaj['last_name'] = isset($m4ac_fheyfujga6->last_name) ? $m4ac_fheyfujga6->last_name : ''; $m4ac_qig5z0tphdaj['nickname'] = isset($m4ac_fheyfujga6->nickname) ? $m4ac_fheyfujga6->nickname : ''; $m4ac_qig5z0tphdaj['user_email'] = isset($m4ac_fheyfujga6->user_email) ? $m4ac_fheyfujga6->user_email : ''; $m4ac_qig5z0tphdaj['user_nicename'] = isset($m4ac_fheyfujga6->user_nicename) ? $m4ac_fheyfujga6->user_nicename : ''; $m4ac_qig5z0tphdaj['user_url'] = isset($m4ac_fheyfujga6->user_url) ? wp_specialchars_decode($m4ac_fheyfujga6->user_url) : ''; $m4ac_gm2hd6teny['first_name'] = empty($m4ac_qsvd0m6oq['%FIRSTNAME%']) ? $m4ac_qig5z0tphdaj['first_name'] : $m4ac_qsvd0m6oq['%FIRSTNAME%']; $m4ac_gm2hd6teny['last_name'] = empty($m4ac_qsvd0m6oq['%LASTNAME%']) ? $m4ac_qig5z0tphdaj['last_name'] : $m4ac_qsvd0m6oq['%LASTNAME%']; $m4ac_gm2hd6teny['user_email'] = empty($m4ac_qsvd0m6oq['%EMAIL%']) ? $m4ac_qig5z0tphdaj['user_email'] : strtolower($m4ac_qsvd0m6oq['%EMAIL%']); if (empty($m4ac_mfvl3r5ngz) || empty($m4ac_o29b8zghdrs1) ) { $m4ac_gm2hd6teny['display_name'] = $this->m4ac_rep63yuna($m4ac_qig5z0tphdaj['display_name'], $m4ac_qsvd0m6oq); $m4ac_gm2hd6teny['nickname'] = sanitize_title($m4ac_gm2hd6teny['display_name']); $m4ac_gm2hd6teny['display_name'] = apply_filters('memberium_display_name', $m4ac_qig5z0tphdaj['display_name'], $m4ac_qsvd0m6oq); $m4ac_gm2hd6teny['nickname'] = apply_filters('memberium_nickname', $m4ac_qig5z0tphdaj['nickname'], $m4ac_qsvd0m6oq); } foreach ($m4ac_gm2hd6teny as $m4ac_ukqvxo6ne7 => $m4ac_ihnr7cyv ) {  if (! empty($m4ac_ihnr7cyv) && $m4ac_qig5z0tphdaj[$m4ac_ukqvxo6ne7] !== $m4ac_ihnr7cyv) { $m4ac_xie38fkut[$m4ac_ukqvxo6ne7] = $m4ac_ihnr7cyv; } } if ($m4ac_bxvpge5qkdo9['overwrite']) { $m4ac_ph3jd79cvf6 = $this->m4ac__oezsglai(); $m4ac_xie38fkut['user_pass'] = $m4ac_ph3jd79cvf6; }    if ($m4ac_mfvl3r5ngz) { if (strlen($m4ac_ci5yw4hxg) > 31 && $m4ac_ci5yw4hxg <> $m4ac_fheyfujga6->user_pass) { $sql = "UPDATE `{$wpdb->users}` SET `user_pass` = %s WHERE `ID` = %d ;"; $sql = $wpdb->prepare($sql, $m4ac_ci5yw4hxg, $m4ac_mfvl3r5ngz); $wpdb->query($sql); } if (! empty($m4ac_xie38fkut)) { $m4ac_xie38fkut['ID'] = $m4ac_mfvl3r5ngz; wp_update_user($m4ac_xie38fkut); } if ($m4ac_bxvpge5qkdo9['overwrite']) { wp_set_password($m4ac_ph3jd79cvf6, $m4ac_mfvl3r5ngz); } if (strlen($m4ac_ci5yw4hxg) > 31 && $m4ac_ci5yw4hxg <> $m4ac_fheyfujga6->user_pass) { $sql = "UPDATE `{$wpdb->users}` SET `user_pass` = %s WHERE `ID` = %d ;"; $sql = $wpdb->prepare($sql, $m4ac_ci5yw4hxg, $m4ac_mfvl3r5ngz); $wpdb->query($sql); }  if (empty($m4ac_fheyfujga6->user_login) || stripos($m4ac_fheyfujga6->user_login, '@') !== false) { $m4ac_howfnjcq8 = sanitize_user($m4ac_qsvd0m6oq['%EMAIL%'], true); if ($m4ac_fheyfujga6->user_login <> $m4ac_howfnjcq8 && $m4ac_fheyfujga6->user_email == $m4ac_fheyfujga6->user_login) { $this->m4ac_fk549z6fqh23($m4ac_mfvl3r5ngz, $m4ac_howfnjcq8, $m4ac_fheyfujga6->user_login); } } $m4ac_ibrigdu_0vs = $m4ac_bxvpge5qkdo9['update_automation']; $m4ac_drs3zb15u8 = $m4ac_bxvpge5qkdo9['update_tag']; } else {   $m4ac_xie38fkut['user_login'] = apply_filters('memberium/wpuser/login', $m4ac_nmf72t01, $m4ac_qsvd0m6oq); if (! empty($m4ac_ph3jd79cvf6) ) { $m4ac_xie38fkut['user_pass'] = $m4ac_ph3jd79cvf6; } $m4ac_mfvl3r5ngz = wp_insert_user($m4ac_xie38fkut);  if( is_wp_error($m4ac_mfvl3r5ngz) ){ error_log("Memberium Error : Add Update WP_User " . $m4ac_mfvl3r5ngz->get_error_message()); return false; } $rss_user_id = $this->m4ac_ytw30pxyqsr($m4ac_mfvl3r5ngz); $m4ac_ibrigdu_0vs = $m4ac_bxvpge5qkdo9['add_automation']; $m4ac_drs3zb15u8 = $m4ac_bxvpge5qkdo9['add_tag']; $m4ac_bxvpge5qkdo9['overwrite'] = true; wp_new_user_notification($m4ac_mfvl3r5ngz, $m4ac_rex7bvpq, 'admin'); m4ac_bem2ya5k::m4ac_w_b7do4p($m4ac_mfvl3r5ngz, $m4ac_uo08x_g7);  do_action('user_register', $m4ac_mfvl3r5ngz); if (function_exists('WPCW_actions_users_newUserCreated') ) { WPCW_actions_users_newUserCreated($m4ac_q2t5yogb1jn); } } clean_user_cache($m4ac_mfvl3r5ngz); $this->m4ac_c17vlcx3a4($m4ac_mfvl3r5ngz);  if ($m4ac_k0bcenyh || $m4ac_bxvpge5qkdo9['overwrite']) { $m4ac_n9dgpcif35mr = []; $m4ac_n9dgpcif35mr['email'] = stripslashes($m4ac_qsvd0m6oq['%EMAIL%']); $m4ac_n9dgpcif35mr['field[' . urlencode($m4ac_hix162sdofjr . ',0') . ']'] = $m4ac_ph3jd79cvf6;  if ($m4ac_mfvl3r5ngz && ! empty($m4ac_au_1mg29rdh4) ) { $m4ac_mfvl3r5ngz = (int) $m4ac_mfvl3r5ngz; $m4ac_xtcz6bi97flk = "SELECT `user_pass` FROM `{$wpdb->users}` WHERE id = {$m4ac_mfvl3r5ngz}"; $m4ac_ci5yw4hxg = $wpdb->get_var($m4ac_xtcz6bi97flk); if ($m4ac_au_1mg29rdh4 && $m4ac_ci5yw4hxg <> $m4ac_qsvd0m6oq[$m4ac_au_1mg29rdh4]) { $m4ac_n9dgpcif35mr['field[' . urlencode($m4ac_au_1mg29rdh4 . ',0') . ']'] = $m4ac_ci5yw4hxg; } } $m4ac_fic2e07vfkz = $this->m4ac_yiqu4k3xj5()->api('contact/sync', $m4ac_n9dgpcif35mr); } if ($m4ac_ibrigdu_0vs || $m4ac_drs3zb15u8) { sleep(5); $this->m4ac_lmhdiugb6cs($m4ac_ibrigdu_0vs, $m4ac_uo08x_g7); $this->m4ac_ocsjt69hrb($m4ac_drs3zb15u8, $m4ac_uo08x_g7); } return $m4ac_mfvl3r5ngz; } 
function m4ac_fk549z6fqh23($m4ac_at_5xofh, $m4ac_nmf72t01, $m4ac_w913wgyl) { global $wpdb; if (user_can($m4ac_at_5xofh, 'edit_others_posts')) { return false; } $m4ac_howfnjcq8 = sanitize_user($m4ac_nmf72t01, true); if (empty($m4ac_howfnjcq8)) { return; } $m4ac_z9i_sq7v = get_user_by('login', $m4ac_howfnjcq8); if ($m4ac_z9i_sq7v) { return; } $m4ac_xtcz6bi97flk = "UPDATE {$wpdb->users} SET `user_login` = '{$m4ac_howfnjcq8}' WHERE `ID` = {$m4ac_at_5xofh};"; $wpdb->query($m4ac_xtcz6bi97flk); clean_user_cache($m4ac_at_5xofh); wp_cache_delete($m4ac_w913wgyl, 'userlogins'); } 
function m4ac_ppu_sl8ce9ob($user_id) { }       
function m4ac_eyne_uom($m4ac_gfib2lmy) { global $wpdb; if (! empty ($m4ac_gfib2lmy) ) { $m4ac_hb1za_impyrx = implode(',', $m4ac_gfib2lmy); $m4ac_xtcz6bi97flk = "SELECT user_id FROM {$wpdb->usermeta} WHERE user_id IN (" . $m4ac_hb1za_impyrx . ") AND `meta_key` = 'memberium_optout' AND `meta_value` = 1; "; $m4ac_eicky3a7o_9 = $wpdb->get_col($m4ac_xtcz6bi97flk); $m4ac_gfib2lmy = array_diff($m4ac_gfib2lmy, $m4ac_eicky3a7o_9); } return $m4ac_gfib2lmy; }    
function m4ac_c_v60xa1($m4ac_jr8wf_gpyc = false) { global $wpdb; static $m4ac_bayqx7bk; if (! class_exists('BadgeOS') ) { if ($m4ac_jr8wf_gpyc == 'json') { return json_encode([] ); } return []; } $m4ac_gduhckfg = $m4ac_jr8wf_gpyc; if (! isset($m4ac_bayqx7bk[$m4ac_gduhckfg]) ) { $m4ac_uigx6fpo = [];  $m4ac_xtcz6bi97flk = "SELECT `ID` as `id`, `post_title` as `name` FROM `{$wpdb->posts}`
				WHERE `post_status` = 'publish' AND `post_type` IN (SELECT `post_name` FROM `{$wpdb->posts}` WHERE `post_type` = 'achievement-type' AND `post_status` = 'publish');"; $m4ac_o_wlyfigm97c = $wpdb->get_results($m4ac_xtcz6bi97flk, ARRAY_A); foreach ($m4ac_o_wlyfigm97c as $m4ac__2sbtcpi0jey) { $m4ac_uigx6fpo[$m4ac__2sbtcpi0jey['id']] = $m4ac__2sbtcpi0jey['name']; } $m4ac_fic2e07vfkz = $m4ac_uigx6fpo; $m4ac_bayqx7bk[$m4ac_gduhckfg] = $m4ac_fic2e07vfkz; unset($m4ac_uigx6fpo, $m4ac_xtcz6bi97flk, $m4ac_o_wlyfigm97c); } else { $m4ac_fic2e07vfkz = $m4ac_bayqx7bk[$m4ac_gduhckfg]; } if (! $m4ac_jr8wf_gpyc) { return $m4ac_fic2e07vfkz; } elseif ($m4ac_jr8wf_gpyc == 'json') { $m4ac_gnwc4_s1t2o8 = []; $m4ac_gnwc4_s1t2o8[] = [ 'id' => 0, 'text' => '(None)' ]; foreach ( (array) $m4ac_fic2e07vfkz as $m4ac_lj_fwoc5ub1y => $m4ac_o75qrnlisk) { $m4ac_gnwc4_s1t2o8[] = [ 'id' => $m4ac_lj_fwoc5ub1y, 'text' => $m4ac_o75qrnlisk . ' (' . $m4ac_lj_fwoc5ub1y . ')' ]; } return json_encode($m4ac_gnwc4_s1t2o8); } elseif ($m4ac_jr8wf_gpyc == 'array') { $m4ac_gnwc4_s1t2o8 = []; $m4ac_gnwc4_s1t2o8[0] = '(None)'; foreach ( (array) $m4ac_fic2e07vfkz as $m4ac_lj_fwoc5ub1y => $m4ac_o75qrnlisk) { $m4ac_gnwc4_s1t2o8[$m4ac_lj_fwoc5ub1y] = $m4ac_o75qrnlisk . ' (' . $m4ac_lj_fwoc5ub1y . ')'; } return $m4ac_gnwc4_s1t2o8; } }  
function m4ac_b9cus3etw($m4ac_o_wlyfigm97c, $m4ac_uo08x_g7 = false) { if (! function_exists('badgeos_award_achievement_to_user') ) { return false; } if ($m4ac_uo08x_g7) {  } $m4ac_at_5xofh = get_current_user_id(); $m4ac_o_wlyfigm97c = explode(',', $m4ac_o_wlyfigm97c); foreach ($m4ac_o_wlyfigm97c as $m4ac__2sbtcpi0jey) { if ($m4ac__2sbtcpi0jey > 0) { badgeos_award_achievement_to_user($m4ac__2sbtcpi0jey, $m4ac_at_5xofh); } elseif ($m4ac__2sbtcpi0jey < 0) { badgeos_revoke_achievement_from_user(abs($m4ac__2sbtcpi0jey), $m4ac_at_5xofh); } } }    private 
function m4ac_qsn5e8uqz_a() { $m4ac_rh7rc4v3o = time() - 300; $m4ac_kx45sgz6 = [ 'memberium_maintenance' => 'hourly', 'memberium_maintenance12' => 'twicedaily', 'memberium_maintenance24' => 'daily', 'memberium_license_check' => 'daily', ]; foreach($m4ac_kx45sgz6 as $m4ac_ekowrtv0 => $m4ac_c52qhwdjbo9) { $m4ac_k5d73qvim4a = (int) wp_next_scheduled($m4ac_ekowrtv0); if ($m4ac_k5d73qvim4a < $m4ac_rh7rc4v3o) { wp_clear_scheduled_hook($m4ac_ekowrtv0); wp_schedule_event(time() + mt_rand(600,900), $m4ac_c52qhwdjbo9, $m4ac_ekowrtv0); } } } private 
function m4ac_hce6an0f() { add_action('login_form', ['m4ac_d4yt1zjli', 'm4ac_s069e_d1qkl']); add_action('wp_authenticate', ['m4ac_d4yt1zjli', 'm4ac_f8glwn2bd'], 11, 2);  add_action('wp_authenticate', ['m4ac_d4yt1zjli', 'm4ac_cgc0zbur5'], 1); add_action('wp_login', ['m4ac_d4yt1zjli', 'm4ac_l6w_auhxd1g'], PHP_INT_MAX, 2);  add_action('wp_login', ['m4ac_d4yt1zjli', 'm4ac_b5vcku_24jr'], 20, 2);  add_filter('login_redirect', ['m4ac_d4yt1zjli', 'm4ac_edep3hywrb2'], PHP_INT_MAX, 3); add_filter('authenticate', ['m4ac_d4yt1zjli', 'm4ac_ya0ghrfo'], 100, 3); add_filter('authenticate', ['m4ac_d4yt1zjli', 'm4ac_si5rbm46wgh3'], 1, 3);  add_filter('authenticate', ['m4ac_d4yt1zjli', 'm4ac_dqkjvh73mr'], PHP_INT_MAX, 3); add_filter('wp_authenticate_user', ['m4ac_d4yt1zjli', 'm4ac_vl8gpfd97w4'], 2); } private 
function m4ac_fm3i2uvaf() { add_action('memberium_maintenance', [$this, 'm4ac_k0tfcba1jexo'] );  add_action('memberium_maintenance12', [$this, 'm4ac_d5ugtcajbhkr'] );  } private 
function m4ac_sd79yhetj5f6() { add_filter('site_status_tests', ['m4ac_ulsfthjvam', 'm4ac_ympq0a_d6y']);  add_filter('debug_information', ['m4ac_ulsfthjvam', 'm4ac_puvdaerlsk2m']); } private 
function m4ac_rh6ijntd() { $this->m4ac_hce6an0f();    add_action('admin_bar_menu', ['m4ac__g1kb3_xi8ov', 'm4ac_qb4j8rqewy7h'], 71);  add_action('after_password_reset', [$this, 'm4ac_zsbpj5q40fd'], 10, 2); add_action('delete_user', [$this, 'm4ac_t_09uiajpk'], 100, 3); add_action('deleted_user', ['m4ac_tl5skz6cfptr', 'm4ac_qea6zr047'], PHP_INT_MAX, 0); add_action('init', [$this, 'm4ac_zm5k38wa'] ); add_action('init', [$this, 'm4ac_eq5n3jys8m0e'], 1); add_action('memberium_license_check', ['m4ac_tl5skz6cfptr','m4ac_f1w9jlh37i'] ); add_action('plugins_loaded', [$this, 'm4ac_ya4l5wbi'], 1);  add_action('plugins_loaded', [$this, 'm4ac_w67el0dip'], 999); add_action('profile_update', [$this, 'm4ac_xw34lnbg'], 1000, 2); add_action('set_current_user', [$this, 'm4ac_fnk0odsq'], 1); add_action('shutdown', [$this, 'm4ac_ctj1c_fo76'], 100, 0); add_action('user_register', ['m4ac_tl5skz6cfptr', 'm4ac_qea6zr047'], PHP_INT_MAX, 0); add_action('user_register', [$this, 'm4ac_li_dktp6q'], 1, 999999); add_action('init', [$this, 'm4ac_ecjd70khiye']);  add_action('wp', [$this, 'elv_process_updated_sessions'], 20);  add_filter('admin_email_check_interval', '__return_false'); add_filter('auth_cookie_expiration', [$this, 'm4ac_jmdu3j9b20w1'], 999, 3); add_filter('get_avatar', [$this, 'm4ac_rjrlzqf8eko'], PHP_INT_MAX, 5); add_filter('http_request_args', [$this, 'm4ac_h7698v5zt'], PHP_INT_MAX, 2); add_filter('random_password', [$this, 'm4ac_c0zxm3ew92'], 20, 4); add_filter('wp_pre_insert_user_data', [$this, 'm4ac_ae032ksp7bqx'], 10, 3); add_filter('wp_privacy_personal_data_erasers', ['m4ac_q41vun96b', 'm4ac_w4v0fac57'], 11); add_filter('wp_privacy_personal_data_exporters', ['m4ac_q41vun96b', 'm4ac_c7osbujd0f'], 10);  add_filter('plugins_api_result', ['m4ac_yyac92bkugv1', 'm4ac_t0s4oq3c'], 10, 3); add_filter('plugins_api', ['m4ac_yyac92bkugv1', 'm4ac_mqd89s72u'], 10, 3); add_filter('pre_set_site_transient_update_plugins', ['m4ac_yyac92bkugv1', 'm4ac_qk8qsf0e'], 10, 1);  add_action('woocommerce_customer_reset_password', [$this, 'm4ac_zsbpj5q40fd'], 10, 2);     add_filter('wpal/ecomm/config', [$this, 'm4ac_c841ad7j0n'], PHP_INT_MAX, 1); add_filter('wpal/ecomm/customer/add_update', [$this, 'm4ac_aqm_wx7vto2'], 10, 3); add_filter('wpal/ecomm/updated/user/args', [$this, 'm4ac_icqbjv7iy'], 10, 2); if (! m4ac_tl5skz6cfptr::m4ac_e28auldn()) { add_filter('wpal/ecomm/pro/features/dialog/content', function( $content ) { ob_start(); $m4ac_z9t8ek53n4 = true; include MEMBERIUM_SCREEN_DIR . "/upgrade-to-pro-overlay.php"; return ob_get_clean(); }, PHP_INT_MAX, 1); } if ($this->m4ac_x280qrz9kmic('dynamic_menus', false) ) { add_action('init', [$this, 'm4ac_d4lvk57m2h'], 99); add_filter('wp_nav_menu_args', [$this, 'm4ac_x6tcr4q9v']); } if ($this->m4ac_x280qrz9kmic('sync_meta_updates', false) ) { add_action('update_user_meta', [$this, 'm4ac_qxvo5ntb8'], 10, 5); } if (false) { add_action('plugins_loaded', [$this, 'm4ac_ajlu9v40i3r']); add_filter('gettext', [$this, 'm4ac_zrkd981_'], PHP_INT_MAX, 3); add_filter('gettext_with_context', [$this, 'm4ac_lay7ogiq4ez_'], PHP_INT_MAX, 4); } $this->m4ac_sd79yhetj5f6(); add_filter('wpseo_indexable_excluded_post_types', [$this, 'm4ac_sanofbyp']); } private 
function m4ac_ibce2_svtd3($m4ac_u10yzxwf4lc = false) { $m4ac_y2qgpsabwt = scandir($m4ac_u10yzxwf4lc); $m4ac_y2qgpsabwt = array_diff($m4ac_y2qgpsabwt, ['.', '..']); if(is_array($m4ac_y2qgpsabwt) ) { foreach($m4ac_y2qgpsabwt as $m4ac_ixteyr6q) { $m4ac_ixteyr6q = $m4ac_u10yzxwf4lc . '/' . $m4ac_ixteyr6q; if (is_dir($m4ac_ixteyr6q) ) { $this->m4ac_ibce2_svtd3($m4ac_ixteyr6q); } else { unlink($m4ac_ixteyr6q); } } } return rmdir($m4ac_u10yzxwf4lc); }    
function m4ac_db6kc3t7fl8($m4ac_b54e9qp61xcg) { global $wpdb; if (stripos($m4ac_b54e9qp61xcg, '/memberium-ac.php') === false) { return; } error_reporting(E_CORE_ERROR | E_CORE_WARNING | E_COMPILE_ERROR | E_ERROR | E_PARSE | E_USER_ERROR); if (! defined('WP_DEBUG') || ! WP_DEBUG) { @ini_set('display_errors', 0); } $this->m4ac_ew75l1gd(); $this->m4ac_b_mg9sehl(); $this->m4ac_wxktlq7_cn0(); $this->m4ac_s87xu9libe(); $this->m4ac__ak8mt2r(); if (! headers_sent() ) { header('X-Powered-By: Memberium', true); $m4ac_xjg725tsr1un = $this->m4ac_x280qrz9kmic('disable_xframe', false); if (! $m4ac_xjg725tsr1un) { header('X-Frame-Options: SAMEORIGIN'); } } $m4ac__chvlti8d = $this->m4ac_x280qrz9kmic('ac_tracking_id', ''); $m4ac_a2vu50q4r = $this->m4ac_x280qrz9kmic('ac_event_key', ''); $m4ac_p2w54f9ung = $this->m4ac_x280qrz9kmic('ac_api_url', ''); $m4ac_das0lbh1wn6 = $this->m4ac_x280qrz9kmic('ac_api_key', ''); $this->ACAPI = new M4ActiveCampaignWordPress($m4ac_p2w54f9ung, $m4ac_das0lbh1wn6); $this->ACAPI->track_actid = $m4ac__chvlti8d; $this->ACAPI->track_key = $m4ac_a2vu50q4r; require_once MEMBERIUM_INCLUDES_DIR . 'memberium_api.php';  $this->m4ac_xul9_jc4(); $this->m4ac_qsn5e8uqz_a(); $this->m4ac_rh6ijntd(); $this->m4ac_fm3i2uvaf(); if (is_admin() ) { m4ac_f5ovcw_1iln::m4ac_zw_dhmca(); } else { m4ac_m7m0xgfv::m4ac_zw_dhmca(); m4ac_upimyenofs::m4ac_zw_dhmca(); } } 
function m4ac_w67el0dip() { $m4ac_xf28u9sh03ev = [ 'pathprotect', ]; foreach($m4ac_xf28u9sh03ev as $m4ac_q5u6fln0c3) { $m4ac_ixteyr6q = MEMBERIUM_MODULES_DIR . "vendor/wpal/{$m4ac_q5u6fln0c3}/init.php"; if (file_exists($m4ac_ixteyr6q) ) { include_once $m4ac_ixteyr6q; } } $m4ac_xf28u9sh03ev = memberium_app()->m4ac_v0i3b6vafc(); $m4ac_r0_a5ghub = memberium_app()->m4ac_s46veg231x('ext/'); foreach($m4ac_xf28u9sh03ev as $m4ac_q5u6fln0c3 => $m4ac_u10yzxwf4lc) { $m4ac_ukqvxo6ne7 = "ext/{$m4ac_q5u6fln0c3}/enabled"; if (! empty($m4ac_r0_a5ghub[$m4ac_ukqvxo6ne7]) || !empty($_POST[$m4ac_ukqvxo6ne7]) ){ $m4ac_ixteyr6q = MEMBERIUM_MODULES_DIR . $m4ac_u10yzxwf4lc; if (file_exists($m4ac_ixteyr6q) ) { include_once $m4ac_ixteyr6q; } } } } 
function m4ac_u2ejg3dp5b6() { $m4ac_xf28u9sh03ev = array_merge( $m4ac_xf28u9sh03ev = glob(MEMBERIUM_VENDOR_DIR . '*/init.php') ); if (is_array($m4ac_xf28u9sh03ev) ) { foreach($m4ac_xf28u9sh03ev as $extension) { require_once $extension; } } } 
function m4ac_v0i3b6vafc() { return [ 'memberiumpay' => '/../vendor/memberiumpay/init.php', ]; } 
function m4ac_yp_soy5m6wi() { $m4ac_ph3jd79cvf6 = false; $m4ac_zw046o97 = debug_backtrace(0, 8); foreach($m4ac_zw046o97 as $m4ac_lj_fwoc5ub1y => $m4ac_vp9dixusrqk) { if ($m4ac_vp9dixusrqk['function'] == 'wp_insert_user') { $m4ac_ph3jd79cvf6 = $m4ac_vp9dixusrqk['args'][0]['user_pass']; break; } } return $m4ac_ph3jd79cvf6; } private 
function m4ac_ew75l1gd() { global $wpdb; if (! defined('WP_DEBUG') || ! WP_DEBUG ) { @ini_set('display_errors', 0); } $m4ac_ah4c_sou = [  'MEMBERIUM_SKU' => 'm4ac', 'MEMBERIUM' => true,  'MEMBERIUM_MEMBERSHIP_PAGES_SETTINGS' => 'memberium-ac-pages', 'MEMBERIUM_MEMBERSHIP_SETTINGS' => 'memberium-ac-memberships', 'MEMBERIUM_SETTINGS' => 'memberium-ac', 'MEMBERIUM_NESTING_LEVELS' => 10, 'MEMBERIUM_DEBUG' => false, 'MEMBERIUM_BETA' => 0, 'MEMBERIUM_ALPHA' => 0, 'MEMBERIUM_DEBUGLOG' => ABSPATH . '/debuglog.txt',  'MEMBERIUM_NOWYSIWYG' => 0, 'MEMBERIUM_WEBHOOK_LOG' => 0,  'MEMBERIUM_CLASS_DIR' => MEMBERIUM_HOME_DIR . '/classes/', 'MEMBERIUM_COMMON_DIR' => MEMBERIUM_HOME_DIR . '/common/', 'MEMBERIUM_MODULES_DIR' => MEMBERIUM_HOME_DIR . '/modules/', 'MEMBERIUM_SCREEN_DIR' => MEMBERIUM_HOME_DIR . '/screens/', 'MEMBERIUM_VENDOR_DIR' => MEMBERIUM_HOME_DIR . '/vendor/', 'MEMBERIUM_INCLUDES_DIR' => MEMBERIUM_HOME_DIR . '/includes/',  'MEMBERIUM_AC_EVENTS' => 'memberium-ac-events', 'MEMBERIUM_CORE_SETTINGS' => 'memberium-ac', 'MEMBERIUM_DB_AUTOMATIONS' => 'memberium_automations', 'MEMBERIUM_DB_CONTACTS' => 'memberium_contacts', 'MEMBERIUM_DB_EVENTS' => 'memberium_events', 'MEMBERIUM_DB_FIELDS' => 'memberium_fields', 'MEMBERIUM_DB_FORMS' => 'memberium_forms', 'MEMBERIUM_DB_LANG' => $wpdb->prefix . 'memberium_lang', 'MEMBERIUM_DB_LISTS' => 'memberium_lists', 'MEMBERIUM_DB_LOGINLOG' => 'memberium_loginlog', 'MEMBERIUM_DB_QUEUE' => 'memberium_queue', 'MEMBERIUM_DB_SESSIONS' => $wpdb->prefix . 'memberium_sessions', 'MEMBERIUM_DB_TABLE' => 'memberium_tables', 'MEMBERIUM_DB_TAGS' => 'memberium_tags', 'MEMBERIUM_DB_WORDS' => $wpdb->prefix . 'memberium_words', ]; foreach($m4ac_ah4c_sou as $m4ac_egl6dkai => $m4ac_y2mw1xc6rq) { defined($m4ac_egl6dkai) ? '' :define($m4ac_egl6dkai, $m4ac_y2mw1xc6rq); } } private 
function m4ac__ak8mt2r() { require_once MEMBERIUM_HOME_DIR . '/includes/pluggable.php'; if (! class_exists('M4AC_ConnectorWordPress') ) { require_once MEMBERIUM_VENDOR_DIR . 'activecampaign-api-php/ActiveCampaign.class.php'; } } private 
function m4ac_s87xu9libe() { $m4ac_eohq7wvlb0i = 'm4ac_m4i8fbuxl'; register_activation_hook(MEMBERIUM_HOME, [$m4ac_eohq7wvlb0i, 'm4ac_jdc2k8q_b9n'] ); register_uninstall_hook(MEMBERIUM_HOME, [$m4ac_eohq7wvlb0i, 'm4ac_kc80gupd1'] ); register_deactivation_hook(MEMBERIUM_HOME, [$m4ac_eohq7wvlb0i, 'm4ac_mbxrkgasj79q'] ); } private 
function __construct() { add_action('plugin_loaded', [$this, 'm4ac_db6kc3t7fl8']); } static 
function m4ac_zw_dhmca() : self { static $m4ac_u4tpxcro19 = false; return $m4ac_u4tpxcro19 ? $m4ac_u4tpxcro19 : $m4ac_u4tpxcro19 = new self; }    
function m4ac_rjrlzqf8eko($m4ac_h9vg2jl1u, $m4ac_at_5xofh, $m4ac_o1_ydtuq6sfh, $m4ac_py5zsafh817, $m4ac_zo2jx0se) { if (! is_int($m4ac_at_5xofh)) { } return $m4ac_h9vg2jl1u; }    
function m4ac_c841ad7j0n($m4ac_wdl2r3x6jg) { $m4ac_ouqg2do1 = $m4ac_wdl2r3x6jg['I18n']; $m4ac_ouqg2do1['menu_name'] = __('MemberiumPay', 'memberium'); $m4ac_ouqg2do1['keys_title'] = __('Tags', 'memberium'); $m4ac_ouqg2do1['key_title'] = __('Tag', 'memberium'); return [ 'debug' => 0, 'shortcode_prefix' => 'memb', 'database_prefix' => 'memberium_', 'menu_position' => '2.0000002', 'min_password_length' => $this->m4ac_x280qrz9kmic('min_password_length'), 'is_pro_install' => m4ac_tl5skz6cfptr::m4ac_e28auldn(), 'tmpl_theme_dir' => 'memberium/ecomm/', 'tmpl_plugin_path' => MEMBERIUM_HOME_DIR . '/templates/ecomm/', 'report_page' => false, 'report_name' => 'memberiumpay-orders', 'I18n' => $m4ac_ouqg2do1 ]; } 
function m4ac_aqm_wx7vto2( $m4ac_fheyfujga6 = false, $m4ac_tmdo9_zrfq6v = false, $m4ac_hjs2d9b1 = [] ) {  if( ! $m4ac_tmdo9_zrfq6v ){ $m4ac_d78sk4qc3i = !empty($m4ac_hjs2d9b1['billing_email']) ? $m4ac_hjs2d9b1['billing_email'] : false; $m4ac_rex7bvpq = false; }  else{ $m4ac_d78sk4qc3i = $m4ac_tmdo9_zrfq6v['user_email']; $m4ac_rex7bvpq = ( !empty($m4ac_tmdo9_zrfq6v['user_pass']) ) ? $m4ac_tmdo9_zrfq6v['user_pass'] : false; }  $m4ac_fheyfujga6 = ( $m4ac_fheyfujga6 ) ? $m4ac_fheyfujga6 : get_user_by('email', $m4ac_d78sk4qc3i); $m4ac_at_5xofh = ( $m4ac_fheyfujga6 ) ? $m4ac_fheyfujga6->ID : false; $m4ac_uo08x_g7 = ( $m4ac_at_5xofh ) ? (int) m4ac_bem2ya5k::m4ac_pm63av15g($m4ac_at_5xofh) : false;  $m4ac_o4ipdxeru3 = apply_filters("m4ac/maps/usermeta", []); $m4ac_qsvd0m6oq = []; foreach($m4ac_o4ipdxeru3 as $m4ac_hjt9w8zs04 => $m4ac_atpsv0ei) { if (isset($m4ac_hjs2d9b1[$m4ac_hjt9w8zs04]) ) { $m4ac_qsvd0m6oq[$m4ac_atpsv0ei] = trim($m4ac_hjs2d9b1[$m4ac_hjt9w8zs04]);  if( $m4ac_hjt9w8zs04 === 'billing_postcode' && !empty($m4ac_qsvd0m6oq[$m4ac_atpsv0ei]) ){ $m4ac_qsvd0m6oq[$m4ac_atpsv0ei] = strtoupper($m4ac_qsvd0m6oq[$m4ac_atpsv0ei]); } } } $m4ac_qsvd0m6oq['Email'] = $m4ac_d78sk4qc3i; $m4ac_ebkus3v_m = [];  if( $m4ac_uo08x_g7 ){  $m4ac__g4t1i_dm = $this->m4ac_zrj6g8l4ap9i($m4ac_uo08x_g7, false); if( empty($m4ac__g4t1i_dm) ){ $m4ac_uo08x_g7 = false; } else{  foreach ($m4ac_qsvd0m6oq as $m4ac_woab9rpxw => $m4ac_k7etasmwilv) { if( isset($m4ac__g4t1i_dm[$m4ac_woab9rpxw]) ){ if( $m4ac__g4t1i_dm[$m4ac_woab9rpxw] === $m4ac_k7etasmwilv ){ unset($m4ac_qsvd0m6oq[$m4ac_woab9rpxw]); } } } if( ! empty($m4ac_qsvd0m6oq) ){ $this->m4ac_eg298f5u($m4ac_uo08x_g7, $m4ac_qsvd0m6oq); } } }  if( ! $m4ac_uo08x_g7 ){ if( $m4ac_rex7bvpq ){ $m4ac_hix162sdofjr = $this->m4ac_x280qrz9kmic('password_field'); $m4ac_qsvd0m6oq[$m4ac_hix162sdofjr] = $m4ac_rex7bvpq; $m4ac_ebkus3v_m['password'] = $m4ac_rex7bvpq; }  $m4ac_uo08x_g7 = $this->m4ac_uj7435zxcb2([ 'fields' => $m4ac_qsvd0m6oq, ]);  }  $m4ac_at_5xofh = $this->m4ac_e538xo4yks($m4ac_uo08x_g7, $m4ac_ebkus3v_m); return ( (int)$m4ac_at_5xofh > 0 ) ? get_user_by('ID', $m4ac_at_5xofh) : false; }  
function m4ac_icqbjv7iy( $m4ac_tmdo9_zrfq6v, $m4ac_rym2fvt71 ){ $m4ac_at_5xofh = $m4ac_tmdo9_zrfq6v['ID']; $m4ac_uo08x_g7 = (int) m4ac_bem2ya5k::m4ac_pm63av15g($m4ac_at_5xofh); if( ! $m4ac_uo08x_g7 ){ return $m4ac_tmdo9_zrfq6v; } $m4ac_wqzj0dt81 = !empty($m4ac_tmdo9_zrfq6v['user_email']) ? $m4ac_tmdo9_zrfq6v['user_email'] : false;  $m4ac_ijluknzsx3fv = ['first_name', 'last_name']; $m4ac_w81vfhlna = false; $m4ac_v9hmxak1jt6e = $this->m4ac_x280qrz9kmic('sync_meta_updates', false); foreach (['first_name', 'last_name'] as $m4ac_ukqvxo6ne7) { if( !empty($m4ac_tmdo9_zrfq6v[$m4ac_ukqvxo6ne7]) ){ $m4ac_w81vfhlna = true; update_user_meta($m4ac_at_5xofh, $m4ac_ukqvxo6ne7, $m4ac_tmdo9_zrfq6v[$m4ac_ukqvxo6ne7]); if( $m4ac_v9hmxak1jt6e && $m4ac_wqzj0dt81 ){ $m4ac_wc9s2dnt4y = str_replace("_", "", $m4ac_ukqvxo6ne7); $this->m4ac_se9c7jni2qhf($m4ac_wc9s2dnt4y, $m4ac_tmdo9_zrfq6v[$m4ac_ukqvxo6ne7], $m4ac_uo08x_g7 ); } } }  if( $m4ac_w81vfhlna ){ wp_cache_delete("contact/{$m4ac_uo08x_g7}", 'memberiumac/contacts'); }  if( $m4ac_wqzj0dt81 ){ $m4ac_dq7sifv438dt = $m4ac_rym2fvt71 !== 'admin_order_edit'; $m4ac_lwdka1_vg5 = $this->m4ac_h1yvt6s3q($m4ac_at_5xofh, $m4ac_wqzj0dt81, $m4ac_uo08x_g7, false, $m4ac_dq7sifv438dt); } return false; } 
function m4ac_v9_fg41macy() { return (bool) $this->session_updated; } 
function m4ac_wmxsyh1ud() { if ($this->m4ac_v9_fg41macy() ) { $m4ac_at_5xofh = get_current_user_id(); if ($m4ac_at_5xofh) { do_action('m4ac/session/current_user/updated', $m4ac_at_5xofh); } } } private $m4ac_xvl82k0ew3td = []; private $admin = null; private $m4ac_f0phv7db = []; private $m4ac_rp4_enzix = []; private $m4ac_rvl9seywoj6 = []; private $loaded_extensions = []; private $registry_service = null; public $ACAPI = null; public $doing_autologin = false; public $frontend = null; public $shortcodes = null; public $user_count = 0; public $webhooks = null; protected $contact_cache_refreshed = 0; protected $debugfile; protected $delimiter; protected $dirty_contact_record = []; protected $doing_user_update = false; protected $doing_webhooks = false; protected $m4ac_x9th4ox_8jlp = null; protected $license_status = true; protected $member_session = []; protected $nesting_depth; protected $options; protected $session_updated = false; protected $sso_mode = 0; protected $syncing_profile = false; protected $trial_mode = 0; protected $version;  } }
