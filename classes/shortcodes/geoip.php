<?php
/**
 * Copyright (c) 2012-2021 David J Bullock
 * Web Power and Light
 */

 if (class_exists('m4ac_c6rqypiacz4') ) { final 
class m4ac_d12damx34c { static 
function m4ac_f0yejubg($m4ac_c1m92xtgl8z, $m4ac_c4qc56391fd = null, $tag) { if (! m4ac_tl5skz6cfptr::m4ac_e28auldn() ) { return; } if (is_feed() ) { return; }    $m4ac_wdl2r3x6jg = [ 'after' => '', 'before' => '', 'capture' => '', 'default' => '', 'field' => 'country_name', 'htmlattr' => '', 'ip_address' => m4ac_p58mfx3cua::m4ac_teq1zlwih6(), 'provider' => '', 'txtfmt' => '', ]; if (isset($m4ac_c1m92xtgl8z[0]) && $m4ac_c1m92xtgl8z[0] == 'showatts') { return implode(',', array_keys($m4ac_wdl2r3x6jg) ); } $m4ac_c1m92xtgl8z = shortcode_atts($m4ac_wdl2r3x6jg, $m4ac_c1m92xtgl8z, 'memberium'); $m4ac_c1m92xtgl8z['provider'] = strtolower(trim($m4ac_c1m92xtgl8z['provider']) ); $m4ac_c1m92xtgl8z['field'] = strtolower(trim($m4ac_c1m92xtgl8z['field']) ); $m4ac_c1m92xtgl8z['ip_address'] = empty($m4ac_c1m92xtgl8z['ip_address']) ? m4ac_p58mfx3cua::m4ac_teq1zlwih6() : $m4ac_c1m92xtgl8z['ip_address']; $m4ac_pnc_oz4x0 = m4ac_xocn42gpf7d::m4ac__ovj3y9l($m4ac_c1m92xtgl8z['ip_address'], $m4ac_c1m92xtgl8z['provider']); if ($m4ac_c1m92xtgl8z['field'] == 'country') $m4ac_c1m92xtgl8z['field'] = 'country_name'; if ($m4ac_c1m92xtgl8z['field'] == 'province') $m4ac_c1m92xtgl8z['field'] = 'region_name'; if ($m4ac_c1m92xtgl8z['field'] == 'region') $m4ac_c1m92xtgl8z['field'] = 'region_name'; if ($m4ac_c1m92xtgl8z['field'] == 'state') $m4ac_c1m92xtgl8z['field'] = 'region_name'; $m4ac_ihnr7cyv = isset($m4ac_pnc_oz4x0[$m4ac_c1m92xtgl8z['field']]) ? $m4ac_pnc_oz4x0[$m4ac_c1m92xtgl8z['field']] : $m4ac_c1m92xtgl8z['default']; $m4ac_pa2k7635qor = htmlspecialchars($m4ac_ihnr7cyv); return m4ac_audvsgbhpw::m4ac_teqln8w23g(false, $m4ac_pa2k7635qor, $m4ac_c1m92xtgl8z['txtfmt'], $m4ac_c1m92xtgl8z['capture'], $m4ac_c1m92xtgl8z['htmlattr'], $m4ac_c1m92xtgl8z['before'], $m4ac_c1m92xtgl8z['after']); $m4ac_wdl2r3x6jg = [ 'after' => '', 'before' => '', 'capture' => '', 'default' => '', 'field' => 'country_name', 'htmlattr' => '', 'provider' => 'freegeoip', 'txtfmt' => '', ]; $m4ac_c1m92xtgl8z = shortcode_atts($m4ac_wdl2r3x6jg, $m4ac_c1m92xtgl8z, 'memberium'); $m4ac_c1m92xtgl8z['provider'] = strtolower(trim($m4ac_c1m92xtgl8z['provider']) ); $m4ac_c1m92xtgl8z['field'] = strtolower(trim($m4ac_c1m92xtgl8z['field']) ); if ($m4ac_c1m92xtgl8z['provider'] == 'geoip' && ! function_exists('geoip_detect_get_info_from_ip') ) { $m4ac_c1m92xtgl8z['provider'] = 'freegeoip'; } if ($m4ac_c1m92xtgl8z['field'] == 'country') { $m4ac_c1m92xtgl8z['field'] = 'country_name'; } if ($m4ac_c1m92xtgl8z['field'] == 'province') { $m4ac_c1m92xtgl8z['field'] = 'region_name'; } if ($m4ac_c1m92xtgl8z['field'] == 'region') { $m4ac_c1m92xtgl8z['field'] = 'region_name'; } if ($m4ac_c1m92xtgl8z['field'] == 'state') { $m4ac_c1m92xtgl8z['field'] = 'region_name'; } $m4ac_ihnr7cyv = ''; $m4ac_iur0o3zyt = m4ac_p58mfx3cua::m4ac_teq1zlwih6(); $m4ac_n2xb45kfup = 'geoip::' . $m4ac_c1m92xtgl8z['provider'] . '::' . $m4ac_iur0o3zyt; $m4ac_pnc_oz4x0 = get_transient($m4ac_n2xb45kfup); if ($m4ac_c1m92xtgl8z['provider'] == 'geoip') {  if (! $m4ac_pnc_oz4x0) { $m4ac_pnc_oz4x0 = geoip_detect_get_info_from_ip($m4ac_iur0o3zyt); } $m4ac_ihnr7cyv = property_exists($m4ac_pnc_oz4x0, $m4ac_c1m92xtgl8z['field']) ? $m4ac_pnc_oz4x0->$m4ac_c1m92xtgl8z['field'] : ''; } elseif ($m4ac_c1m92xtgl8z['provider'] == 'hostip') {        if (! $m4ac_pnc_oz4x0) { $m4ac_pnc_oz4x0 = file_get_contents('https://api.hostip.info/get_json.php?position=true&ip=' . $m4ac_iur0o3zyt); $m4ac_pnc_oz4x0 = json_decode($m4ac_pnc_oz4x0, true); } $m4ac_ihnr7cyv = isset($m4ac_pnc_oz4x0[$m4ac_c1m92xtgl8z['field']]) ? $m4ac_pnc_oz4x0[$m4ac_c1m92xtgl8z['field']] : ''; } elseif ($m4ac_c1m92xtgl8z['provider'] == 'freegeoip') {             if (! $m4ac_pnc_oz4x0) { $m4ac_pnc_oz4x0 = file_get_contents('https://freegeoip.net/json/' . $m4ac_iur0o3zyt); $m4ac_pnc_oz4x0 = json_decode($m4ac_pnc_oz4x0, true); } $m4ac_ihnr7cyv = (isset($m4ac_pnc_oz4x0[$m4ac_c1m92xtgl8z['field']]) ) ? $m4ac_pnc_oz4x0[$m4ac_c1m92xtgl8z['field']] : ''; } set_transient($m4ac_n2xb45kfup, $m4ac_pnc_oz4x0, DAY_IN_SECONDS); if ($m4ac_ihnr7cyv == '') { $m4ac_ihnr7cyv = $m4ac_c1m92xtgl8z['default']; } $m4ac_pa2k7635qor = htmlspecialchars($m4ac_ihnr7cyv); return m4ac_audvsgbhpw::m4ac_teqln8w23g(false, $m4ac_pa2k7635qor, $m4ac_c1m92xtgl8z['txtfmt'], $m4ac_c1m92xtgl8z['capture'], $m4ac_c1m92xtgl8z['htmlattr'], $m4ac_c1m92xtgl8z['before'], $m4ac_c1m92xtgl8z['after']); } } }
