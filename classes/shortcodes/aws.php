<?php
/**
 * Copyright (c) 2017-2021 David J Bullock
 * Web Power and Light, LLC
 * https://webpowerandlight.com
 * support@webpowerandlight.com
 *
 */

 if (class_exists('m4ac_c6rqypiacz4') ) { final 
class m4ac_iolwcy2dtx85 { static $m4ac_lhds1tvrn = 4; static $m4ac_qde196lj3nw0 = 'us-east-1'; static 
function m4ac_w4tla6nizfq3($m4ac_c1m92xtgl8z, $m4ac_c4qc56391fd = null, $m4ac_kp6zrjntmf78) { if (! m4ac_tl5skz6cfptr::m4ac_e28auldn() && ! memberium_app()->m4ac_k6b8c0f7g5() ) { return site_url(); } if (isset($m4ac_c1m92xtgl8z[0]) && $m4ac_c1m92xtgl8z[0] == 'showatts') { return 'access_key,after,automation_id,before,bucket,debug,direct_link,expiring,host,htmlattr,object,profile,protocol,region,require_login,secret_key,tag_id,token_id,version'; } $m4ac_udrbf_gmtjc = $m4ac_c1m92xtgl8z; $m4ac_c1m92xtgl8z['profile'] = isset($m4ac_c1m92xtgl8z['profile']) ? strtolower(trim($m4ac_c1m92xtgl8z['profile'])) : self::$m4ac_qde196lj3nw0; $m4ac_s2md9g6f = self::m4ac_e6xrhbuncei($m4ac_c1m92xtgl8z['profile']); if ($m4ac_s2md9g6f) { $m4ac_mcgw3_2ib8u = $m4ac_c1m92xtgl8z['profile']; $m4ac_u9bnjrwc0_ = $m4ac_s2md9g6f['bucket']; $m4ac_aqabpn89l = (int) $m4ac_s2md9g6f['expiration']; $m4ac_ak_b81p6 = $m4ac_s2md9g6f['host']; $m4ac_eq1i8v9csb = isset($m4ac_s2md9g6f['region']) ? $m4ac_s2md9g6f['region'] : self::$m4ac_qde196lj3nw0; $m4ac_s70lygjh = $m4ac_s2md9g6f['access_key']; $m4ac_r927lpiu = $m4ac_s2md9g6f['secret_key']; } else { $m4ac_mcgw3_2ib8u = ''; $m4ac_u9bnjrwc0_ = ''; $m4ac_aqabpn89l = 5; $m4ac_eq1i8v9csb = self::$m4ac_qde196lj3nw0; $m4ac_ak_b81p6 = ''; $m4ac_s70lygjh = ''; $m4ac_r927lpiu = ''; } $m4ac_wdl2r3x6jg = [ 'access_key' => $m4ac_s70lygjh, 'after' => '', 'automation_id' => '', 'before' => '', 'bucket' => $m4ac_u9bnjrwc0_, 'debug' => 0, 'direct_link' => 'no',  'expiring' => $m4ac_aqabpn89l, 'host' => $m4ac_ak_b81p6, 'htmlattr' => '', 'object' => '', 'profile' => $m4ac_mcgw3_2ib8u, 'protocol' => 'https', 'region' => $m4ac_eq1i8v9csb, 'require_login' => 'no',  'secret_key' => $m4ac_r927lpiu, 'tag_id' => '', 'token_id' => '', 'version' => self::$m4ac_lhds1tvrn, ]; $m4ac_c1m92xtgl8z = shortcode_atts($m4ac_wdl2r3x6jg, $m4ac_c1m92xtgl8z, 'memberium'); $m4ac_pa2k7635qor = '';  if (empty($m4ac_c1m92xtgl8z['access_key']) || empty($m4ac_c1m92xtgl8z['secret_key']) ) { return ''; } if (strtolower(trim($m4ac_c1m92xtgl8z['direct_link']) ) == 'no') { $m4ac_lp50ub_1 = []; $m4ac_lp50ub_1['automation_id'] = $m4ac_c1m92xtgl8z['automation_id']; $m4ac_lp50ub_1['debug'] = $m4ac_c1m92xtgl8z['debug']; $m4ac_lp50ub_1['expiring'] = $m4ac_c1m92xtgl8z['expiring']; $m4ac_lp50ub_1['object'] = $m4ac_c1m92xtgl8z['object']; $m4ac_lp50ub_1['profile'] = $m4ac_c1m92xtgl8z['profile']; $m4ac_lp50ub_1['protocol'] = $m4ac_c1m92xtgl8z['protocol']; $m4ac_lp50ub_1['region'] = $m4ac_c1m92xtgl8z['region']; $m4ac_lp50ub_1['require_login'] = $m4ac_c1m92xtgl8z['require_login']; $m4ac_lp50ub_1['tag_id'] = $m4ac_c1m92xtgl8z['tag_id']; $m4ac_lp50ub_1['token_id'] = $m4ac_c1m92xtgl8z['token_id']; $m4ac_lp50ub_1['version'] = $m4ac_c1m92xtgl8z['version']; $m4ac_yvyosepl6 = base64_encode(serialize($m4ac_lp50ub_1) ); $m4ac_atr94xdeg3 = '?memb_s3link=' . $m4ac_yvyosepl6; $m4ac_pzocy3nw = 'verification'; $m4ac_lp50ub_1 = $m4ac_yvyosepl6; $m4ac_rzlromjufc = wp_nonce_url($m4ac_atr94xdeg3, $m4ac_lp50ub_1, $m4ac_pzocy3nw); $m4ac_tvdljq4ki0 = site_url() . $m4ac_rzlromjufc; $m4ac_tvdljq4ki0 = $_SERVER['REQUEST_URI'] . $m4ac_rzlromjufc; } else { if ($m4ac_c1m92xtgl8z['version'] == 3) { $m4ac_tvdljq4ki0 = self::m4ac_zb57no8wf($m4ac_c1m92xtgl8z['access_key'], $m4ac_c1m92xtgl8z['secret_key'], $m4ac_c1m92xtgl8z['protocol'], $m4ac_c1m92xtgl8z['host'], $m4ac_c1m92xtgl8z['bucket'], $m4ac_c1m92xtgl8z['object'], $m4ac_c1m92xtgl8z['expiring']); } elseif ($m4ac_c1m92xtgl8z['version'] == 4) { $m4ac_tvdljq4ki0 = self::m4ac_b97pbgj5($m4ac_c1m92xtgl8z['access_key'], $m4ac_c1m92xtgl8z['secret_key'], $m4ac_c1m92xtgl8z['bucket'], $m4ac_c1m92xtgl8z['object'], $m4ac_c1m92xtgl8z['expiring'], $m4ac_c1m92xtgl8z['region']); } } if (strtolower($m4ac_c1m92xtgl8z['htmlattr']) == 'all') { $m4ac_ndjylcna3 = [ 'automation_id', 'after', 'before', 'bucket', 'debug', 'direct_link', 'expiring', 'htmlattr', 'object', 'profile', 'protocol', 'require_login', 'tag_id', 'token_id', ]; $m4ac_pa2k7635qor = "<a href='{$m4ac_tvdljq4ki0}' "; foreach ($m4ac_udrbf_gmtjc as $m4ac_egl6dkai => $m4ac_y2mw1xc6rq) { if (! empty($m4ac_udrbf_gmtjc[$m4ac_egl6dkai]) && ! in_array($m4ac_egl6dkai, $m4ac_ndjylcna3) ) { $m4ac_pa2k7635qor .= ' ' . $m4ac_egl6dkai . '="' . $m4ac_y2mw1xc6rq . '" '; } } $m4ac_pa2k7635qor .= ">{$m4ac_c4qc56391fd}</a>"; $m4ac_c1m92xtgl8z['htmlattr'] = ''; } else { $m4ac_pa2k7635qor = $m4ac_tvdljq4ki0; } return m4ac_audvsgbhpw::m4ac_teqln8w23g(false, $m4ac_pa2k7635qor, '', '', $m4ac_c1m92xtgl8z['htmlattr'], $m4ac_c1m92xtgl8z['before'], $m4ac_c1m92xtgl8z['after']); } static 
function m4ac_fsuc038wf($m4ac_c1m92xtgl8z, $m4ac_c4qc56391fd = null, $m4ac_kp6zrjntmf78) { static $m4ac_tys7mhvi9c86 = 1; if (! m4ac_tl5skz6cfptr::m4ac_e28auldn() && ! memberium_app()->m4ac_k6b8c0f7g5() ) { return ''; } if (isset($m4ac_c1m92xtgl8z[0]) && $m4ac_c1m92xtgl8z[0] == 'showatts') { return 'access_key,autoplay,bucket,controls,css_id,direct_link,download,expiring,height,host,loop,muted,object,poster,preload,profile,protocol,require_login,secret_key,src,width,region,version'; } $m4ac_c1m92xtgl8z['profile'] = isset($m4ac_c1m92xtgl8z['profile']) ? strtolower(trim($m4ac_c1m92xtgl8z['profile'])) : self::$m4ac_qde196lj3nw0; $m4ac_s2md9g6f = self::m4ac_e6xrhbuncei($m4ac_c1m92xtgl8z['profile']); if ($m4ac_s2md9g6f) { $m4ac_mcgw3_2ib8u = $m4ac_c1m92xtgl8z['profile']; $m4ac_u9bnjrwc0_ = $m4ac_s2md9g6f['bucket']; $m4ac_aqabpn89l = (int) $m4ac_s2md9g6f['expiration']; $m4ac_ak_b81p6 = $m4ac_s2md9g6f['host']; $m4ac_eq1i8v9csb = isset($m4ac_s2md9g6f['region']) ? $m4ac_s2md9g6f['region'] : self::$m4ac_qde196lj3nw0; $m4ac_s70lygjh = $m4ac_s2md9g6f['access_key']; $m4ac_r927lpiu = $m4ac_s2md9g6f['secret_key']; } else { $m4ac_mcgw3_2ib8u = ''; $m4ac_u9bnjrwc0_ = ''; $m4ac_aqabpn89l = 5; $m4ac_eq1i8v9csb = self::$m4ac_qde196lj3nw0; $m4ac_ak_b81p6 = ''; $m4ac_s70lygjh = ''; $m4ac_r927lpiu = ''; } $m4ac_wdl2r3x6jg = [ 'access_key' => $m4ac_s70lygjh, 'autoplay' => '', 'bucket' => $m4ac_u9bnjrwc0_, 'controls' => '', 'css_id' => '', 'direct_link' => 'no',  'download' => 0, 'expiring' => $m4ac_aqabpn89l, 'height' => 0, 'host' => $m4ac_ak_b81p6, 'loop' => '', 'muted' => '', 'object' => '', 'poster' => '', 'preload' => '', 'profile' => $m4ac_mcgw3_2ib8u, 'protocol' => 'https', 'require_login' => 'no',  'secret_key' => $m4ac_r927lpiu, 'src' => '', 'width' => 0, 'region' => $m4ac_eq1i8v9csb, 'version' => self::$m4ac_lhds1tvrn, ]; $m4ac_c1m92xtgl8z = shortcode_atts($m4ac_wdl2r3x6jg, $m4ac_c1m92xtgl8z, 'memberium'); $m4ac_c1m92xtgl8z['download'] = m4ac_audvsgbhpw::m4ac_nw4k98ogv($m4ac_c1m92xtgl8z['download'], false); $m4ac_c1m92xtgl8z['profile'] = strtolower(trim($m4ac_c1m92xtgl8z['profile']) ); $m4ac_d3bwc5k09p6 = get_option('memberium_remote_files', [] ); $m4ac_g_sevcjrm94 = ''; $m4ac_pbk61dwjnxi = '';  if ($m4ac_c1m92xtgl8z['version'] == 3) { $m4ac_atr94xdeg3 = self::m4ac_zb57no8wf($m4ac_c1m92xtgl8z['access_key'], $m4ac_c1m92xtgl8z['secret_key'], $m4ac_c1m92xtgl8z['protocol'], $m4ac_c1m92xtgl8z['host'], $m4ac_c1m92xtgl8z['bucket'], $m4ac_c1m92xtgl8z['object'], $m4ac_c1m92xtgl8z['expiring']); } elseif ($m4ac_c1m92xtgl8z['version'] == 4) { $m4ac_atr94xdeg3 = self::m4ac_b97pbgj5($m4ac_c1m92xtgl8z['access_key'], $m4ac_c1m92xtgl8z['secret_key'], $m4ac_c1m92xtgl8z['bucket'], $m4ac_c1m92xtgl8z['object'], $m4ac_c1m92xtgl8z['expiring'], $m4ac_c1m92xtgl8z['region']); } $m4ac_mc_7vj5y = ''; if (! empty($m4ac_c1m92xtgl8z['width']) ) { $m4ac_mc_7vj5y = ' style="width:' . $m4ac_c1m92xtgl8z['width'] . 'px;" '; } $m4ac_pbk61dwjnxi .= '<div '. $m4ac_mc_7vj5y .' class="wp-video">'; $m4ac_pbk61dwjnxi .= '<audio class="wp-audio-shortcode" id="secureaudio-' . $m4ac_tys7mhvi9c86 . '" '; if (! empty($m4ac_c1m92xtgl8z['width']) ) { $m4ac_pbk61dwjnxi .= ' width="' . $m4ac_c1m92xtgl8z['width'] . '" '; } if (! empty($m4ac_c1m92xtgl8z['height']) ) { $m4ac_pbk61dwjnxi .= ' height="' . $m4ac_c1m92xtgl8z['height'] . '" '; } if (! empty($m4ac_c1m92xtgl8z['preload']) ) { $m4ac_pbk61dwjnxi .= ' autobuffer="autobuffer" preload="' . $m4ac_c1m92xtgl8z['preload'] . '" '; } if (! empty($m4ac_c1m92xtgl8z['controls']) ) { $m4ac_pbk61dwjnxi .= ' controls="controls" '; } if (! empty($m4ac_c1m92xtgl8z['autoplay']) ) { $m4ac_pbk61dwjnxi .= ' autoplay="autoplay" '; } if (! empty($m4ac_c1m92xtgl8z['muted']) ) { $m4ac_pbk61dwjnxi .= ' muted="muted" '; } if (! empty($m4ac_c1m92xtgl8z['poster']) ) { $m4ac_pbk61dwjnxi .= ' poster="' . $m4ac_c1m92xtgl8z['poster'] . '" '; } if (! empty($m4ac_c1m92xtgl8z['loop']) ) { $m4ac_pbk61dwjnxi .= ' loop="' . $m4ac_c1m92xtgl8z['loop'] . '" '; } if (! $m4ac_c1m92xtgl8z['download']) { $m4ac_pbk61dwjnxi .= ' controlsList="nodownload" '; } $m4ac_pbk61dwjnxi .= '>'; $m4ac_pbk61dwjnxi .= '<source src="' . $m4ac_atr94xdeg3 .'" />'; $m4ac_pbk61dwjnxi .= '</audio></div>'; $m4ac_tys7mhvi9c86++; return $m4ac_pbk61dwjnxi; } static 
function m4ac_w5hde80simz9($m4ac_c1m92xtgl8z, $m4ac_c4qc56391fd = null, $m4ac_kp6zrjntmf78) { static $css_id = 0; if (! m4ac_tl5skz6cfptr::m4ac_e28auldn() && ! memberium_app()->m4ac_k6b8c0f7g5() ) { return ''; } if (isset($m4ac_c1m92xtgl8z[0]) && $m4ac_c1m92xtgl8z[0] == 'showatts') { return 'access_key,autoplay,bucket,controls,direct_link,expiring,height,host,loop,muted,object,poster,preload,profile,protocol,require_login,secret_key,src,width,region,version'; } $m4ac_c1m92xtgl8z['profile'] = isset($m4ac_c1m92xtgl8z['profile']) ? strtolower(trim($m4ac_c1m92xtgl8z['profile'])) : self::$m4ac_qde196lj3nw0; $m4ac_s2md9g6f = self::m4ac_e6xrhbuncei($m4ac_c1m92xtgl8z['profile']); if ($m4ac_s2md9g6f) { $m4ac_mcgw3_2ib8u = $m4ac_c1m92xtgl8z['profile']; $m4ac_u9bnjrwc0_ = $m4ac_s2md9g6f['bucket']; $m4ac_aqabpn89l = (int) $m4ac_s2md9g6f['expiration']; $m4ac_ak_b81p6 = $m4ac_s2md9g6f['host']; $m4ac_eq1i8v9csb = isset($m4ac_s2md9g6f['region']) ? $m4ac_s2md9g6f['region'] : self::$m4ac_qde196lj3nw0; $m4ac_s70lygjh = $m4ac_s2md9g6f['access_key']; $m4ac_r927lpiu = $m4ac_s2md9g6f['secret_key']; } else { $m4ac_mcgw3_2ib8u = ''; $m4ac_u9bnjrwc0_ = ''; $m4ac_aqabpn89l = 5; $m4ac_eq1i8v9csb = self::$m4ac_qde196lj3nw0; $m4ac_ak_b81p6 = ''; $m4ac_s70lygjh = ''; $m4ac_r927lpiu = ''; } $m4ac_wdl2r3x6jg = [ 'access_key' => $m4ac_s70lygjh, 'autoplay' => '', 'bucket' => $m4ac_u9bnjrwc0_, 'controls' => '', 'direct_link' => 'no',  'expiring' => $m4ac_aqabpn89l, 'height' => 0, 'host' => '', 'loop' => 'off', 'muted' => '', 'object' => '', 'poster' => '', 'preload' => '', 'profile' => $m4ac_mcgw3_2ib8u, 'protocol' => 'https', 'require_login' => 'no',  'secret_key' => $m4ac_r927lpiu, 'src' => '', 'width' => 0, 'region' => $m4ac_eq1i8v9csb, 'version' => self::$m4ac_lhds1tvrn, ]; $m4ac_c1m92xtgl8z = shortcode_atts($m4ac_wdl2r3x6jg, $m4ac_c1m92xtgl8z, 'memberium'); $m4ac_d3bwc5k09p6 = get_option('memberium_remote_files', [] ); $m4ac_g_sevcjrm94 = ''; $m4ac_pbk61dwjnxi = '';  if ($m4ac_c1m92xtgl8z['version'] == 3) {  $m4ac_atr94xdeg3 = self::m4ac_zb57no8wf($m4ac_c1m92xtgl8z['access_key'], $m4ac_c1m92xtgl8z['secret_key'], $m4ac_c1m92xtgl8z['protocol'], $m4ac_c1m92xtgl8z['host'], $m4ac_c1m92xtgl8z['bucket'], $m4ac_c1m92xtgl8z['object'], $m4ac_c1m92xtgl8z['expiring']); } elseif ($m4ac_c1m92xtgl8z['version'] == 4) { $m4ac_atr94xdeg3 = self::m4ac_b97pbgj5($m4ac_c1m92xtgl8z['access_key'], $m4ac_c1m92xtgl8z['secret_key'], $m4ac_c1m92xtgl8z['bucket'], $m4ac_c1m92xtgl8z['object'], $m4ac_c1m92xtgl8z['expiring'], $m4ac_c1m92xtgl8z['region']); } if ($m4ac_c1m92xtgl8z['width'] > 0) { $m4ac_mc_7vj5y = ' style="width:' . $m4ac_c1m92xtgl8z['width'] . 'px;" '; } $m4ac_pbk61dwjnxi .= '<div '. $m4ac_mc_7vj5y .' class="wp-video">'; $m4ac_pbk61dwjnxi .= '<video class="wp-video-shortcode" id="securevideo-' . $css_id . '" '; if (! empty($m4ac_c1m92xtgl8z['width'])) { $m4ac_pbk61dwjnxi .= ' width="' . $m4ac_c1m92xtgl8z['width'] . '" '; } if (! empty($m4ac_c1m92xtgl8z['height']) ) { $m4ac_pbk61dwjnxi .= ' height="' . $m4ac_c1m92xtgl8z['height'] . '" '; } if (! empty($m4ac_c1m92xtgl8z['preload']) ) { $m4ac_pbk61dwjnxi .= ' autobuffer="autobuffer" preload="' . $m4ac_c1m92xtgl8z['preload'] . '" '; } if (! empty($m4ac_c1m92xtgl8z['controls']) ) { $m4ac_pbk61dwjnxi .= ' controls="controls" '; } if (! empty($m4ac_c1m92xtgl8z['autoplay']) ) { $m4ac_pbk61dwjnxi .= ' autoplay="autoplay" '; } if (! empty($m4ac_c1m92xtgl8z['muted']) ) { $m4ac_pbk61dwjnxi .= ' muted="muted" '; } if (! empty($m4ac_c1m92xtgl8z['poster']) ) { $m4ac_pbk61dwjnxi .= ' poster="' . $m4ac_c1m92xtgl8z['poster'] . '" '; } if (! empty($m4ac_c1m92xtgl8z['loop']) ) { $m4ac_pbk61dwjnxi .= ' loop="' . $m4ac_c1m92xtgl8z['loop'] . '" '; } $m4ac_pbk61dwjnxi .= '>'; $m4ac_pbk61dwjnxi .= '<source src="' . $m4ac_atr94xdeg3 .'" />'; $m4ac_pbk61dwjnxi .= '</video></div>'; $css_id++; return $m4ac_pbk61dwjnxi; } static 
function m4ac_v9_f0jsm6obt() { if (! wp_verify_nonce($_GET['verification'], $_GET['memb_s3link']) ) { return ''; } if (isset($m4ac_c1m92xtgl8z[0]) && $m4ac_c1m92xtgl8z[0] == 'showatts') { return 'automation_id,cachebust,debug,expiring,object,profile,protocol,region,reqire_login,tag_id,token_id,version'; } $m4ac_d3bwc5k09p6 = get_option('memberium_remote_files', [] ); $m4ac_co_g85z1qmw = function_exists('is_user_logged_in') && is_user_logged_in(); $m4ac_lp50ub_1 = unserialize(base64_decode($_GET['memb_s3link']) ); $m4ac_ya4km5wlsd = (boolean) $m4ac_lp50ub_1['debug'] == 1; if ($m4ac_ya4km5wlsd) { echo __LINE__, ' - Protocol:       ', $m4ac_lp50ub_1['protocol'], '<br />'; echo __LINE__, ' - Region:         ', $m4ac_lp50ub_1['region'], '<br />'; echo __LINE__, ' - Require Login?: ', $m4ac_lp50ub_1['require_login'], '<br />'; echo __LINE__, ' - Set Automation: ', $m4ac_lp50ub_1['automation_id'], '<br />'; echo __LINE__, ' - Set Cache Bust: ', $m4ac_lp50ub_1['cachebust'], '<br />'; echo __LINE__, ' - Set Debug:      ', $m4ac_lp50ub_1['debug'], '<br />'; echo __LINE__, ' - Set Expiration: ', $m4ac_lp50ub_1['expiring'], ' seconds<br />'; echo __LINE__, ' - Set Object:     ', $m4ac_lp50ub_1['object'], '<br />'; echo __LINE__, ' - Set Profile:    ', $m4ac_lp50ub_1['profile'], '<br />'; echo __LINE__, ' - Set Region:     ', $m4ac_lp50ub_1['region'], '<br />'; echo __LINE__, ' - Set Tags:       ', $m4ac_lp50ub_1['tag_id'], '<br />'; echo __LINE__, ' - Tokens:         ', $m4ac_lp50ub_1['token_id'], '<br />'; echo __LINE__, ' - Version:        ', $m4ac_lp50ub_1['version'], '<br />'; } if ($m4ac_lp50ub_1['require_login'] == 'yes' && ! $m4ac_co_g85z1qmw) { if ($m4ac_ya4km5wlsd) { echo __LINE__, " - Login Required, returning to referring page"; echo '<a href="', $_SERVER['HTTP_REFERER'], '">Continue</a>'; exit; } nocache_headers(); wp_redirect($_SERVER['HTTP_REFERER'], 302, 'Memberium ' . __FUNCTION__ . '::' . __LINE__); exit; } if (memberium_app()->m4ac_w8ohueyv() > 0) { if (! empty($m4ac_lp50ub_1['automation_id']) ) { memberium_app()->m4ac_lmhdiugb6cs($m4ac_lp50ub_1['automation_id'], memberium_app()->m4ac_w8ohueyv() ); } if (! empty($m4ac_lp50ub_1['tag_id']) ) { memberium_app()->m4ac_ocsjt69hrb($m4ac_lp50ub_1['tag_id'], memberium_app()->m4ac_w8ohueyv() ); } if (! empty($m4ac_lp50ub_1['token_id']) ) { memberium_app()->m4ac_o7ynu2faw($m4ac_lp50ub_1['token_id']); } } $m4ac_mcgw3_2ib8u = strtolower(trim($m4ac_lp50ub_1['profile']) ); if (isset($m4ac_d3bwc5k09p6[$m4ac_mcgw3_2ib8u]) ) { $m4ac_u9bnjrwc0_ = $m4ac_d3bwc5k09p6[$m4ac_mcgw3_2ib8u]['bucket']; $m4ac_ak_b81p6 = $m4ac_d3bwc5k09p6[$m4ac_mcgw3_2ib8u]['host']; $m4ac_s70lygjh = $m4ac_d3bwc5k09p6[$m4ac_mcgw3_2ib8u]['access_key']; $m4ac_r927lpiu = $m4ac_d3bwc5k09p6[$m4ac_mcgw3_2ib8u]['secret_key']; $m4ac_eq1i8v9csb = $m4ac_d3bwc5k09p6[$m4ac_mcgw3_2ib8u]['region']; if ($m4ac_ya4km5wlsd) { echo __LINE__, ' - Host: ', $m4ac_ak_b81p6, '<br />'; echo __LINE__, ' - Bucket: ', $m4ac_u9bnjrwc0_, '<br />'; } } $m4ac_aqabpn89l = $m4ac_lp50ub_1['expiring']; $m4ac_rj_1q50h4l = $m4ac_lp50ub_1['protocol']; $m4ac_vonty8dgpk = $m4ac_lp50ub_1['object']; $m4ac_eq1i8v9csb = $m4ac_lp50ub_1['region']; if ($m4ac_lp50ub_1['version'] == 3) {  $m4ac_atr94xdeg3 = self::m4ac_zb57no8wf($m4ac_s70lygjh, $m4ac_r927lpiu, $m4ac_rj_1q50h4l, $m4ac_ak_b81p6, $m4ac_u9bnjrwc0_, $m4ac_vonty8dgpk, $m4ac_aqabpn89l); } elseif ($m4ac_lp50ub_1['version'] == 4) {  $m4ac_atr94xdeg3 = self::m4ac_b97pbgj5($m4ac_s70lygjh, $m4ac_r927lpiu, $m4ac_u9bnjrwc0_, $m4ac_vonty8dgpk, $m4ac_aqabpn89l, $m4ac_eq1i8v9csb); } if ($m4ac_ya4km5wlsd) { echo __LINE__, ' - URL: <a href="', $m4ac_atr94xdeg3, '">', $m4ac_atr94xdeg3, '</a><br />'; exit; } else { nocache_headers(); wp_redirect($m4ac_atr94xdeg3, 302, 'Memberium ' . __FUNCTION__ . '::' . __LINE__); exit; } } private static 
function m4ac_e6xrhbuncei(string $m4ac_pzocy3nw) { $m4ac_qjmwcbto9 = get_option('memberium_remote_files', []); return isset($m4ac_qjmwcbto9[$m4ac_pzocy3nw]) ? $m4ac_qjmwcbto9[$m4ac_pzocy3nw] : false; } private static 
function m4ac_wih9cb8epr(string $m4ac_ukqvxo6ne7, string $m4ac_md7c8zsu2o, int $m4ac_gq13u709 = 64) { if (strlen($m4ac_ukqvxo6ne7) > $m4ac_gq13u709) { $m4ac_ukqvxo6ne7 = pack('H*', sha1($m4ac_ukqvxo6ne7) ); } $m4ac_ukqvxo6ne7 = str_pad($m4ac_ukqvxo6ne7, $m4ac_gq13u709, chr(0x00) ); $m4ac_p0vi45dm6syj = str_repeat(chr(0x36), $m4ac_gq13u709); $m4ac_vtkj9pzue1 = str_repeat(chr(0x5c), $m4ac_gq13u709); $m4ac_xj9igwa2tp = pack('H*', sha1( ($m4ac_ukqvxo6ne7 ^ $m4ac_vtkj9pzue1) . pack('H*', sha1( ($m4ac_ukqvxo6ne7 ^ $m4ac_p0vi45dm6syj) . $m4ac_md7c8zsu2o ) ) ) ); return base64_encode($m4ac_xj9igwa2tp); } private static 
function m4ac_zb57no8wf(string $m4ac_s70lygjh, string $m4ac_r927lpiu, string $m4ac_rj_1q50h4l, string $m4ac_ak_b81p6, string $m4ac_u9bnjrwc0_, string $m4ac_u10yzxwf4lc, $m4ac_a1cgoz8aq = 30) { $m4ac_t5q_ar3txl9f = time() + (int) $m4ac_a1cgoz8aq; $m4ac_u10yzxwf4lc = str_replace('%2F', '/', rawurlencode($m4ac_u10yzxwf4lc = ltrim($m4ac_u10yzxwf4lc, '/') )); $m4ac_j79recoi = '/'. $m4ac_u9bnjrwc0_ .'/'. $m4ac_u10yzxwf4lc; $m4ac_ugsvwjt7 = implode("\n", $pieces = ['GET', null, null, $m4ac_t5q_ar3txl9f, $m4ac_j79recoi]); $m4ac_vejbrg5i = self::m4ac_wih9cb8epr($m4ac_r927lpiu, $m4ac_ugsvwjt7);  $m4ac_atr94xdeg3 = sprintf('%s://%s.%s/%s', $m4ac_rj_1q50h4l, $m4ac_u9bnjrwc0_, $m4ac_ak_b81p6, $m4ac_u10yzxwf4lc); $m4ac_toqktpjmcnr7 = http_build_query($pieces = [ 'AWSAccessKeyId' => $m4ac_s70lygjh, 'Expires' => $m4ac_t5q_ar3txl9f, 'Signature' => $m4ac_vejbrg5i, ]); return $m4ac_atr94xdeg3 . '?' . $m4ac_toqktpjmcnr7; }  private static 
function m4ac_b97pbgj5(string $m4ac_s70lygjh, string $m4ac_r927lpiu, string $m4ac_u9bnjrwc0_, string $m4ac_a079rt3v, $m4ac_t5q_ar3txl9f = 0, string $m4ac_eq1i8v9csb = '', $m4ac_dpzx6ru72nh = []) { if (substr($m4ac_a079rt3v, 0, 1) !== '/') { $m4ac_a079rt3v = '/' . $m4ac_a079rt3v; } $m4ac_eq1i8v9csb = empty($m4ac_eq1i8v9csb) ? self::$m4ac_qde196lj3nw0 : $m4ac_eq1i8v9csb; $m4ac_suiy8xez3wq = str_replace('%2F', '/', rawurlencode($m4ac_a079rt3v) ); $m4ac_z6hcribdskf = []; foreach ($m4ac_dpzx6ru72nh as $m4ac_ukqvxo6ne7 => $m4ac_ihnr7cyv) { $m4ac_z6hcribdskf[strtolower($m4ac_ukqvxo6ne7)] = $m4ac_ihnr7cyv; } if (!array_key_exists('host', $m4ac_z6hcribdskf) ) { $m4ac_z6hcribdskf['host'] = ($m4ac_eq1i8v9csb == 'us-east-1') ? "$m4ac_u9bnjrwc0_.s3.amazonaws.com" : "$m4ac_u9bnjrwc0_.s3-$m4ac_eq1i8v9csb.amazonaws.com"; } ksort($m4ac_z6hcribdskf); $m4ac_ssfla_n0m = ''; foreach ($m4ac_z6hcribdskf as $m4ac_ukqvxo6ne7 => $m4ac_ihnr7cyv) { $m4ac_ssfla_n0m .= $m4ac_ukqvxo6ne7 . ':' . trim($m4ac_ihnr7cyv) . "\n"; } $m4ac_um326swez = implode(';', array_keys($m4ac_z6hcribdskf) ); $m4ac_uqmdon7p0fek = time(); $m4ac_x6uoxb5ld4y = gmdate('Ymd', $m4ac_uqmdon7p0fek); $m4ac_w40nat67i31s = $m4ac_x6uoxb5ld4y . 'T000000Z'; $m4ac_w40nat67i31s = $m4ac_x6uoxb5ld4y . 'T' . gmdate('His', $m4ac_uqmdon7p0fek) . 'Z'; $m4ac_ka7ms6082j9 = 'AWS4-HMAC-SHA256'; $m4ac_ei0ylu8pm3 = "$m4ac_x6uoxb5ld4y/$m4ac_eq1i8v9csb/s3/aws4_request"; $m4ac_scperg58zynj = [ 'X-Amz-Algorithm' => $m4ac_ka7ms6082j9, 'X-Amz-Credential' => $m4ac_s70lygjh . '/' . $m4ac_ei0ylu8pm3, 'X-Amz-Date' => $m4ac_w40nat67i31s, 'X-Amz-SignedHeaders' => $m4ac_um326swez ]; if ($m4ac_t5q_ar3txl9f > 0) { $m4ac_scperg58zynj['X-Amz-Expires'] = $m4ac_t5q_ar3txl9f; } ksort($m4ac_scperg58zynj); $m4ac_do62m5bejuzs = []; foreach ($m4ac_scperg58zynj as $m4ac_ukqvxo6ne7 => $m4ac_ihnr7cyv) { $m4ac_do62m5bejuzs[] = rawurlencode($m4ac_ukqvxo6ne7) . '=' . rawurlencode($m4ac_ihnr7cyv); } $m4ac_ap98bqan = implode('&', $m4ac_do62m5bejuzs); $m4ac_pjhu4mzid = "GET\n$m4ac_suiy8xez3wq\n$m4ac_ap98bqan\n$m4ac_ssfla_n0m\n$m4ac_um326swez\nUNSIGNED-PAYLOAD"; $m4ac_e4gdbar8x7l = "$m4ac_ka7ms6082j9\n$m4ac_w40nat67i31s\n$m4ac_ei0ylu8pm3\n" . hash('sha256', $m4ac_pjhu4mzid, false); $m4ac_eby59ehr = hash_hmac('sha256', 'aws4_request', hash_hmac('sha256', 's3', hash_hmac('sha256', $m4ac_eq1i8v9csb, hash_hmac('sha256', $m4ac_x6uoxb5ld4y, 'AWS4' . $m4ac_r927lpiu, true), true), true), true); $m4ac_vejbrg5i = hash_hmac('sha256', $m4ac_e4gdbar8x7l, $m4ac_eby59ehr); $m4ac_atr94xdeg3 = 'https://' . $m4ac_z6hcribdskf['host'] . $m4ac_suiy8xez3wq . '?' . $m4ac_ap98bqan . '&X-Amz-Signature=' . $m4ac_vejbrg5i; return $m4ac_atr94xdeg3; } } }
