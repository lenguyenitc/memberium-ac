<?php
/**
* Copyright (c) 2018-2021 David J Bullock
* Web Power and Light
*/

 if (class_exists('m4ac_c6rqypiacz4') ) { final 
class m4ac_f5ovcw_1iln { 
function m4ac_iyjzw1tq20l(int $m4ac__37l6rhivt2, string $m4ac_ld49ug1jbz, string $m4ac_lp50ub_1) { if (defined('DOING_AUTOSAVE') && DOING_AUTOSAVE) { return false; } if (empty($_POST[$m4ac_ld49ug1jbz]) || ! wp_verify_nonce($_POST[$m4ac_ld49ug1jbz], $m4ac_lp50ub_1) ) { return false; } if (! current_user_can('edit_posts', $m4ac__37l6rhivt2) ) { return false; } return true; } 
function m4ac_qbupkly58c4t() { $m4ac__37l6rhivt2 = isset($_GET['post']) ? $_GET['post'] : 0; if ($m4ac__37l6rhivt2 == 0) { $m4ac__37l6rhivt2 = isset($_POST['post_ID']) ? $_POST['post_ID'] : 0; } return $m4ac__37l6rhivt2; } 
function m4ac_lyn05jkedwl() { static $m4ac_dxtjcmeridh = false; if (! $m4ac_dxtjcmeridh) { $m4ac_dxtjcmeridh = get_post_type($this->m4ac_qbupkly58c4t() ); if (empty($m4ac_dxtjcmeridh) ) { $m4ac_dxtjcmeridh = isset($_GET['post_type']) ? $_GET['post_type'] : 'post'; } } return $m4ac_dxtjcmeridh; }    
function m4ac_o89tlf1ky($m4ac_cwjhlmqofca, $m4ac_dxtjcmeridh) { if ($m4ac_cwjhlmqofca) { $m4ac_h_tvxgh3l8 = [ 'memb_shortcodeblocks', 'partials', ]; $m4ac_dxtjcmeridh = strtolower($m4ac_dxtjcmeridh); $m4ac_cwjhlmqofca = ! in_array($m4ac_dxtjcmeridh, $m4ac_h_tvxgh3l8); } return $m4ac_cwjhlmqofca; } 
function m4ac_ioj31d4ru($m4ac_rjs2qy31a_, $m4ac_ixteyr6q) { if ($m4ac_ixteyr6q == 'memberium-ac/memberium-ac.php') { $m4ac_rjs2qy31a_['help'] = sprintf('<a href="%s" target="_blank"> %s </a>', 'https://memberium.com/documentation/', __('Docs', 'plugin_domain') ); $m4ac_rjs2qy31a_['support'] = sprintf('<a href="%s" target="_blank"> %s </a>', 'https://memberium.com/support/', __('Support', 'plugin_domain') ); } return $m4ac_rjs2qy31a_; }    
function m4ac_ll3yjp45($m4ac_g9fn685ibx = 0, $m4ac_h0_p7cxt = '') { $m4ac_g9fn685ibx = (int) $m4ac_g9fn685ibx; if (! $m4ac_g9fn685ibx) { return; } if (empty($m4ac_h0_p7cxt) ) { $m4ac_h0_p7cxt = $m4ac_g9fn685ibx; } return "<span class='update-plugins count-{$m4ac_g9fn685ibx}' title='{$m4ac_h0_p7cxt}'><span class='update-count'>{$m4ac_h0_p7cxt}</span></span>"; } static 
function m4ac_mqkyuferc83() { global $wpdb; return $wpdb->db_version(); } static 
function m4ac_iyw2ajscrhl() { $m4ac_j01_nimq = $_GET; $m4ac_dxtjcmeridh = isset($m4ac_j01_nimq['post_type']) ? $m4ac_j01_nimq['post_type'] : ''; if (empty($m4ac_dxtjcmeridh) && ! empty($m4ac_j01_nimq['post'])) { $m4ac_dxtjcmeridh = get_post_type($m4ac_j01_nimq['post']); } $m4ac_dxtjcmeridh = empty($m4ac_dxtjcmeridh) ? 'post' : $m4ac_dxtjcmeridh; return $m4ac_dxtjcmeridh; }    
function m4ac_joch_re68k() { $m4ac_qz2fsdy3pb = [ 'elementor_library', 'et_pb_layout', 'llms_engagement', 'llms_membership', 'llms_question', 'nomination', 'sfwd-essays', 'shop_coupon', 'shop_order', 'shop_subscription', 'submission', 'um_directory', 'um_form', ]; $m4ac_ah90o86m = [ 'public' => false, ]; $m4ac_id7k9t2q = get_post_types($m4ac_ah90o86m); if (is_array($m4ac_id7k9t2q) ) { foreach($m4ac_id7k9t2q as $m4ac_dxtjcmeridh) { if (! in_array($m4ac_dxtjcmeridh, ['memb_shortcodeblocks', 'partials'] ) ) { $m4ac_qz2fsdy3pb[] = $m4ac_dxtjcmeridh; } } } $m4ac_qz2fsdy3pb = apply_filters('memberium/unenhanced_posts', $m4ac_qz2fsdy3pb); return $m4ac_qz2fsdy3pb; }  
function m4ac_b5g1y3of() { static $m4ac_g9fn685ibx = 0; if ($m4ac_g9fn685ibx) { return $m4ac_g9fn685ibx; } $m4ac_g9fn685ibx = wp_cache_get('menu_logcount', 'memberiumac/admin', false, $m4ac_tp09y21w7hcn); if (! $m4ac_tp09y21w7hcn) { global $wpdb; $m4ac_zo4tkuadv = memberium_app()->m4ac_bztk3xj1(); $m4ac_g9fn685ibx = $wpdb->get_var("SELECT count(*) FROM `" . MEMBERIUM_DB_EVENTS . "` WHERE `appname` = '{$m4ac_zo4tkuadv}';"); $m4ac_g9fn685ibx = $m4ac_g9fn685ibx + $wpdb->get_var("SELECT count(*) FROM `" . MEMBERIUM_DB_LOGINLOG . "` WHERE `appname` = '{$m4ac_zo4tkuadv}';"); wp_cache_set("menu_logcount", $m4ac_g9fn685ibx, 'memberiumac/admin', 120); } return $m4ac_g9fn685ibx; } 
function m4ac_o2r_i8yw() { $m4ac_b28d_brj9 = current_user_can('manage_options'); if ($m4ac_b28d_brj9) { add_action('admin_menu', [$this, 'm4ac_w0r6fa2_17z3']); add_action('admin_notices', ['m4ac_zl6pbja3', 'm4ac_mdlvfgoh']); } if (! m4ac_tl5skz6cfptr::m4ac_e28auldn() ) { return; } if ($m4ac_b28d_brj9) {   add_action('delete_user', [$this, 'm4ac_mkg1dlmrq']); add_action('edit_user_profile_update', [$this, 'm4ac__z_8jfvni'], 1); add_action('edit_user_profile', [$this, 'm4ac_ymy2wtadsx'], 999999); add_action('profile_update', [$this, 'm4ac_xw34lnbg'], 10, 2); add_action('show_user_profile', [$this, 'm4ac_ymy2wtadsx']); $this->non_enhanced_post_types = $this->m4ac_joch_re68k(); $post_type = self::m4ac_iyw2ajscrhl(); if (! in_array($post_type, $this->non_enhanced_post_types) ) { add_action('bulk_edit_custom_box', [$this, 'm4ac_x2ps1mbq3hi'], 10, 2); add_action('manage_pages_custom_column', [$this, 'm4ac_q71zushnm'], 10, 2); add_action('manage_posts_custom_column', [$this, 'm4ac_q71zushnm'], 10, 2); add_action('quick_edit_custom_box', [$this, 'm4ac_gmhrupfck'], 10, 2); add_filter('manage_pages_columns', [$this, 'm4ac_ngfm13h8n_x4']); add_filter('manage_posts_columns', [$this, 'm4ac_ngfm13h8n_x4']); } } add_action('personal_options_update', [$this, 'm4ac__z_8jfvni'], 1); if (isset($_GET['memberium_ignore_notice']) ) { $this->m4ac_ujxc13p89(); } } 
function m4ac_yg9v7com() { $m4ac_id7k9t2q = get_post_types(['public' => true]); foreach($m4ac_id7k9t2q as $m4ac_dxtjcmeridh) { $this->public_post_types[] = $m4ac_dxtjcmeridh; } } private 
function m4ac_tquk3lvcptm() { if (! memberium_app()->m4ac_x280qrz9kmic('ac_api_verified') ) { return false; } global $wpdb; $m4ac_xtcz6bi97flk = "DELETE FROM `{$wpdb->options}` WHERE `option_name` LIKE '_transient_memberium%'; "; $wpdb->query($m4ac_xtcz6bi97flk); set_time_limit(30); memberium_app()->m4ac_hokh9qd6tmn4(); set_time_limit(30); memberium_app()->m4ac_ufh0e5zg7dt(); set_time_limit(30); memberium_app()->m4ac_p05w6kivzl4(); set_time_limit(30); memberium_app()->m4ac_q3q51rf7wcs(); set_time_limit(30); memberium_app()->m4ac_yi6vneh3(); set_time_limit(30); memberium_app()->m4ac_k7c1lfkywtju(); set_time_limit(30); memberium_app()->m4ac_hvr5tkz6is(); $this->m4ac_g3ne76s9bjm('ActiveCampaign Synchronized', 'update'); } static 
function m4ac_oi_mvcd1() { global $wpdb; $m4ac__s0n1694j = get_option('activememberium_tables', [] ); $m4ac_ix2ahcuv = []; if (! empty($m4ac__s0n1694j) ) { $m4ac_pp5jt3ngubrz = $wpdb->get_col('SHOW TABLES'); foreach ($m4ac__s0n1694j as $m4ac_jouqjei9gbc3) { if (! in_array($m4ac_jouqjei9gbc3, $m4ac_pp5jt3ngubrz) ) { $m4ac_ix2ahcuv[] = $m4ac_jouqjei9gbc3; } } return $m4ac_ix2ahcuv; } else { return []; } } 
function m4ac_mh4k1bcwjmn() { if (isset($_GET['post']) ) { $m4ac_maz5nvkp = get_post($_GET['post']); if (empty($m4ac_maz5nvkp->post_name) ) { return; } } else { return; } $m4ac_h0_p7cxt = ''; if ($m4ac_maz5nvkp->post_type == 'partials') { $m4ac_h0_p7cxt = "[memb_include_partial post_id={$m4ac_maz5nvkp->ID}]"; } elseif ($m4ac_maz5nvkp->post_type == 'memb_shortcodeblocks') { $m4ac_h0_p7cxt = "[membc_{$m4ac_maz5nvkp->post_name}]"; } if (! empty($m4ac_h0_p7cxt) ) { echo "<h2>{$m4ac_h0_p7cxt}</h2>"; } }    
function m4ac_hxqg8n3_0($m4ac_d2k8r_3lwm, $m4ac_at_5xofh, $m4ac_xqrupw5i, $m4ac_u10yzxwf4lc, $m4ac_wepvz89dbcw_, $m4ac_xurp0xnols83) { if (is_plugin_active_for_network('memberium-ac/memberium-ac.php') ) { $m4ac_lz0bc6pxa_st = $wpdb->blogid; switch_to_blog($m4ac_d2k8r_3lwm); m4ac_m4i8fbuxl::m4ac_qdzbg4uy(); switch_to_blog($m4ac_lz0bc6pxa_st); } }    
function m4ac_hp8ckwhr($m4ac_m0ed2libwkf1) { $m4ac_wb3_8is6dr9 = [ 'edit.php', 'post-new.php', 'post.php', 'user-edit.php' ]; $m4ac_wb3_8is6dr9 = apply_filters('m4ac/admin/script_hooks', $m4ac_wb3_8is6dr9); $m4ac_ly7qxgcm0 = false; $m4ac_ly7qxgcm0 = $m4ac_ly7qxgcm0 || strpos($m4ac_m0ed2libwkf1, 'memberium') !== false; $m4ac_ly7qxgcm0 = $m4ac_ly7qxgcm0 || in_array($m4ac_m0ed2libwkf1, $m4ac_wb3_8is6dr9); $m4ac_hakbo4tlcx2_ = plugins_url('memberium-ac'); $m4ac_cwimbugn = memberium_app()->m4ac_lx4jv6fi7k(); $m4ac_gq149bfz2 = plugin_dir_url(MEMBERIUM_HOME); wp_register_style('wpalSelect2', $m4ac_gq149bfz2 . 'css/wpal-select2.min.css', false, $m4ac_cwimbugn, 'all'); wp_register_script('wpalSelect2', $m4ac_gq149bfz2 . 'js/wpal-select2.full.min.js', ['jquery'], $m4ac_cwimbugn, false); wp_enqueue_style('wpalSelect2'); wp_enqueue_script('wpalSelect2'); if ($m4ac_ly7qxgcm0) { wp_register_style('memberium_admin_css', "{$m4ac_hakbo4tlcx2_}/css/admin.css", false, $m4ac_cwimbugn, 'all'); wp_enqueue_style('font-awesome', 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css', false, '4.7.0'); wp_register_script('memberium_adminsettings', "{$m4ac_hakbo4tlcx2_}/js/admin-settings.js", false, $m4ac_cwimbugn, true); wp_enqueue_style('memberium_admin_css'); wp_enqueue_script('memberium_adminsettings'); } if (in_array($m4ac_m0ed2libwkf1, ['post.php', 'post-new.php']) ) { wp_register_script('memberium_postmetabox', $m4ac_hakbo4tlcx2_ . '/js/postmetabox.js', false, $m4ac_cwimbugn, true); wp_enqueue_script('memberium_postmetabox'); } } 
function m4ac_g6uc9xrhol8a() { $m4ac_uqmdon7p0fek = get_option('m4ac/show_welcome_screen', 0); $m4ac_ljd2_k7u1wt = false; delete_option('m4ac/show_welcome_screen'); if (isset($_GET['page']) && $_GET['page'] == 'memberium-ac') { return; }  if (! $m4ac_uqmdon7p0fek) { return; }  if (is_network_admin() || isset($_GET['activate-multi']) ) { return; } if ( (time() - $m4ac_uqmdon7p0fek) > 30) { return; } if ($m4ac_ljd2_k7u1wt) {   wp_redirect(add_query_arg(['page' => 'memberium-ac'], admin_url('index.php') ), 302, 'Memberium'); } } 
function m4ac_tcn0_3moa($id) { if (strpos($_SERVER['REQUEST_URI'], '?') === false) { $m4ac_i9imgz30b78t = '?'; } else { $m4ac_i9imgz30b78t = '&'; } return $_SERVER['REQUEST_URI'] . $m4ac_i9imgz30b78t . 'memberium_ignore_notice=' . urlencode($id); } 
function m4ac_x8nkt6xs4() { if (isset($_GET['tab']) && $_GET['tab'] == 'checklist' || ! current_user_can('manage_options') ) { return; } if (! get_user_meta(get_current_user_id(), 'memberium_ignore_notice_checklist', true) ) { $m4ac_k6rcsldao = $this->m4ac_q9ebz431d(true); if (! empty($m4ac_k6rcsldao['active']) ) { $m4ac_we4wvl_8 = $m4ac_k6rcsldao['active'][0]['t']; $m4ac_tvdljq4ki0 = $this->m4ac_tcn0_3moa('checklist'); $m4ac_oemjasi0tp = '<h3 style="margin-bottom:6px;">Memberium Setup CheckList</h3>'; $m4ac_oemjasi0tp .= '<p>Your next setup checklist step is to ' . $m4ac_we4wvl_8 . '</p><p><a href="admin.php?page=dashboard&tab=checklist"><strong>Click here</strong></a> to return to the setup checklist.</p>'; $m4ac_oemjasi0tp .= '<div style="text-align:right;"><p><a class="button-primary" href="'. $m4ac_tvdljq4ki0 .'">Hide these Reminders</a></p></div>'; $class = "updated"; echo"<div class='{$class}'>{$m4ac_oemjasi0tp}</div>"; } } } 
function m4ac_ujxc13p89() { if (! empty($_GET['memberium_ignore_notice']) ) { $m4ac_at_5xofh = get_current_user_id(); add_user_meta($m4ac_at_5xofh, "memberium_ignore_notice_{$_GET['memberium_ignore_notice']}", 'true', true); if (wp_get_referer() ) { wp_redirect(wp_get_referer(), 302, 'Memberium'); } else { wp_redirect(get_site_url(), 302, 'Memberium'); } } } 
function m4ac_ay7uo1dhr() { return; if (! m4ac_tl5skz6cfptr::m4ac_e28auldn() ) { $m4ac_jyqxtpi408sj = self::WEBSITE_URL; $m4ac_n2kqiyparg5 = m4ac_s126v0fexga::m4ac_e_rxkt9u(0000); echo '<div class="error">'; echo '<p><strong style="font-size:150%;color:red;">Memberium License Missing / Expired</strong></p>'; echo '<p>For possible causes, <a target="_blank" href="', $m4ac_jyqxtpi408sj, '?p=0000">click here</a>.</p>'; echo '<p>If you already have a license please <a target="_blank" href="', $m4ac_jyqxtpi408sj, 'support/">contact support by clicking here</a>.</p>'; echo '<p>If you have not yet purchased a license, please <a target="_blank" href="', $m4ac_jyqxtpi408sj, 'pricing/">purchase a license by clicking here</a></p>'; echo '</div>'; } } private 
function m4ac_pb2fl4xc() { $m4ac_chm24b1ac3 = memberium_app()->m4ac_x280qrz9kmic('wpadmin_role'); if (! empty($m4ac_chm24b1ac3) ) { $m4ac__mrexf31jzdt = array_filter(explode(',', $m4ac_chm24b1ac3) ); $m4ac_at_5xofh = get_current_user_id(); foreach($m4ac__mrexf31jzdt as $m4ac_cnjvkyitq) { if (user_can($m4ac_at_5xofh, $m4ac_cnjvkyitq) ) { return true; } } } return false; } 
function m4ac_iq5_zvn1b() { static $m4ac_clcb0p9mz = false; $m4ac_clcb0p9mz = $m4ac_clcb0p9mz || defined('DOING_AJAX') && DOING_AJAX; $m4ac_clcb0p9mz = $m4ac_clcb0p9mz || function_exists('wp_doing_ajax') && wp_doing_ajax(); $m4ac_clcb0p9mz = $m4ac_clcb0p9mz || isset($_SERVER['SCRIPT_NAME']) && (basename($_SERVER['SCRIPT_NAME']) == 'admin-post.php'); $m4ac_clcb0p9mz = $m4ac_clcb0p9mz || memberium_app()->m4ac_k6b8c0f7g5(); $m4ac_clcb0p9mz = $m4ac_clcb0p9mz || $this->m4ac_pb2fl4xc(); $m4ac_clcb0p9mz = apply_filters('memberium/wpadmin/allow', $m4ac_clcb0p9mz); if ($m4ac_clcb0p9mz) { return; }  $m4ac_td3w4ugi17ot = get_site_url();  if (function_exists('is_user_logged_in') && is_user_logged_in() ) { $m4ac__crsbi5yuze = memberium_app()->m4ac_c17vlcx3a4(); if (! empty($m4ac__crsbi5yuze['memb_user']['dashboard_id']) ) { $m4ac_td3w4ugi17ot = get_permalink($m4ac__crsbi5yuze['memb_user']['dashboard_id']); } } else { $m4ac_td3w4ugi17ot = wp_login_url($_SERVER['REQUEST_URI']); } wp_redirect($m4ac_td3w4ugi17ot, 302, 'Memberium ' . __FUNCTION__ . '::' . __LINE__); exit; }    
function m4ac_d8yqavu9w($m4ac_i8a6nj1oc5hl = [], $m4ac_py5zsafh817 = '') { $m4ac_rlcs0yj3fk1 = isset($_GET['tab']) && isset($m4ac_i8a6nj1oc5hl[$_GET['tab']]) ? strtolower($_GET['tab']) : key($m4ac_i8a6nj1oc5hl); echo '<h3 class="nav-tab-wrapper">'; foreach ($m4ac_i8a6nj1oc5hl as $m4ac_t0u8143ngdq => $m4ac_pzocy3nw) { $m4ac_eohq7wvlb0i = ($m4ac_t0u8143ngdq == $m4ac_rlcs0yj3fk1) ? ' nav-tab-active' : ''; if ($m4ac_t0u8143ngdq == $m4ac_rlcs0yj3fk1) { echo "<span class='nav-tab{$m4ac_eohq7wvlb0i}'>{$m4ac_pzocy3nw}</span>"; } else { echo "<a class='nav-tab{$m4ac_eohq7wvlb0i}' href='?page={$_GET['page']}&tab={$m4ac_t0u8143ngdq}'>{$m4ac_pzocy3nw}</a>"; } } echo '</h3>'; return $m4ac_rlcs0yj3fk1; } 
function m4ac_y8eiblpogh($m4ac_sv5rmko0, $m4ac_pzocy3nw, $m4ac_ss6bwxopg8 ='text', $m4ac_py5zsafh817 = 0, $m4ac_pbk61dwjnxi, $m4ac_u4r2vkuz = '', $m4ac_cnp2y7wqbh = 0) { $m4ac_n2kqiyparg5 = m4ac_s126v0fexga::m4ac_e_rxkt9u($m4ac_cnp2y7wqbh); $m4ac_ihnr7cyv = memberium_app()->m4ac_x280qrz9kmic($m4ac_pzocy3nw); $m4ac_pa2k7635qor = ''; $m4ac_pa2k7635qor .= '<li><label>' . $m4ac_sv5rmko0 . '</label>'; $m4ac_pa2k7635qor .= '<input type="' . $m4ac_ss6bwxopg8 . '" value="' . $m4ac_ihnr7cyv . '" name="' . $m4ac_pzocy3nw . '" ' . $m4ac_pbk61dwjnxi . '/> '; $m4ac_pa2k7635qor .= $m4ac_n2kqiyparg5 . '</li>'; return $m4ac_pa2k7635qor; } 
function m4ac_cw_uroy3na($m4ac_abzku524871) { global $wpdb; if (! is_array($m4ac_abzku524871) || empty($m4ac_abzku524871) ) { return false; } $m4ac_xtcz6bi97flk = "SELECT `post_id`, `meta_value` FROM {$wpdb->postmeta} WHERE `meta_key` = '_memberium_membership_levels' AND `meta_value` > '' "; $m4ac_dwslpr0x57b = $wpdb->get_results($m4ac_xtcz6bi97flk, ARRAY_A); foreach ($m4ac_dwslpr0x57b as $m4ac_maz5nvkp) { $m4ac_d0lu2xcz6fvr = array_filter(explode(',', $m4ac_maz5nvkp['meta_value']) ); $m4ac_z9h1gke3vb0 = implode(',', array_diff($m4ac_d0lu2xcz6fvr, $m4ac_abzku524871) ); update_post_meta($m4ac_maz5nvkp['post_id'], '_memberium_membership_levels', $m4ac_z9h1gke3vb0); } return true; }  
function m4ac_xbgec74s9xti() { global $wpdb; $m4ac_xtcz6bi97flk = "SELECT `ID`, `post_title` FROM `{$wpdb->posts}` WHERE `post_status` = 'publish' AND `post_type` in ('page', 'post', 'product', 'sfwd-courses', 'course', 'forum') ORDER BY `id` ASC;"; $m4ac_d09em3tyuh2 = $wpdb->get_results($m4ac_xtcz6bi97flk, ARRAY_A); $m4ac_vbqd27hzsn[] = [ 'id' => 0, 'text' => '(Default)' ]; foreach ($m4ac_d09em3tyuh2 as $m4ac_lj_fwoc5ub1y => $m4ac_fqsk654i_hf) { $m4ac_vbqd27hzsn[] = [ 'id' => $m4ac_fqsk654i_hf['ID'], 'text' => $m4ac_fqsk654i_hf['post_title'] . ' (' . $m4ac_fqsk654i_hf['ID'] . ')' ]; unset($m4ac_d09em3tyuh2[$m4ac_lj_fwoc5ub1y]); } return json_encode($m4ac_vbqd27hzsn, JSON_INVALID_UTF8_SUBSTITUTE); }    
function m4ac_w0r6fa2_17z3() { $m4ac_qvbeawljp6 = 'memberium-ac'; $m4ac_ochnf90bk7z = '2.0000001'; $m4ac_z_b0krof4xum = memberium_app()->m4ac_x280qrz9kmic('ac_api_verified'); $m4ac_das0lbh1wn6 = memberium_app()->m4ac_x280qrz9kmic('ac_api_key'); $m4ac_p2w54f9ung = memberium_app()->m4ac_x280qrz9kmic('ac_api_url'); $m4ac_yqvsrm3_xi = (empty($m4ac_z_b0krof4xum) || empty($m4ac_das0lbh1wn6) || empty($m4ac_p2w54f9ung) ); $m4ac_llw5g7_un3 = 'manage_options'; $m4ac_h49jgnxe6r = 'dashicons-groups';  if ($m4ac_yqvsrm3_xi) { add_menu_page('Memberium', "Memberium <span class='update-plugins count-1' title='title'><span class='update-count'>Setup</span></span>", $m4ac_llw5g7_un3, $m4ac_qvbeawljp6, [$this, 'm4ac_ik_8sjgi2'], $m4ac_h49jgnxe6r, $m4ac_ochnf90bk7z); add_submenu_page($m4ac_qvbeawljp6, 'Support', 'Support', $m4ac_llw5g7_un3, 'memberium-support', [$this, 'm4ac_cotq93_06axr']); return; }  if (! m4ac_tl5skz6cfptr::m4ac_e28auldn() ) { add_menu_page('Memberium', 'Memberium', $m4ac_llw5g7_un3, $m4ac_qvbeawljp6, [$this, 'm4ac_ik_8sjgi2'], $m4ac_h49jgnxe6r, $m4ac_ochnf90bk7z); add_submenu_page($m4ac_qvbeawljp6, 'Support', 'Support', $m4ac_llw5g7_un3, 'memberium-support', [$this, 'm4ac_cotq93_06axr']);  return; } add_menu_page('Memberium', 'Memberium', $m4ac_llw5g7_un3, $m4ac_qvbeawljp6, [$this, 'm4ac_sebdix2ry'], $m4ac_h49jgnxe6r, $m4ac_ochnf90bk7z); add_submenu_page($m4ac_qvbeawljp6, null, null, $m4ac_llw5g7_un3, $m4ac_qvbeawljp6, [$this, 'm4ac_sebdix2ry']); add_submenu_page($m4ac_qvbeawljp6, 'Start Here', 'Start Here', $m4ac_llw5g7_un3, 'memberium-ac', [$this, 'm4ac_sebdix2ry']); add_submenu_page($m4ac_qvbeawljp6, 'Support', 'Support', $m4ac_llw5g7_un3, 'memberium-support', [$this, 'm4ac_cotq93_06axr']); add_submenu_page($m4ac_qvbeawljp6, 'Memberium Settings', 'Settings', $m4ac_llw5g7_un3, 'memberium-options', [$this, 'm4ac_iqbs4dmij']); add_submenu_page($m4ac_qvbeawljp6, 'Memberium Memberships', 'Memberships', $m4ac_llw5g7_un3, 'memberium-memberships', [$this, 'm4ac_fo6d2sb0j']); add_submenu_page($m4ac_qvbeawljp6, 'Memberium Remote Files Configuration', 'Remote Files', $m4ac_llw5g7_un3, 'memberium-remote-files', [$this, 'm4ac_h238jhemwkb']);  add_submenu_page($m4ac_qvbeawljp6, 'Memberium Partials', 'Partials', $m4ac_llw5g7_un3, 'edit.php?post_type=partials'); add_submenu_page($m4ac_qvbeawljp6, 'Memberium Custom Shortcodes', 'Custom Shortcodes', $m4ac_llw5g7_un3, 'edit.php?post_type=memb_shortcodeblocks');  do_action('memberium_admin_menu_addons', $m4ac_qvbeawljp6); if (is_plugin_active('wp-courseware/wp-courseware.php') ) { add_submenu_page($m4ac_qvbeawljp6, 'Memberium WP Courseware', 'WP Courseware', $m4ac_llw5g7_un3, 'memberium-wpcw', [$this, 'm4ac_pvl4p5o1']); } if (false && is_plugin_active('google-analytics-for-wordpress/googleanalytics.php') ) { add_submenu_page($m4ac_qvbeawljp6, 'Memberium Google Analytics', 'Google Analytics', $m4ac_llw5g7_un3, 'memberium-ga', [$this, 'showGoogleAnalyticsDashboard']); } $m4ac_yqah5jzkgcdf = $this->m4ac_b5g1y3of(); add_submenu_page($m4ac_qvbeawljp6, 'Memberium Logs', 'Logs '. $this->m4ac_ll3yjp45($m4ac_yqah5jzkgcdf), $m4ac_llw5g7_un3, 'memberium-logs', [$this, 'm4ac_ze3hjislmx']);  add_submenu_page($m4ac_qvbeawljp6, 'ActiveCampaign', 'ActiveCampaign', $m4ac_llw5g7_un3, 'ac-setup', [$this, 'm4ac_ik_8sjgi2']); } 
function m4ac_ik_8sjgi2() { delete_option('m4ac/show_welcome_screen'); m4ac_tl5skz6cfptr::m4ac_f1w9jlh37i(true); if ($_SERVER['REQUEST_METHOD'] == 'POST') { $_GET['tab'] = isset($_GET['tab']) ? $_GET['tab'] : ''; if ($_GET['tab'] == 'api' || empty($_GET['tab']) ) { $m4ac_hm_o67zdsr = isset($_POST['api_url']) ? strtolower(trim($_POST['api_url'] . '/') ) : memberium_app()->m4ac_x280qrz9kmic('ac_api_url'); $m4ac_il1s6zenby8w = isset($_POST['api_key']) ? strtolower(trim($_POST['api_key']) ) : memberium_app()->m4ac_x280qrz9kmic('ac_api_key'); if (! empty($m4ac_hm_o67zdsr) && ! empty($m4ac_il1s6zenby8w) ) {   $m4ac_tz1man97t80 = new M4ActiveCampaignWordPress($m4ac_hm_o67zdsr, $m4ac_il1s6zenby8w); $m4ac_den23k9xh_o = (int) $m4ac_tz1man97t80->credentials_test(); if ($m4ac_den23k9xh_o) { $this->CRMAPI = $m4ac_tz1man97t80; memberium_app()->m4ac_n9fdhnm102($m4ac_tz1man97t80); $profile = $this->CRMAPI->api('user/me'); memberium_app()->m4ac_vlpfetc4son5($m4ac_hm_o67zdsr, 'ac_api_url'); memberium_app()->m4ac_vlpfetc4son5($m4ac_il1s6zenby8w, 'ac_api_key'); memberium_app()->m4ac_vlpfetc4son5(1, 'ac_api_verified'); memberium_app()->m4ac_vlpfetc4son5($profile->trackid, 'ac_tracking_id'); memberium_app()->m4ac_vlpfetc4son5($profile->eventkey, 'ac_event_key'); memberium_app()->m4ac_vlpfetc4son5('', 'license_key'); $this->m4ac_tquk3lvcptm(); } else { memberium_app()->m4ac_vlpfetc4son5(0, 'ac_api_verified'); memberium_app()->m4ac_vlpfetc4son5('', 'license_key'); } } if ( memberium_app()->m4ac_x280qrz9kmic('ac_api_verified') ) { if (isset($_POST['ac_tracking_code']) ) { memberium_app()->m4ac_vlpfetc4son5(base64_encode(stripslashes($_POST['ac_tracking_code']) ), 'ac_tracking_code'); } memberium_app()->m4ac_hr0lmxzj($_SERVER['SERVER_NAME']); } } elseif ($_GET['tab'] == 'webhooks') { if (isset($_POST['delete']) && is_array($_POST['delete']) ) { foreach ($_POST['delete'] as $m4ac_xj7cay0d => $m4ac_f4eznw510) { memberium_app()->m4ac_yiqu4k3xj5()->api('webhook/delete?id=' . (int) $m4ac_xj7cay0d);  } } if (isset($_POST['webhooks']) && $_POST['webhooks'] == 'Reinstall Webooks') { $m4ac_y678mgix = new m4ac_kz0av3byx; $m4ac_y678mgix->m4ac_ojds78kz(); } } } m4ac_tl5skz6cfptr::m4ac_f1w9jlh37i(true); $this->m4ac_eyfki_0es(); $m4ac_i8a6nj1oc5hl = []; $m4ac_i8a6nj1oc5hl['api'] = '<i class="fa fa-heartbeat"></i> API Setup'; $m4ac_z_b0krof4xum = memberium_app()->m4ac_x280qrz9kmic('ac_api_verified'); if (! empty($m4ac_z_b0krof4xum) ) { $m4ac_i8a6nj1oc5hl['webhooks'] = '<i class="fa fa-flag"></i> Web Hooks'; if (MEMBERIUM_DEBUG) { $m4ac_i8a6nj1oc5hl['events'] = '<i class="fa fa-bullhorn"></i> Events'; $m4ac_i8a6nj1oc5hl['tracking'] = '<i class="fa fa-cogs"></i> Tracking'; $m4ac_i8a6nj1oc5hl['test'] = '<i class="fa fa-flask"></i> Test'; } } echo '<div class="wrap about-wrap memberium">'; echo '<img src="//memberium.s3.amazonaws.com/img/m4ac-logo.gif" width="125" style="float:right; border-radius:10px;height:175px !important;width:125px !important;">'; echo '<h3 style="font-size:48px; font-weight:normal;">', _('Configure Memberium for ActiveCampaign'), '</h3>'; echo '<div class="about-text">'; echo _e("Thank you!  We're activated and ready to help you build your own private Membership community.<br />"); echo '</div>'; echo '</div>'; echo '<div class="wrap">';  $m4ac_rlcs0yj3fk1 = $this->m4ac_d8yqavu9w($m4ac_i8a6nj1oc5hl); echo '<div class="tabcontent" style="margin-top:10px;">'; if ($m4ac_rlcs0yj3fk1 == 'api') { $m4ac_h57xqitcp = memberium_app()->m4ac_bztk3xj1(); $m4ac_hm_o67zdsr = memberium_app()->m4ac_x280qrz9kmic('ac_api_url'); $m4ac_il1s6zenby8w = memberium_app()->m4ac_x280qrz9kmic('ac_api_key'); $m4ac_p40ce6nfm = $m4ac_z_b0krof4xum && (! empty($m4ac_hm_o67zdsr) ); $m4ac_trpt5j47fod8 = $m4ac_p40ce6nfm ? ' disabled=disabled ' : ''; echo '<h3>ActiveCampaign Configuration</h3>'; echo '<p>Once the site is connected to an ActiveCampaign account, that account cannot be changed.</p>'; echo '<form method="post" action="">'; echo '<p><label>API Access URL:</label><input type="url" name="api_url" value="', $m4ac_hm_o67zdsr, '"  size="40" ' . $m4ac_trpt5j47fod8 . ' placeholder="https://yourapp.api-us1.com"></p>'; echo '<p><label>API Access Key:</label><input type="password" name="api_key" id="api_key" value="', $m4ac_il1s6zenby8w, '" size="70" placeholder="Enter your API Key here"></p>'; if (! empty($m4ac_z_b0krof4xum) ) { echo '<p><label>API Status:</label><strong style="color:green">API Verified</strong>'; } else { echo '<p><label>API Status:</label><strong style="color:red">API not Verified</strong>'; } echo '<p><input type="submit" name="foo" class="button-primary" value="Update"></p>'; echo '<p>&nbsp;</p>'; echo '<p>Need help finding your API URL and Key? &nbsp;'; echo "<a href='https://{$m4ac_h57xqitcp}.activehosted.com/admin/main.php?action=settings#tab_api' target='_blank'>Click Here</a></p>"; echo '<p>&nbsp;</p>'; echo '</form>'; } elseif ($m4ac_rlcs0yj3fk1 == 'tracking') { $m4ac_r9hbwf56m = base64_decode( memberium_app()->m4ac_x280qrz9kmic('ac_tracking_code') ); $m4ac_h57xqitcp = memberium_app()->m4ac_bztk3xj1(); echo '<h3>Tracking Configuration</h3>'; echo '<form method="post" action="">'; echo '<p>'; echo '<label style="vertical-align:top;">Tracking Code</label>'; echo '<textarea name="ac_tracking_code" id="ac_tracking_code" style="overflow:hidden" cols="100" rows="10">', $m4ac_r9hbwf56m, '</textarea>'; echo '</p>'; echo '<p>Need help finding your tracking code? &nbsp;'; echo '<a href="https://', $m4ac_h57xqitcp, '.activehosted.com/admin/main.php?action=settings#tab_track" target="_blank">Click Here</a></p>'; echo '<p>&nbsp;</p>'; echo '<p><input type="submit" name="foo" class="button-primary" value="Update"></p>'; echo '</form>'; } elseif ($m4ac_rlcs0yj3fk1 == 'events') {    } elseif ($m4ac_rlcs0yj3fk1 == 'webhooks') { $m4ac_y678mgix = memberium_app()->m4ac_yiqu4k3xj5()->api('webhook/list'); $m4ac_m_jevhs4fwnp = memberium_app()->m4ac_jj97adupw_3v(); $m4ac_t8vwepu4qr = 'All'; echo '<h3>WebHooks</h3>'; echo '<form method="post">'; echo '<table class="widefat">'; echo "<tr>"; echo '<td>Delete</td>'; echo '<td>List</td>'; echo '<td>Name</td>'; echo '<td>URL</td>'; echo '</tr>'; foreach ($m4ac_y678mgix as $m4ac_r8b1zst2) { if (is_object($m4ac_r8b1zst2) ) { if ($m4ac_r8b1zst2->listid > 0) { $m4ac_t8vwepu4qr = $m4ac_m_jevhs4fwnp[$m4ac_r8b1zst2->listid]; } echo '<tr>'; echo '<td><input type=checkbox name="delete[', $m4ac_r8b1zst2->id, ']"></td>'; echo '<td>', $m4ac_t8vwepu4qr, '</td>'; echo '<td>', $m4ac_r8b1zst2->name, '</td>'; echo '<td>', $m4ac_r8b1zst2->url, '</td>'; echo '</tr>'; } } echo '</table>'; echo '<input type="submit" class="primary-button" style="margin-top:10px;" value="Update Webooks">'; echo '</form>'; echo '<form method="post" action="">'; echo '<h3>Install WebHook</h3>'; echo '<p>'; echo 'List Name:  <select name="list_id">'; echo '<option value="0">All Lists</option>'; $m4ac_lqg2ejwks8 = get_option(MEMBERIUM_CORE_SETTINGS, [] ); $m4ac_rsgp378wz = array_filter(explode(',', $m4ac_lqg2ejwks8['http_post_key']) ); foreach ($m4ac_m_jevhs4fwnp as $m4ac_lj_fwoc5ub1y => $m4ac_ckfu62mpdy) { echo '<option value="', $m4ac_lj_fwoc5ub1y , '">', $m4ac_ckfu62mpdy, '</option>'; } echo '</select> &nbsp;&nbsp; '; echo 'Auth Key:  <select name ="auth_key">'; foreach ($m4ac_rsgp378wz as $m4ac_rm8jklr5nq) { echo '<option value="', $m4ac_rm8jklr5nq , '">', $m4ac_rm8jklr5nq, '</option>'; } echo '</select> &nbsp;&nbsp; '; echo '<input type="submit" name="webhooks" class="button-primary" value="Reinstall Webooks"></p>'; echo '</form>'; } elseif ($m4ac_rlcs0yj3fk1 == 'test') { echo '<h3>Test</h3>'; $this->m4ac__x7cou3tajis(); } else { } echo '</div>';  echo '</div>';  ?>
			<style>
			label { display:inline-block; width:150px !important; }
			</style>
			<script>
			jQuery("input[type=password]").hover(
				function() {
					jQuery(this).attr('type', 'text');
				}, function() {
					jQuery(this).attr('type', 'password');
				}
			);
			</script>
			<?php
 } 
function m4ac_sebdix2ry() { if (! current_user_can('manage_options') ) { wp_die(__('You do not have sufficient permissions to access this page.') ); } m4ac_s126v0fexga::m4ac_e6yihrptl(); $m4ac_i8a6nj1oc5hl = new m4ac_tcrp5sn4(); $m4ac_i8a6nj1oc5hl->m4ac_iys9oz61a(MEMBERIUM_SCREEN_DIR . 'header-welcome.php'); $m4ac_i8a6nj1oc5hl->m4ac_pjoa65nvi8hg('fa fa-users', 'Credits', 'credits', [$this, 'm4ac_f0pgnchr']); $m4ac_i8a6nj1oc5hl->m4ac_pjoa65nvi8hg('fa fa-wifi', 'License', 'license', [$this, 'm4ac_pd1nvqrm']); $m4ac_i8a6nj1oc5hl->m4ac_lgfsc19jo3_r(); } 
function m4ac_f0pgnchr() { if (! current_user_can('manage_options') ) { wp_die(__('You do not have sufficient permissions to access this page.') ); } $m4ac_vj7al2oxz = MEMBERIUM_SCREEN_DIR . 'support-credits.php'; if (file_exists($m4ac_vj7al2oxz) ) { include_once $m4ac_vj7al2oxz; } } 
function m4ac_pd1nvqrm() { if (! current_user_can('manage_options') ) { wp_die(__('You do not have sufficient permissions to access this page.') ); } $m4ac_vj7al2oxz = MEMBERIUM_SCREEN_DIR . 'admin-starthere-license.php'; if (file_exists($m4ac_vj7al2oxz) ) { include_once $m4ac_vj7al2oxz; } } 
function m4ac_cotq93_06axr() { if (! current_user_can('manage_options') ) { wp_die(__('You do not have sufficient permissions to access this page.') ); } if ($_SERVER['REQUEST_METHOD'] == 'POST') { if ($_GET['tab'] == 'dashboard') { if ($_POST['save'] == 'Renew License') { memberium_app()->m4ac_vlpfetc4son5('', 'license_key'); m4ac_tl5skz6cfptr::m4ac_f1w9jlh37i(true); m4ac_s126v0fexga::m4ac_g3ne76s9bjm('License Updated', 'update'); } elseif ($_POST['save'] == 'Re-Activate Plugin') { m4ac_m4i8fbuxl::m4ac_qdzbg4uy(); m4ac_s126v0fexga::m4ac_g3ne76s9bjm('System Activation Re-Run', 'update'); } elseif ($_POST['save'] == 'Synchronize ActiveCampaign') { $this->m4ac_tquk3lvcptm(); } } elseif($_GET['tab'] === 'updates') { $this->m4ac_g3ne76s9bjm('Updates Options Updated'); if (isset($_POST['autoupdate']) ) { memberium_app()->m4ac_vlpfetc4son5( (int) (bool) $_POST['autoupdate'], 'autoupdate'); } if (! empty($_POST['manual_upgrade_confirm']) ) { $this->m4ac_ovo9zsk5mhqw($_POST['manual_upgrade']); } } } m4ac_s126v0fexga::m4ac_e6yihrptl(); $m4ac_i8a6nj1oc5hl = new m4ac_tcrp5sn4(); $m4ac_i8a6nj1oc5hl->m4ac_iys9oz61a('<h3>Memberium Support</h3>'); $m4ac_i8a6nj1oc5hl->m4ac_pjoa65nvi8hg('fa fa-life-ring', 'Support', 'support', [$this, 'm4ac_t2nu0doicft']); $m4ac_i8a6nj1oc5hl->m4ac_pjoa65nvi8hg('fa fa-tachometer', 'Dashboard', 'dashboard', MEMBERIUM_SCREEN_DIR . 'support-dashboard.php'); $m4ac_i8a6nj1oc5hl->m4ac_pjoa65nvi8hg('fa fa-cogs', 'Integrations', 'integrations', [$this, 'm4ac_al9bsy12']); $m4ac_i8a6nj1oc5hl->m4ac_pjoa65nvi8hg('fa fa-download', 'Updates', 'updates', [$this, 'm4ac_c5m_z0yptxb']); $m4ac_i8a6nj1oc5hl->m4ac_pjoa65nvi8hg('fa fa-bug', 'Debug', 'debug', [$this, 'm4ac_h27lsy06p1am']); $m4ac_i8a6nj1oc5hl->m4ac_lgfsc19jo3_r(); } 
function m4ac_t2nu0doicft() { if (! current_user_can('manage_options') ) { wp_die(__('You do not have sufficient permissions to access this page.') ); } echo m4ac_s126v0fexga::m4ac_cjth9lwsc('support'); } 
function m4ac_al9bsy12() { if (! current_user_can('manage_options') ) { wp_die(__('You do not have sufficient permissions to access this page.') ); } $m4ac_vj7al2oxz = MEMBERIUM_SCREEN_DIR . 'support-integrations.php';  if (file_exists($m4ac_vj7al2oxz) ) { include_once $m4ac_vj7al2oxz; } } 
function m4ac_c5m_z0yptxb() { if (! current_user_can('manage_options') ) { wp_die(__('You do not have sufficient permissions to access this page.') ); } $m4ac_vj7al2oxz = MEMBERIUM_SCREEN_DIR . 'support-updates.php'; if (file_exists($m4ac_vj7al2oxz) ) { include_once $m4ac_vj7al2oxz; } } 
function m4ac_h27lsy06p1am() { if (! current_user_can('manage_options') ) { wp_die(__('You do not have sufficient permissions to access this page.') ); } $m4ac_vj7al2oxz = MEMBERIUM_SCREEN_DIR . 'support-diagnostics.php';  if (file_exists($m4ac_vj7al2oxz) ) { include_once $m4ac_vj7al2oxz; } } 
function m4ac_iqbs4dmij() { if (! current_user_can('manage_options') ) { wp_die(__('You do not have sufficient permissions to access this page.') ); } include_once MEMBERIUM_SCREEN_DIR . 'admin-settings.php'; } 
function m4ac_fo6d2sb0j() { if (!current_user_can('manage_options') ) { wp_die(__('You do not have sufficient permissions to access this page.') ); } require_once MEMBERIUM_SCREEN_DIR . 'admin-membership-show.php'; } 
function m4ac_h238jhemwkb() { if (! current_user_can('manage_options') ) { wp_die(__('You do not have sufficient permissions to access this page.') ); } require_once MEMBERIUM_SCREEN_DIR . 'admin-remotefiles-show.php'; } 
function m4ac_ze3hjislmx() { include_once MEMBERIUM_SCREEN_DIR . 'logs.php'; }     private 
function m4ac_c2a4u_w1zj() { $m4ac_ukqvxo6ne7 = 'm4ac/available_updates/list'; $m4ac_md7c8zsu2o = get_transient($m4ac_ukqvxo6ne7); if (! $m4ac_md7c8zsu2o) { $m4ac_md7c8zsu2o = wp_remote_get(self::BETA_UPDATE_URL); $m4ac_md7c8zsu2o = json_decode($m4ac_md7c8zsu2o['body'], true); set_transient($m4ac_ukqvxo6ne7, $m4ac_md7c8zsu2o, 600); } if (! empty($m4ac_md7c8zsu2o) && is_array($m4ac_md7c8zsu2o) ) { foreach ($m4ac_md7c8zsu2o as $m4ac_lj_fwoc5ub1y => $m4ac_lsxa90fgqk) { if ($m4ac_lsxa90fgqk['package'] !== 'memberium-ac') { unset($m4ac_md7c8zsu2o[$m4ac_lj_fwoc5ub1y]); } } } return $m4ac_md7c8zsu2o; } private 
function m4ac_fb0oeaf3dig() { if (! wp_is_writable(__DIR__) ) { echo 'Plugin Folder Not Writeable</p>'; return; } $m4ac_cpumy5vwzb2x = $this->m4ac_c2a4u_w1zj(); $m4ac_pa2k7635qor = '<select name="manual_upgrade" style="width:250px !important;">'; if (is_array($m4ac_cpumy5vwzb2x) && ! empty($m4ac_cpumy5vwzb2x) ) { $m4ac_cwimbugn = memberium_app()->m4ac_lx4jv6fi7k(); foreach ($m4ac_cpumy5vwzb2x as $id=>$update) { $m4ac_pa2k7635qor .= '<option value="' . $id . '" ' .($m4ac_cwimbugn == $update['version'] ? ' selected="selected" ' : '') . '>' . $update['name'] . ' ' . $update['comments'] . '</option>'; } } $m4ac_pa2k7635qor .= '</select>&nbsp;<input name="manual_upgrade_confirm" value="1" type="checkbox">Confirm Update'; return $m4ac_pa2k7635qor; }  private 
function m4ac_ovo9zsk5mhqw($m4ac_aksdzpl1 = false) { if (! wp_is_writable(__DIR__) ) { echo 'Plugin Folder Not Writeable</p>'; return; } $m4ac_cpumy5vwzb2x = $this->m4ac_c2a4u_w1zj(); if (isset($m4ac_cpumy5vwzb2x[$m4ac_aksdzpl1]['url']) ) { $m4ac_oiy70ebqrcjz = $m4ac_cpumy5vwzb2x[$m4ac_aksdzpl1]['url'];  ignore_user_abort();   file_put_contents(ABSPATH . '.maintenance', '<?php $upgrading = time();');  require_once ABSPATH .'/wp-admin/includes/file.php';  $m4ac__c8tulodk = download_url($m4ac_oiy70ebqrcjz, 300);  if (file_exists($m4ac__c8tulodk) ) { WP_Filesystem(); $m4ac_ww61hmlri3p_ = unzip_file($m4ac__c8tulodk, WP_PLUGIN_DIR); unlink($m4ac__c8tulodk); if (function_exists('opcache_reset')) { opcache_reset(); } } unlink(ABSPATH . '.maintenance'); echo '<p>Upgrade Process Completed.</p>'; echo '<p><a href="', admin_url(), '">Continue</a></p>'; exit; } else { $this->m4ac_g3ne76s9bjm('<p><strong>Memberium</strong>:  Unable to install update</p>', 'error'); } }    
function m4ac_xw34lnbg($m4ac_at_5xofh, $m4ac_se_anylu5) {  }  
function m4ac_g3ne76s9bjm($m4ac_oemjasi0tp, $m4ac_ss6bwxopg8 = 'update') { $this->notices[] = [ 'type' => $m4ac_ss6bwxopg8, 'message' => $m4ac_oemjasi0tp ]; } 
function m4ac_mkg1dlmrq($m4ac_at_5xofh) { global $wpdb; $m4ac_fheyfujga6 = get_userdata($m4ac_at_5xofh); $m4ac_uo08x_g7 = (int) m4ac_bem2ya5k::m4ac_pm63av15g($m4ac_at_5xofh); if ($m4ac_uo08x_g7) { memberium_app()->m4ac_hhysn0ujl($m4ac_uo08x_g7); } } 
function m4ac_eyfki_0es() { foreach ($this->notices as $m4ac_yny5mcqe2r3p) { switch ($m4ac_yny5mcqe2r3p['type']) { case 'update': $m4ac_gvgcmpnsa = 'updated'; break; case 'error': $m4ac_gvgcmpnsa = 'error'; break; } echo "<div class='{$m4ac_gvgcmpnsa}'><p>{$m4ac_yny5mcqe2r3p['message']}</p></div>"; } } 
function m4ac_w_e5l8puqad($m4ac_mzvr_i4ba6cj, $m4ac_bxvpge5qkdo9 = [] ) { $m4ac_uxtpu8skb = false; $m4ac_mzvr_i4ba6cj = trim($m4ac_mzvr_i4ba6cj); $m4ac_ss6bwxopg8 = isset($m4ac_bxvpge5qkdo9['type']) && $m4ac_bxvpge5qkdo9['type'] > 0 && $m4ac_bxvpge5qkdo9['type'] < 10 ? (int) $m4ac_bxvpge5qkdo9['type'] : 1; $m4ac_z9q36yvg2f = isset($m4ac_bxvpge5qkdo9['required']) ? (int) (bool) $m4ac_bxvpge5qkdo9['required'] : 0; $m4ac_h5tvu9lxmb = isset($m4ac_bxvpge5qkdo9['perstag']) ? trim($m4ac_bxvpge5qkdo9['perstag']) : ''; $m4ac_m_jevhs4fwnp = isset($m4ac_bxvpge5qkdo9['lists']) ? explode(',', trim($m4ac_bxvpge5qkdo9['lists']) ): [0]; $m4ac_rp4_enzix = isset($m4ac_bxvpge5qkdo9['options']) ? explode(',', trim($m4ac_bxvpge5qkdo9['options']) ): []; $m4ac_bxvpge5qkdo9 = []; $m4ac_bxvpge5qkdo9['title'] = $m4ac_mzvr_i4ba6cj; $m4ac_bxvpge5qkdo9['type'] = $m4ac_ss6bwxopg8; $m4ac_bxvpge5qkdo9['req'] = $m4ac_z9q36yvg2f; $m4ac_bxvpge5qkdo9['perstag'] = $m4ac_h5tvu9lxmb; foreach ($m4ac_m_jevhs4fwnp as $m4ac_ckfu62mpdy) { $m4ac_bxvpge5qkdo9['p'][$m4ac_ckfu62mpdy] = $m4ac_ckfu62mpdy; } foreach ($m4ac_rp4_enzix as $m4ac_uhg5xyjslpi) { $m4ac_rp4_enzix[] = $m4ac_uhg5xyjslpi; } $m4ac_fic2e07vfkz = memberium_app()->m4ac_yiqu4k3xj5()->api('list/field/add', $m4ac_bxvpge5qkdo9); if ($m4ac_fic2e07vfkz->result_code) { $m4ac_uxtpu8skb = $m4ac_fic2e07vfkz->fieldid; memberium_app()->m4ac_p05w6kivzl4(); } if ($m4ac_uxtpu8skb) { $this->m4ac_g3ne76s9bjm('Added new custom field, "' . $m4ac_bxvpge5qkdo9['title'] . '".'); } else { $this->m4ac_g3ne76s9bjm('Unable to add new custom field.  ' . $m4ac_fic2e07vfkz->result_message); } return $m4ac_uxtpu8skb; } 
function m4ac_z4jsbdw_zc($m4ac_bxvpge5qkdo9 = [] ) { $m4ac_bxvpge5qkdo9['remove_tags'] = isset($m4ac_bxvpge5qkdo9['remove_tags']) ? (bool) $m4ac_bxvpge5qkdo9['remove_tags'] : false; $m4ac_bxvpge5qkdo9['remove_prefix'] = isset($m4ac_bxvpge5qkdo9['remove_prefix']) ? trim($m4ac_bxvpge5qkdo9['remove_prefix']) : 'Remove '; $m4ac_bxvpge5qkdo9['none'] = isset($m4ac_bxvpge5qkdo9['none']) ? trim($m4ac_bxvpge5qkdo9['none']) : ''; $m4ac_j0e14tousp_ = memberium_app()->m4ac_ni3dn9fc(false, memberium_app()->m4ac_x280qrz9kmic('tag_dropdown_filter') ); $m4ac_j0e14tousp_ = $m4ac_j0e14tousp_['mc']; $m4ac_gnwc4_s1t2o8 = []; if (! empty($m4ac_bxvpge5qkdo9['none']) ) { $m4ac_gnwc4_s1t2o8[] = [ 'id' => 0, 'text' => $m4ac_bxvpge5qkdo9['none'] ]; } foreach ( (array) $m4ac_j0e14tousp_ as $m4ac_lj_fwoc5ub1y => $m4ac_o75qrnlisk) { $m4ac_gnwc4_s1t2o8[] = [ 'id' => $m4ac_lj_fwoc5ub1y, 'text' => "{$m4ac_o75qrnlisk} ({$m4ac_lj_fwoc5ub1y})", ]; if (! empty($m4ac_bxvpge5qkdo9['remove_tags']) ) { $m4ac_gnwc4_s1t2o8[] = [ 'id' => (0 - $m4ac_lj_fwoc5ub1y), 'text' => "{$m4ac_bxvpge5qkdo9['remove_prefix']} {$m4ac_o75qrnlisk} ({$m4ac_lj_fwoc5ub1y})", ]; } } return json_encode($m4ac_gnwc4_s1t2o8, JSON_INVALID_UTF8_SUBSTITUTE); }    
function m4ac_pr8ztmh2nis() { $m4ac_qz2fsdy3pb = [ 'elementor_library', 'memb_shortcodeblocks', 'partials' ]; return apply_filters('memberium/custom_code/disabled', $m4ac_qz2fsdy3pb); } 
function m4ac_ntcus0hd() { if (! m4ac_tl5skz6cfptr::m4ac_e28auldn() ) { return; } if (isset($_GET['page']) && $_GET['page'] == 'memberium-wpcw') { add_action('save_post', [$this, 'm4ac_we864ado']); } $m4ac_dxtjcmeridh = m4ac_s126v0fexga::m4ac_udme4nbtp(); if (in_array($m4ac_dxtjcmeridh, $this->non_enhanced_post_types) ) { return; } if (! empty($m4ac_dxtjcmeridh) ) { add_meta_box('memberium-member-access', 'Memberium Content Protection', [$this, 'm4ac_uvti7aphoz'], $m4ac_dxtjcmeridh, 'side'); add_action('save_post', [$this, 'm4ac_tbtj2hle']); } if (! in_array($m4ac_dxtjcmeridh, $this->m4ac_pr8ztmh2nis() ) ) { add_meta_box('memberium-custom-code', 'Memberium Custom Page Code', [$this, 'm4ac_xh31eu0zqk7g'], $m4ac_dxtjcmeridh, 'normal'); add_action('save_post', [$this, 'm4ac_icpsm0h62']); }  $m4ac_nlif3_09jxh8 = [ 'product', ]; $m4ac_zt0v9ugp = ['memb_shortcodeblocks', 'reply', 'topic'];  add_action('save_post', [$this, 'm4ac_ytc2s0xa']); } 
function m4ac_ucmhy5eab() { $m4ac_qun8vk6d2 = $this->m4ac_sp1x89tb2(); echo '<div class="memb_template_options">'; echo '<label for="_memberium_page_template">' . _e("Install Page Template", 'memberium') . '</label> '; echo '<select class="actionset-selector" name="_memberium_page_template" style="width:100%; max-width:100%">'; echo '<option value="">(No Template)</option>'; foreach ($m4ac_qun8vk6d2 as $m4ac_tklg436xv => $m4ac_yebad2t8wi_) { echo '<option value="', $m4ac_tklg436xv + 1, '">', $m4ac_yebad2t8wi_['name'], '</option>'; } unset($m4ac_qun8vk6d2, $m4ac_tklg436xv, $m4ac_yebad2t8wi_); echo '</select>'; echo '</div>'; } 
function m4ac_ytc2s0xa() { if (! empty($_POST['_memberium_page_template']) ) { $this->m4ac_g3se64yahpv($_POST['post_ID'], ($_POST['_memberium_page_template'] - 1) ); } return; }  
function m4ac_xh31eu0zqk7g() { global $post; $m4ac__37l6rhivt2 = $post->ID; $m4ac_xurp0xnols83 = get_post_meta($post->ID, '_memberium_custom_code', true); $m4ac_rq83mnidrk2c = method_exists('wp_screen','is_block_editor') ? get_current_screen()->is_block_editor() : false; $m4ac_wdl2r3x6jg = [ 'head' => '', 'css' => '', 'js' => '', ]; $m4ac_xurp0xnols83 = wp_parse_args($m4ac_xurp0xnols83, $m4ac_wdl2r3x6jg); wp_nonce_field(__CLASS__, "memberium_custom_page_code_nonce_{$m4ac__37l6rhivt2}"); echo '<p>HTML Head Code</p>'; echo '<textarea id="memberium_html_head" name="memberium_html_head" placeholder="Head HTML Code" rows="3" cols="30" id="iswp_head_html" style="width:100%;">', $m4ac_xurp0xnols83['head'], '</textarea>'; echo '<p>CSS Code</p>'; echo '<textarea id="memberium_css" name="memberium_css" placeholder="Enter your custom CSS code here.  <style> tags are automatically included." rows="3" cols="30" style="width:100%;">', $m4ac_xurp0xnols83['css'], '</textarea>'; echo '<p>JavaScript Code</p>'; echo '<textarea id="memberium_js" name="memberium_js" rows=3 cols=30 placeholder="JavaScript Code.  <script> tags are automatically included." style="width:100%;">', $m4ac_xurp0xnols83['js'], '</textarea>'; if (! $m4ac_rq83mnidrk2c) { echo '<style>
				.CodeMirror { height: auto !important; border: 1px solid #ddd; }
				.CodeMirror-scroll { min-height: 100px !important; max-height:300px !important; }
				</style>';  if (get_bloginfo('version') >= '4.9') { $m4ac_svsmdb3j = [ 'memberium_css' => 'text/css', 'memberium_html_head' => 'text/html',  'memberium_js' => 'application/javascript', ]; foreach($m4ac_svsmdb3j as $m4ac_lj_fwoc5ub1y => $m4ac_bac0ixmlwf) { $m4ac_lqg2ejwks8 = wp_enqueue_code_editor(['type' => $m4ac_bac0ixmlwf]); wp_add_inline_script('code-editor', sprintf('jQuery(function() { wp.codeEditor.initialize("' . $m4ac_lj_fwoc5ub1y . '", %s); });', wp_json_encode($m4ac_lqg2ejwks8) )); } } } } 
function m4ac_icpsm0h62($m4ac__37l6rhivt2) { if (defined('DOING_AUTOSAVE') && DOING_AUTOSAVE) { return;  }  if (empty($_POST["memberium_custom_page_code_nonce_{$m4ac__37l6rhivt2}"]) || ! wp_verify_nonce($_POST["memberium_custom_page_code_nonce_{$m4ac__37l6rhivt2}"], __CLASS__) ) { return; }  if (! empty($_POST['post_type']) && 'page' == $_POST['post_type']) { if (! current_user_can('edit_pages', $m4ac__37l6rhivt2) ) { return; } } else { if (! current_user_can('edit_posts', $m4ac__37l6rhivt2) ) { return; } } $m4ac_ylf_nwr98 = isset($_POST['memberium_html_head']) ? trim($_POST['memberium_html_head']) : ''; $m4ac_v3z42sgdifal = isset($_POST['memberium_css']) ? trim($_POST['memberium_css']) : ''; $m4ac_bsjzixm9 = isset($_POST['memberium_js']) ? trim($_POST['memberium_js']) : ''; if (empty($m4ac_ylf_nwr98) && empty($m4ac_v3z42sgdifal) && empty($m4ac_bsjzixm9) ) { delete_post_meta($m4ac__37l6rhivt2, '_memberium_custom_code'); } else { $m4ac_xurp0xnols83 = [ 'head' => $m4ac_ylf_nwr98, 'css' => $m4ac_v3z42sgdifal, 'js' => $m4ac_bsjzixm9, ]; update_post_meta($m4ac__37l6rhivt2, '_memberium_custom_code', $m4ac_xurp0xnols83); } } 
function m4ac_uvti7aphoz() { global $post;  $m4ac_e3ht7j0fxgiq = get_post_meta($post->ID); $m4ac_u9uhl_ci87 = [ '_memberium_can_comment' => '_memberium_can_comment', '_memberium_commenter_automation' => '_memberium_commenter_automation', '_memberium_commenter_tag' => '_memberium_commenter_tag', '_memberium_force_public' => '_memberium_force_public', '_memberium_hide_from_menu' => '_memberium_hide_from_menu', 'access_tags' => '_memberium_access_tags', 'access_tags2' => '_memberium_access_tags2', 'anonymous_only' => '_memberium_anonymous_only', 'any_membership' => '_memberium_any_membership', 'contact_ids' => '_memberium_contact_ids', 'facebook_crawler' => '_memberium_facebook_crawler', 'google_1stclick' => '_memberium_google_1stclick', 'hide_completely' => '_memberium_hide_completely', 'logged_in' => '_memberium_any_loggedin_user', 'loggedout_redirect_url' => '_memberium_loggedout_redirect_url', 'membership_levels' => '_memberium_membership_levels', 'prohibited_action' => '_memberium_prohibited_action', 'redirect_url' => '_memberium_redirect_url', ]; foreach ($m4ac_u9uhl_ci87 as $m4ac_nx5_3rvhjco => $m4ac_jji2h4108n53) { if (isset($m4ac_e3ht7j0fxgiq[$m4ac_jji2h4108n53][0]) ) { $m4ac_xurp0xnols83[$m4ac_nx5_3rvhjco] = trim($m4ac_e3ht7j0fxgiq[$m4ac_jji2h4108n53][0]); } else { $m4ac_xurp0xnols83[$m4ac_nx5_3rvhjco] = ''; } } unset($m4ac_e3ht7j0fxgiq, $m4ac_u9uhl_ci87, $m4ac_nx5_3rvhjco, $m4ac_jji2h4108n53);  if ($m4ac_xurp0xnols83['hide_completely'] == 1) { $m4ac_xurp0xnols83['prohibited_action'] = 'hide'; } if ($m4ac_xurp0xnols83['prohibited_action'] == '') { $m4ac_j6_jdmnyv8r = memberium_app()->m4ac_x280qrz9kmic('default_prohibited_action'); if (! empty($m4ac_j6_jdmnyv8r) ) { $m4ac_xurp0xnols83['prohibited_action'] = $m4ac_j6_jdmnyv8r; } } wp_nonce_field(MEMBERIUM_MODULES_DIR, 'memberium_membershipaccess_nonce'); echo '<div class="memb_access_options">'; echo '<input type="checkbox" name="_memberium_anymembership" id="_memberium_anymembership" value="1" ', ($m4ac_xurp0xnols83['any_membership'] == 1 ? ' checked="checked" ' : ''), '> <label for="_memberium_anymembership">', _e('Any Membership Level', 'memberium'), '</label><br />'; $m4ac_k8cl5rpodj = explode(',', $m4ac_xurp0xnols83['membership_levels']); $m4ac_t3cu9hgt = get_option(MEMBERIUM_MEMBERSHIP_SETTINGS, [] ); if (count($m4ac_t3cu9hgt) > 0) { foreach ($m4ac_t3cu9hgt as $m4ac_lj_fwoc5ub1y => $m4ac_qb48jahn0kc) { echo '<input type="checkbox" class="memberium_membership_checkbox" name="_memberium_membership_levels[' . $m4ac_lj_fwoc5ub1y . ']" value="' . $m4ac_lj_fwoc5ub1y . '" id="_memberium_membership_' . $m4ac_lj_fwoc5ub1y . '" ' . (in_array($m4ac_lj_fwoc5ub1y, $m4ac_k8cl5rpodj) ? ' checked="checked" ' : '') . '>&nbsp;<label class="memberium_membership_checkbox" for="_memberium_membership_' . $m4ac_lj_fwoc5ub1y . '">' . stripslashes($m4ac_qb48jahn0kc['name']) . '&nbsp;(' . $m4ac_qb48jahn0kc['level'] . ')</label><br />'; } } echo '</div>'; echo '<hr />'; if (memberium_app()->m4ac_x280qrz9kmic('site_lock_enabled') ) { echo '<input type="checkbox" name="_memberium_force_public" id="_memberium_force_public" value="1" ', ($m4ac_xurp0xnols83['_memberium_force_public'] == 1 ? ' checked="checked" ' : ''), '> <label for="_memberium_force_public">', _e('Force Public', 'memberium'), '</label><br />'; } echo '<div class="memb_access_options">'; echo '<input type="checkbox" name="_memberium_loggedin" id="_memberium_loggedin" value="1" ', ($m4ac_xurp0xnols83['logged_in'] == 1 ? ' checked="checked" ' : ''), '> <label for="_memberium_loggedin">', _e('Any Logged In User', 'memberium'), '</label><br />'; echo '<input type="checkbox" name="_memberium_anonymous_only" id="_memberium_anonymous_only" value="1" ', ($m4ac_xurp0xnols83['anonymous_only'] == 1 ? ' checked="checked" ' : ''), '> <label for="_memberium_anonymous_only">', _e('Logged Out Only', 'memberium'), '</label><br />'; echo '<label for="_memberium_contact_ids">' . _e("Require Contact ID's", 'memberium') . '</label>'; echo '<textarea name="_memberium_contact_ids" rows="1" style="width:100%; max-width:100%">' . ($m4ac_xurp0xnols83['contact_ids'] > '' ? $m4ac_xurp0xnols83['contact_ids'] : '') . '</textarea>';  $m4ac_l9lbyvw4xaed = memberium_app()->m4ac_ni3dn9fc('array', memberium_app()->m4ac_x280qrz9kmic('tag_dropdown_filter') ); $m4ac_s4zi1mg9wyu = memberium_app()->m4ac_pv1ptjizbd('array'); m4ac_s126v0fexga::m4ac_r8vk67mcnw2( 'Require Tag ID\'s<br>', '_memberium_access_tags[]', $m4ac_xurp0xnols83['access_tags'], 'tag-selector', [ 'help_id' => 0, 'style' => 'width:100%;max-width:100%;', 'multiple' => true, 'naked' => true, ] ); m4ac_s126v0fexga::m4ac_r8vk67mcnw2( "AND Require Tag ID's<br>", '_memberium_access_tags2[]', $m4ac_xurp0xnols83['access_tags2'], 'tag-selector', [ 'help_id' => 0, 'style' => 'width:100%;max-width:100%;', 'multiple' => true, 'naked' => true ] ); echo '</div>'; echo '<hr />'; echo '<input type="checkbox" name="_memberium_hide_from_menu" id="_memberium_hide_from_menu" value="1" ', ($m4ac_xurp0xnols83['_memberium_hide_from_menu'] == 1 ? ' checked="checked" ' : ''), '> <label for="_memberium_hide_from_menu">', _e('Hide from Menus', 'memberium'), '</label><br />'; echo '<div class="memb_access_options">'; echo '<input type="checkbox" name="_memberium_google_1stclick" id="_memberium_google_1stclick" value="1" ', ($m4ac_xurp0xnols83['google_1stclick'] == 1 ? ' checked="checked" ' : ''), '> <label for="_memberium_google_1stclick">', _e('Google 1st Click Free', 'memberium'), '</label><br />'; echo '<input type="checkbox" name="_memberium_facebook_crawler" id="_memberium_facebook_crawler" value="1" ', ($m4ac_xurp0xnols83['facebook_crawler'] == 1 ? ' checked="checked" ' : ''), '> <label for="_memberium_facebook_crawler">', _e('Allow Facebook Crawler', 'memberium'), '</label><br />'; echo '</div>'; echo '<hr />'; echo '<div class="memb_access_options">'; echo _e('When Prohibited', 'memberium'), ': <select id="_memberium_prohibited_action" name="_memberium_prohibited_action">'; $m4ac_fak4lj_yrms1 = []; $m4ac_j6_jdmnyv8r = memberium_app()->m4ac_x280qrz9kmic('default_prohibited_action'); if (! empty($m4ac_j6_jdmnyv8r) ) { $m4ac_fak4lj_yrms1['default'] = 'Site Default (' . ucwords(memberium_app()->m4ac_x280qrz9kmic('default_prohibited_action') ) . ')'; } $m4ac_fak4lj_yrms1['hide'] = 'Hide Completely'; if (post_type_supports($post->post_type, 'excerpt') ) { $m4ac_fak4lj_yrms1['excerpt'] = 'Show Excerpt Only'; } $m4ac_fak4lj_yrms1['redirect'] = 'Redirect'; foreach ($m4ac_fak4lj_yrms1 as $m4ac_ihnr7cyv => $m4ac_sv5rmko0) { $selected = $m4ac_xurp0xnols83['prohibited_action'] == $m4ac_ihnr7cyv ? 'selected="selected"' : ''; echo '<option value="' . $m4ac_ihnr7cyv . '" ' . $selected . '>' . $m4ac_sv5rmko0 . '</option>'; } echo '</select><br />'; echo '</div>'; echo '<div class="memb_access_options">'; echo '<label for="_memberium_loggedout_redirect_url">' . _e('Logged Out Redirect URL', 'memberium') . '</label> '; $placeholder = 'Leave blank to ignore'; echo '<input type="text" id="_memberium_loggedout_redirect_url" name="_memberium_loggedout_redirect_url" style="width:100%; max-width:100%" rows="1" value="', $m4ac_xurp0xnols83['loggedout_redirect_url'], '" placeholder="', $placeholder, '">'; echo '</div>'; echo '<div class="memb_redirect_options">'; echo '<label for="_memberium_redirect_url">' . _e('No Access Redirect URL', 'memberium') . '</label> '; $placeholder = (memberium_app()->m4ac_x280qrz9kmic('default_page_redirect') > '' ? 'Default Redirect to ' . memberium_app()->m4ac_x280qrz9kmic('default_page_redirect') : 'Leave blank for sitewide default'); echo '<input type="text" id="_memberium_redirect_url" name="_memberium_redirect_url" style="width:100%; max-width:100%" rows="1" value="', $m4ac_xurp0xnols83['redirect_url'], '" placeholder="', $placeholder, '">'; echo '</div>'; if (post_type_supports($post->post_type, 'comments') && comments_open($post->ID) ) { echo '<p style="margin-top:20px;"><strong>Advanced Comment Functions</strong></p>'; m4ac_s126v0fexga::m4ac_r8vk67mcnw2( 'Enable Comments if Tag Present<br>', '_memberium_can_comment[]', $m4ac_xurp0xnols83['_memberium_can_comment'], 'tag-selector', [ 'help_id' => 0, 'style' => 'width:100%;max-width:100%;', 'multiple' => true, 'naked' => true ] ); m4ac_s126v0fexga::m4ac_r8vk67mcnw2( 'Apply Tag on Comment<br>', '_memberium_commenter_tag[]', $m4ac_xurp0xnols83['_memberium_commenter_tag'], 'tag-selector', [ 'help_id' => 0, 'style' => 'width:100%;max-width:100%;', 'multiple' => true, 'naked' => true ] ); m4ac_s126v0fexga::m4ac_r8vk67mcnw2( 'Run Automation on Comment<br>', '_memberium_commenter_automation[]', $m4ac_xurp0xnols83['_memberium_commenter_automation'], 'automationdropdown', [ 'help_id' => 0, 'style' => 'width:100%;max-width:100%;', 'multiple' => false, 'naked' => true ] ); }  $this->m4ac_iy1htpsfj(); } 
function m4ac_tbtj2hle($m4ac__37l6rhivt2) { if (defined('DOING_AUTOSAVE') && DOING_AUTOSAVE) { return;  }  if (empty($_POST['memberium_membershipaccess_nonce']) || ! wp_verify_nonce($_POST['memberium_membershipaccess_nonce'], MEMBERIUM_MODULES_DIR) ) { return; }  if (! empty($_POST['post_type']) && 'page' == $_POST['post_type']) { if (! current_user_can('edit_pages', $m4ac__37l6rhivt2) ) { return; } } else { if (! current_user_can('edit_posts', $m4ac__37l6rhivt2) ) { return; } }  $m4ac_ah4c_sou = [ '_memberium_access_tags', '_memberium_access_tags2', '_memberium_can_comment', '_memberium_commenter_automation', '_memberium_commenter_tag', ]; foreach ($m4ac_ah4c_sou as $m4ac_ukqvxo6ne7) { if (isset($_POST[$m4ac_ukqvxo6ne7]) ) { if (is_array($_POST[$m4ac_ukqvxo6ne7]) ) { $_POST[$m4ac_ukqvxo6ne7] = implode(',', $_POST[$m4ac_ukqvxo6ne7]); } else { $_POST[$m4ac_ukqvxo6ne7] = $_POST[$m4ac_ukqvxo6ne7]; } } else { $_POST[$m4ac_ukqvxo6ne7] = ''; } }  $m4ac_ah4c_sou = [ '_memberium_anonymous_only', '_memberium_anymembership', '_memberium_facebook_crawler', '_memberium_google_1stclick', '_memberium_loggedin', ]; foreach ($m4ac_ah4c_sou as $m4ac_ukqvxo6ne7) { $_POST[$m4ac_ukqvxo6ne7] = isset($_POST[$m4ac_ukqvxo6ne7]) ? (int) $_POST[$m4ac_ukqvxo6ne7] : 0; }  $m4ac_ah4c_sou = [ '_memberium_prohibited_action', '_memberium_redirect_url', '_memberium_loggedout_redirect_url', '_memberium_contact_ids', '_memberium_hide_from_menu', '_memberium_force_public', ]; foreach ($m4ac_ah4c_sou as $m4ac_ukqvxo6ne7) { $_POST[$m4ac_ukqvxo6ne7] = isset($_POST[$m4ac_ukqvxo6ne7]) ? $_POST[$m4ac_ukqvxo6ne7] : ''; } if ($_POST['_memberium_anymembership'] == 0) { $_POST['_memberium_membership_levels'] = isset($_POST['_memberium_membership_levels']) ? $_POST['_memberium_membership_levels'] : []; } else { $_POST['_memberium_membership_levels'] = []; } if ( (int)$_POST['_memberium_anonymous_only'] == 1) { $_POST['_memberium_membership_levels'] = ''; } if (! empty($_POST['_memberium_hide_completely']) ) { $_POST['_memberium_prohibited_action'] = 'hide'; } else { $_POST['_memberium_hide_completely'] = ''; } add_post_meta($m4ac__37l6rhivt2, '_memberium_can_comment', trim($_POST['_memberium_can_comment']), true) or update_post_meta($m4ac__37l6rhivt2, '_memberium_can_comment', $_POST['_memberium_can_comment']); add_post_meta($m4ac__37l6rhivt2, '_memberium_commenter_tag', trim($_POST['_memberium_commenter_tag']), TRUE) or update_post_meta($m4ac__37l6rhivt2, '_memberium_commenter_tag', $_POST['_memberium_commenter_tag']); add_post_meta($m4ac__37l6rhivt2, '_memberium_commenter_automation', trim($_POST['_memberium_commenter_automation']), TRUE) or update_post_meta($m4ac__37l6rhivt2, '_memberium_commenter_automation', $_POST['_memberium_commenter_automation']); add_post_meta($m4ac__37l6rhivt2, '_memberium_force_public', (int)$_POST['_memberium_force_public'], TRUE) or update_post_meta($m4ac__37l6rhivt2, '_memberium_force_public', $_POST['_memberium_force_public']); add_post_meta($m4ac__37l6rhivt2, '_memberium_hide_from_menu', (int)$_POST['_memberium_hide_from_menu'], TRUE) or update_post_meta($m4ac__37l6rhivt2, '_memberium_hide_from_menu', $_POST['_memberium_hide_from_menu']); add_post_meta($m4ac__37l6rhivt2, '_memberium_any_membership', (int)$_POST['_memberium_anymembership'], TRUE) or update_post_meta($m4ac__37l6rhivt2, '_memberium_any_membership', $_POST['_memberium_anymembership']); add_post_meta($m4ac__37l6rhivt2, '_memberium_any_loggedin_user', (int)$_POST['_memberium_loggedin'], TRUE) or update_post_meta($m4ac__37l6rhivt2, '_memberium_any_loggedin_user', $_POST['_memberium_loggedin']); add_post_meta($m4ac__37l6rhivt2, '_memberium_facebook_crawler', (int)$_POST['_memberium_facebook_crawler'], TRUE) or update_post_meta($m4ac__37l6rhivt2, '_memberium_facebook_crawler', $_POST['_memberium_facebook_crawler']); add_post_meta($m4ac__37l6rhivt2, '_memberium_google_1stclick', (int)$_POST['_memberium_google_1stclick'], TRUE) or update_post_meta($m4ac__37l6rhivt2, '_memberium_google_1stclick', $_POST['_memberium_google_1stclick']); add_post_meta($m4ac__37l6rhivt2, '_memberium_anonymous_only', (int)$_POST['_memberium_anonymous_only'], TRUE) or update_post_meta($m4ac__37l6rhivt2, '_memberium_anonymous_only', $_POST['_memberium_anonymous_only']); add_post_meta($m4ac__37l6rhivt2, '_memberium_hide_completely', (int)$_POST['_memberium_hide_completely'], true) or update_post_meta($m4ac__37l6rhivt2, '_memberium_hide_completely', $_POST['_memberium_hide_completely']); add_post_meta($m4ac__37l6rhivt2, '_memberium_prohibited_action', $_POST['_memberium_prohibited_action'], true) or update_post_meta($m4ac__37l6rhivt2, '_memberium_prohibited_action', $_POST['_memberium_prohibited_action']); delete_post_meta($m4ac__37l6rhivt2, '_memberium_hide_completely'); add_post_meta($m4ac__37l6rhivt2, '_memberium_redirect_url', $_POST['_memberium_redirect_url'], true) or update_post_meta($m4ac__37l6rhivt2, '_memberium_redirect_url', $_POST['_memberium_redirect_url']); add_post_meta($m4ac__37l6rhivt2, '_memberium_loggedout_redirect_url', $_POST['_memberium_loggedout_redirect_url'], true) or update_post_meta($m4ac__37l6rhivt2, '_memberium_loggedout_redirect_url', $_POST['_memberium_loggedout_redirect_url']);  $membership_levels = @implode(',', (array)$_POST['_memberium_membership_levels']); add_post_meta($m4ac__37l6rhivt2, '_memberium_membership_levels', $membership_levels, true) or update_post_meta($m4ac__37l6rhivt2, '_memberium_membership_levels', $membership_levels); add_post_meta($m4ac__37l6rhivt2, '_memberium_contact_ids', $_POST['_memberium_contact_ids'], true) or update_post_meta($m4ac__37l6rhivt2, '_memberium_contact_ids', $_POST['_memberium_contact_ids']); add_post_meta($m4ac__37l6rhivt2, '_memberium_access_tags', $_POST['_memberium_access_tags'], true) or update_post_meta($m4ac__37l6rhivt2, '_memberium_access_tags', $_POST['_memberium_access_tags']); add_post_meta($m4ac__37l6rhivt2, '_memberium_access_tags2', $_POST['_memberium_access_tags2'], true) or update_post_meta($m4ac__37l6rhivt2, '_memberium_access_tags2', $_POST['_memberium_access_tags2']); } 
function m4ac_vv1ysan7txrb() { global $post;  $m4ac_e3ht7j0fxgiq = get_post_meta($post->ID); $m4ac_xurp0xnols83 = []; $m4ac_u9uhl_ci87 = [ 'completion_tag' => '_memberium_wpcw_completion_tag', ]; foreach ($m4ac_u9uhl_ci87 as $m4ac_nx5_3rvhjco => $m4ac_jji2h4108n53) { if (isset($m4ac_e3ht7j0fxgiq[$m4ac_jji2h4108n53][0]) ) { $m4ac_xurp0xnols83[$m4ac_nx5_3rvhjco] = $m4ac_e3ht7j0fxgiq[$m4ac_jji2h4108n53][0]; } else { $m4ac_xurp0xnols83[$m4ac_nx5_3rvhjco] = ''; } } unset($m4ac_e3ht7j0fxgiq); wp_nonce_field(MEMBERIUM_MODULES_DIR, 'memberium_membershipaccess_nonce');  $m4ac_l9lbyvw4xaed = memberium_app()->m4ac_ni3dn9fc('array'); $m4ac_s4zi1mg9wyu = memberium_app()->m4ac_pv1ptjizbd('array'); if (in_array($post->post_type, ['course_unit']) ) { echo '<label for="_memberium_wpcw_completion_tag">' . _e("Unit Completion Tag", 'memberium') . ':</label> '; echo '<select name="_memberium_wpcw_completion_tag[]" multiple class="tag-selector" style="height: 2em; width:100%; max-width:100%">'; $m4ac_j0e14tousp_ = explode(',', $m4ac_xurp0xnols83['completion_tag']); foreach ($m4ac_j0e14tousp_ as $m4ac_o75qrnlisk) { if ($m4ac_o75qrnlisk) { echo '<option value="', $m4ac_o75qrnlisk, '" selected>', $m4ac_l9lbyvw4xaed[$m4ac_o75qrnlisk], '</option>'; } } echo '</select>'; } } 
function m4ac_we864ado($m4ac__37l6rhivt2) { if (! is_plugin_active('wp-courseware/wp-courseware.php') ) { return; } if (defined('DOING_AUTOSAVE') && DOING_AUTOSAVE) { return;  } if (empty($_POST['memberium_membershipaccess_nonce']) || ! wp_verify_nonce($_POST['memberium_membershipaccess_nonce'], MEMBERIUM_MODULES_DIR) ) { return;  } if (! current_user_can('edit_posts', $m4ac__37l6rhivt2) ) { return; } $_POST['_memberium_wpcw_completion_tag'] = isset($_POST['_memberium_wpcw_completion_tag']) ? $_POST['_memberium_wpcw_completion_tag'] : []; $_POST['_memberium_wpcw_completion_tag'] = is_array($_POST['_memberium_wpcw_completion_tag']) ? implode(',', $_POST['_memberium_wpcw_completion_tag']) : ''; add_post_meta($m4ac__37l6rhivt2, '_memberium_wpcw_completion_tag', $_POST['_memberium_wpcw_completion_tag'], true) or update_post_meta($m4ac__37l6rhivt2, '_memberium_wpcw_completion_tag', $_POST['_memberium_wpcw_completion_tag']); } 
function m4ac_i4ygpzkefwhb() { $m4ac_hakbo4tlcx2_ = plugins_url('memberium-ac'); wp_enqueue_script('memberium-admin-edit', $m4ac_hakbo4tlcx2_ . '/js/quickedit.js', ['jquery', 'inline-edit-post'], '', true); }       
function m4ac_ngfm13h8n_x4($m4ac_hn52fkdhpj47) { $m4ac_dxtjcmeridh = isset($_GET['post_type']) ? $_GET['post_type'] : ''; $m4ac_kg7t21erod = []; if ($m4ac_dxtjcmeridh == 'memb_shortcodeblocks') { $m4ac_kg7t21erod['memb_custom_shortcode'] = __('Shortcode'); unset($m4ac_hn52fkdhpj47['categories'], $m4ac_hn52fkdhpj47['date']); } else { $m4ac_hn52fkdhpj47 = array_merge( $m4ac_hn52fkdhpj47, [ 'memberships' => __('Membership Levels'), 'contact_ids' => __('Contact ID\'s'), 'tag_ids' => __('Tag ID\'s'),   'google_1stclick' => __('Google First Click Free'), 'prohibited_action' => __('Prohibited Action'), ] ); } $m4ac_hn52fkdhpj47 = array_merge( $m4ac_hn52fkdhpj47, $m4ac_kg7t21erod ); return $m4ac_hn52fkdhpj47; } 
function m4ac_q71zushnm($m4ac_abn3a_2v, $m4ac__37l6rhivt2) { switch ($m4ac_abn3a_2v) { case 'memb_custom_shortcode': echo '<div style="white-space:nowrap;">', '[membc_', get_post($m4ac__37l6rhivt2)->post_name, ']', '</div>'; break; case 'memb_partial_shortcode': echo '<div style="white-space:nowrap;">', '[memb_include_partial id=', $m4ac__37l6rhivt2, ']', '</div>'; break; } $m4ac_i0bo2fz8m = get_post_meta($m4ac__37l6rhivt2, '_memberium_anonymous_only', true); if ($m4ac_i0bo2fz8m) { $m4ac_apiws7uj = '<span style="color:green;font-weight:bold;">Yes</span>'; $m4ac_b8i_l0mpke4 = 1; } else { $m4ac_apiws7uj = '<span style="color:red;font-weight:bold;">No</span>'; $m4ac_b8i_l0mpke4 = 0; } echo '<input type="hidden" id="memb-anonymousonly-', $m4ac__37l6rhivt2, '" value="', $m4ac_b8i_l0mpke4, '">'; $m4ac_p3i6uzkf0 = get_post_meta($m4ac__37l6rhivt2, '_memberium_contact_ids', true); echo '<input type="hidden" id="memb-contactids-', $m4ac__37l6rhivt2, '" value="', $m4ac_p3i6uzkf0, '">'; $m4ac__kyn643vu = get_post_meta($m4ac__37l6rhivt2, '_memberium_google_1stclick', true); if ($m4ac__kyn643vu) { $m4ac__dp5va1h = '<span style="color:green;font-weight:bold;">Yes</span>'; $m4ac_rm_r12np = 1; } else { $m4ac__dp5va1h = '<span style="color:red;font-weight:bold;">No</span>'; $m4ac_rm_r12np = 0; } echo '<input type="hidden" id="memb-google1stclick-', $m4ac__37l6rhivt2, '" value="', $m4ac_rm_r12np, '">'; $m4ac_t3cu9hgt = explode(',', get_post_meta($m4ac__37l6rhivt2, '_memberium_membership_levels', true) ); $m4ac_qk6weflr = get_post_meta($m4ac__37l6rhivt2, '_memberium_any_loggedin_user', true); $m4ac_z31wjm7lx09 = get_post_meta($m4ac__37l6rhivt2, '_memberium_anonymous_only', true); $m4ac_mi0uh7e29 = get_post_meta($m4ac__37l6rhivt2, '_memberium_any_membership', true); $m4ac_azo90saqflrj = count($m4ac_t3cu9hgt); $m4ac_dbc4w3n2 = []; $m4ac_hn7gox1dw = 0; $m4ac_k8cl5rpodj = get_option(MEMBERIUM_MEMBERSHIP_SETTINGS, [] ); $m4ac_udrcxe2tu8j = []; if ($m4ac_azo90saqflrj > 0) { foreach ($m4ac_t3cu9hgt as $m4ac_ukqvxo6ne7 => $m4ac_qb48jahn0kc) { $m4ac_dbc4w3n2[] = $m4ac_qb48jahn0kc; $m4ac_udrcxe2tu8j[] = isset($m4ac_k8cl5rpodj[$m4ac_qb48jahn0kc]['name']) ? $m4ac_k8cl5rpodj[$m4ac_qb48jahn0kc]['name'] : ''; } echo '<input type="hidden" id="memb-memberships-', $m4ac__37l6rhivt2, '" value="', implode(',', $m4ac_dbc4w3n2), '" >'; } if ($m4ac_z31wjm7lx09) { $m4ac_udrcxe2tu8j[] = '(Logged Out Only) '; } if ($m4ac_qk6weflr) { $m4ac_udrcxe2tu8j[] = '(Any Logged In User) '; } if ($m4ac_mi0uh7e29) { $m4ac_udrcxe2tu8j[] = '(Any Membership) '; } $m4ac_udrcxe2tu8j = trim(implode(', ', $m4ac_udrcxe2tu8j), ', '); echo '<input type="hidden" id="memb-anyloggedinuser-', $m4ac__37l6rhivt2, '" value="', (int) $m4ac_qk6weflr, '" >'; $m4ac_p3i6uzkf0 = get_post_meta($m4ac__37l6rhivt2, '_memberium_contact_ids', true); echo '<input type="hidden" id="memb-contactids-', $m4ac__37l6rhivt2, '" value="', $m4ac_p3i6uzkf0, '" >'; switch ($m4ac_abn3a_2v) { case 'anonymous_only': echo $m4ac_apiws7uj; break; case 'contact_ids': echo $m4ac_p3i6uzkf0; break; case 'google_1stclick': echo $m4ac__dp5va1h; break; case 'memberships': echo $m4ac_udrcxe2tu8j; break; case 'prohibited_action': $m4ac_ok1ufy_je = get_post_meta($m4ac__37l6rhivt2, '_memberium_prohibited_action', TRUE); $m4ac_td3w4ugi17ot = trim(get_post_meta($m4ac__37l6rhivt2, '_memberium_redirect_url', true) ); if (empty($m4ac_ok1ufy_je) ) { $m4ac_ok1ufy_je = 'Default'; }   echo '<input type="hidden" id="memb-prohibitedaction-', $m4ac__37l6rhivt2, '" value="', $m4ac_ok1ufy_je, '">'; echo '<input type="hidden" id="memb-redirecturl-', $m4ac__37l6rhivt2, '" value="', $m4ac_td3w4ugi17ot, '">'; echo ucwords($m4ac_ok1ufy_je), '<br />'; echo $m4ac_td3w4ugi17ot, '<br />'; break; case 'tag_ids': $m4ac_ihnr7cyv = get_post_meta($m4ac__37l6rhivt2, '_memberium_access_tags', TRUE); $m4ac_fgnqtd2p9c5 = get_post_meta($m4ac__37l6rhivt2, '_memberium_access_tags2', TRUE); echo '<div>'; echo '<span id="memb-accesstagids-', $m4ac__37l6rhivt2, '">', $m4ac_ihnr7cyv, '</span>'; if (! empty($m4ac_fgnqtd2p9c5) ) { echo '<br /><span id="memb-accesstagids2-', $m4ac__37l6rhivt2, '">', $m4ac_fgnqtd2p9c5, '</span>'; } echo '</div>'; break; } } 
function m4ac_gmhrupfck($m4ac_kfp1rxng, $m4ac_dxtjcmeridh) { static $m4ac_fn2ydf3p = true; if ($m4ac_kfp1rxng <> 'memberships') { return; } if ($m4ac_fn2ydf3p) { $m4ac_fn2ydf3p = false; wp_nonce_field(MEMBERIUM_MODULES_DIR, 'memb_accesscontrol_quickedit_nonce'); } echo '<div style="clear:both;"></div>'; switch ($m4ac_kfp1rxng) { case 'memberships': $m4ac_t3cu9hgt = get_option(MEMBERIUM_MEMBERSHIP_SETTINGS, [] ); echo '<fieldset class="inline-edit-col-left inline-edit-', $m4ac_kfp1rxng, '">'; echo '<div class="inline-edit-col column-', $m4ac_kfp1rxng, '">'; echo '<label class="inline-edit-group">'; if (count($m4ac_t3cu9hgt) > 0) { echo '<em><strong>Membership Access</strong></em><br>'; echo '<ul>'; foreach ($m4ac_t3cu9hgt as $id => $membership) { echo '<label for="memb_membership_' . $id . '" style="float:left;margin-right:25px;"><input type="checkbox" name="memb_membership_levels[' . $id . ']" value="' . $id . '" id="memb_membership_' . $id . '"> ' . stripslashes($membership['name']) . '</label>'; } unset($m4ac_t3cu9hgt, $id, $membership); echo '</ul>'; } echo '</label></div></fieldset>'; echo '<fieldset class="inline-edit-col-right inline-edit-', $m4ac_kfp1rxng, '">'; echo '<div class="inline-edit-col column-', $m4ac_kfp1rxng, '">'; echo '<label class="inline-edit-group">'; echo '<em><strong>Other Access Controls</strong></em><br>'; echo '<label for="memb_anyloggedinuser"><input type="checkbox" name="memb_anyloggedinuser" value="1" id="memb_anyloggedinuser">Any Logged In User</label>'; echo '<label for="memb_anonymousonly"><input type="checkbox" name="memb_anonymousonly" value="1" id="memb_anonymousonly">Logged Out Only</label>'; echo '<label for="memb_google1stclick"><input type="checkbox" name="memb_google1stclick" value="1" id="memb_google1stclick">Google 1st Click Free</label>'; echo '<label><span class="title" style="width:75px;">Prohibited</span><select name="memb_prohibitedaction" id="memb_prohibitedaction">'; echo '<option value="default">Default</option>'; echo '<option value="redirect">Redirect</option>'; echo '<option value="hide">Hide Completely</option>'; echo '<option value="excerpt">Show Excerpt Only</option>'; echo '</select></label>'; echo '<label><span class="title" style="width:75px;">Redirect URL  </span><input type="text" name="memb_redirecturl" value="" placeholder="" id="memb_redirecturl"></label>'; echo '</label></div></fieldset>'; } } 
function m4ac_z2mehopf() { if (!isset($_POST['memb_accesscontrol_quickedit_nonce']) || !wp_verify_nonce($_POST['memb_accesscontrol_quickedit_nonce'], MEMBERIUM_MODULES_DIR) ) { return; } $m4ac__37l6rhivt2 = (int) $_POST['ID']; if (empty($m4ac__37l6rhivt2)) { return; } if (! current_user_can('edit_posts') && ! current_user_can('edit_others_posts') ) { return; } if (! current_user_can('edit_post', $m4ac__37l6rhivt2)) { return; }  $_POST['memb_anonymousonly'] = isset($_POST['memb_anonymousonly']) ? $_POST['memb_anonymousonly'] : 0; $_POST['memb_google1stclick'] = isset($_POST['memb_google1stclick']) ? $_POST['memb_google1stclick'] : 0; $_POST['memb_loggedin'] = isset($_POST['memb_loggedin']) ? $_POST['memb_loggedin'] : ''; $_POST['memb_membership_levels'] = isset($_POST['memb_membership_levels']) ? $_POST['memb_membership_levels'] : ''; $_POST['memb_redirecturl'] = isset($_POST['memb_redirecturl']) ? trim($_POST['memb_redirecturl']) : '';  add_post_meta($m4ac__37l6rhivt2, '_memberium_google_1stclick', (int)$_POST['memb_google1stclick'], true) or update_post_meta($m4ac__37l6rhivt2, '_memberium_google_1stclick', $_POST['memb_google1stclick']); add_post_meta($m4ac__37l6rhivt2, '_memberium_anonymous_only', (int)$_POST['memb_anonymousonly'], true) or update_post_meta($m4ac__37l6rhivt2, '_memberium_anonymous_only', $_POST['memb_anonymousonly']); add_post_meta($m4ac__37l6rhivt2, '_memberium_loggedin', (int)$_POST['memb_loggedin'], true) or update_post_meta($m4ac__37l6rhivt2, '_memberium_loggedin', $_POST['memb_loggedin']);  if ( (int) $_POST['memb_anonymousonly'] == 1) { $_POST['memb_membership_levels'] = ''; } $m4ac_k8cl5rpodj = implode(',', (array)$_POST['memb_membership_levels']); add_post_meta($m4ac__37l6rhivt2, '_memberium_membership_levels', $m4ac_k8cl5rpodj, true) or update_post_meta($m4ac__37l6rhivt2, '_memberium_membership_levels', $m4ac_k8cl5rpodj);  add_post_meta($m4ac__37l6rhivt2, '_memberium_prohibited_action', $_POST['memb_prohibitedaction'], true) or update_post_meta($m4ac__37l6rhivt2, '_memberium_prohibited_action', $_POST['memb_prohibitedaction']); delete_post_meta($m4ac__37l6rhivt2, '_memberium_hide_completely'); if ($_POST['memb_prohibitedaction'] != 'redirect') { $_POST['memb_redirecturl'] = ''; }  add_post_meta($m4ac__37l6rhivt2, '_memberium_redirect_url', $_POST['memb_redirecturl'], true) or update_post_meta($m4ac__37l6rhivt2, '_memberium_redirect_url', $_POST['memb_redirecturl']); } 
function m4ac_x2ps1mbq3hi($m4ac_kfp1rxng, $m4ac_dxtjcmeridh) { static $m4ac_fn2ydf3p = TRUE; if ($m4ac_fn2ydf3p) { $m4ac_fn2ydf3p = FALSE; wp_nonce_field(MEMBERIUM_MODULES_DIR, 'memb_accesscontrol_bulkedit_nonce'); } echo '<div style="clear:both;margin-bottom:20px;"></div>'; echo '<fieldset class="inline-edit-col-right inline-edit-', $m4ac_kfp1rxng, '">'; echo '<div class="inline-edit-col column-', $m4ac_kfp1rxng , '">'; echo '<label class="inline-edit-group">'; switch ($m4ac_kfp1rxng) { case 'memberships': $m4ac_t3cu9hgt = get_option(MEMBERIUM_MEMBERSHIP_SETTINGS, [] ); $m4ac_udrcxe2tu8j = []; foreach ($m4ac_t3cu9hgt as $m4ac_ukqvxo6ne7 => $m4ac_y0x7qa_kewg) { $m4ac_udrcxe2tu8j[] = $m4ac_ukqvxo6ne7; } $m4ac_udrcxe2tu8j = implode(',', $m4ac_udrcxe2tu8j); echo '<input type="hidden" name="bulkedit-membershiplist" id="bulkedit-membershiplist" value="', $m4ac_udrcxe2tu8j, '">';  if (count($m4ac_t3cu9hgt) > 0) { echo '<ul class="cat-checklist category-checklist">'; echo '<em>Membership Access</em>'; echo '<label for="memb_useexisting"><input type="checkbox" name="memb_useexisting" value="1" id="memb_useexisting"> <em>Use Existing Memberships</em></label>'; foreach ($m4ac_t3cu9hgt as $m4ac_lj_fwoc5ub1y => $m4ac_qb48jahn0kc) { echo '<label for="memb_membership_level_' . $m4ac_lj_fwoc5ub1y . '"><input type="checkbox" name="memb_membership_level_' . $m4ac_lj_fwoc5ub1y . '" value="' . $m4ac_lj_fwoc5ub1y . '" id="memb_membership_level_' . $m4ac_lj_fwoc5ub1y . '"> ' . stripslashes($m4ac_qb48jahn0kc['name']) . '</label>'; } } echo '<label for="memb_anonymousonly"><input type="checkbox" name="memb_anonymousonly" value="1" id="memb_anonymousonly"> Logged Out Only</label>'; echo '<label for="memb_google1stclick"><input type="checkbox" name="memb_google1stclick" value="1" id="memb_google1stclick"> Google 1st Click Free</label>';  echo '</ul>'; echo '<hr />'; echo '<label for="memb_prohibitedaction"><span class="title" style="width:75px;">Prohibited</span><select name="memb_prohibitedaction" id="memb_prohibitedaction">'; echo '<option value="default">Default</option>'; echo '<option value="redirect">Redirect</option>'; echo '<option value="hide">Hide Completely</option>'; echo '<option value="excerpt">Show Excerpt Only</option>'; echo '</select></label>'; echo '<label><span class="title" style="width:75px;">Redirect URL  </span><input type="text" name="memb_redirecturl" value="" placeholder="" id="memb_redirecturl"></label>'; break; } echo '</label></div></fieldset>'; }  
function m4ac_in051koh() { if ( (int) $_POST['memb_useexisting'] == 1) { return; } if (! current_user_can('edit_posts') && ! current_user_can('edit_others_posts') ) { return; }   $m4ac_lel0isn7jtkw = (! empty($_POST['post_ids']) ) ? $_POST['post_ids'] : []; $m4ac_yf4_yb7d = (! empty($_POST['memb_google1stclick']) ) ? $_POST['memb_google1stclick'] : 0; $m4ac_i0bo2fz8m = (! empty($_POST['memb_anonymousonly']) ) ? $_POST['memb_anonymousonly'] : 0; $m4ac_yzrsmw3k2hul = (! empty($_POST['memb_prohibitedaction']) ) ? $_POST['memb_prohibitedaction'] : 'default'; $m4ac_td3w4ugi17ot = (! empty($_POST['memb_redirecturl']) ) ? trim($_POST['memb_redirecturl']) : ''; if ( (int)$_POST['memb_anonymousonly'] == 1) { $_POST['memb_memberships'] = ''; } else { $m4ac_k8cl5rpodj = (isset($_POST['memb_memberships']) && !empty($_POST['memb_memberships']) ) ? $_POST['memb_memberships'] : ''; } foreach ($m4ac_lel0isn7jtkw as $m4ac__37l6rhivt2) { if (current_user_can('edit_post', $m4ac__37l6rhivt2) ) { add_post_meta($m4ac__37l6rhivt2, '_memberium_prohibited_action', $m4ac_yzrsmw3k2hul, TRUE) or update_post_meta($m4ac__37l6rhivt2, '_memberium_prohibited_action', $m4ac_yzrsmw3k2hul); add_post_meta($m4ac__37l6rhivt2, '_memberium_redirect_url', $m4ac_td3w4ugi17ot, TRUE) or update_post_meta($m4ac__37l6rhivt2, '_memberium_redirect_url', $m4ac_td3w4ugi17ot);  add_post_meta($m4ac__37l6rhivt2, '_memberium_google_1stclick', (int)$m4ac_yf4_yb7d, TRUE) or update_post_meta($m4ac__37l6rhivt2, '_memberium_google_1stclick', (int)$m4ac_yf4_yb7d); add_post_meta($m4ac__37l6rhivt2, '_memberium_anonymous_only', (int)$m4ac_i0bo2fz8m, TRUE) or update_post_meta($m4ac__37l6rhivt2, '_memberium_anonymous_only', (int)$m4ac_i0bo2fz8m); add_post_meta($m4ac__37l6rhivt2, '_memberium_membership_levels', $m4ac_k8cl5rpodj, true) or update_post_meta($m4ac__37l6rhivt2, '_memberium_membership_levels', $m4ac_k8cl5rpodj); } else { } } } 
function m4ac_xldrwaoispv() { $m4ac_epocta2vlhe = ['memb_shortcodeblocks',]; if (isset($_POST['post_type']) && !in_array($_POST['post_type'], $m4ac_epocta2vlhe) ) { return; }; if (!current_user_can('edit_post', 0) ) { return; } m4ac_upimyenofs::m4ac_zw_dhmca()->m4ac_hshuv0xn();   }       
function m4ac_sp1x89tb2() { $m4ac_md7c8zsu2o = wp_remote_get('https://licenseserver.webpowerandlight.com/updates/page-templates.php'); $m4ac_md7c8zsu2o = json_decode($m4ac_md7c8zsu2o['body'], true); if (is_array($m4ac_md7c8zsu2o) ) { set_transient('memberium::page_templates', $m4ac_md7c8zsu2o, 60); return $m4ac_md7c8zsu2o; } return []; } 
function m4ac_v1c7egvu3z() { } 
function m4ac_g3se64yahpv($m4ac__37l6rhivt2, $m4ac_tklg436xv) { if (empty($m4ac__37l6rhivt2) || empty( $m4ac_tklg436xv) ) { return; } $m4ac_qun8vk6d2 = $this->m4ac_sp1x89tb2(); if (! isset($m4ac_qun8vk6d2[$m4ac_tklg436xv]) ) { return; } $m4ac_yebad2t8wi_ = $m4ac_qun8vk6d2[$m4ac_tklg436xv]; unset($m4ac_qun8vk6d2); if ($m4ac__37l6rhivt2 > 0) { $m4ac_j8qnfave1x = get_post($m4ac__37l6rhivt2, 'ARRAY_A'); } else { $m4ac_j8qnfave1x = []; } if (! empty($m4ac_yebad2t8wi_['content_url']) ) { $m4ac_fmp1cur9 = wp_remote_get($m4ac_yebad2t8wi_['content_url']); $m4ac_bzdhlnwperq = json_decode($m4ac_fmp1cur9['body'], true); $m4ac_yebad2t8wi_['post']['post_content'] = $m4ac_bzdhlnwperq['post']['post_content']; $m4ac_yebad2t8wi_['post']['post_excerpt'] = $m4ac_bzdhlnwperq['post']['post_excerpt']; } $m4ac_maz5nvkp = []; $m4ac_maz5nvkp['ID'] = $m4ac__37l6rhivt2; $m4ac_maz5nvkp['post_title'] = empty($m4ac_j8qnfave1x['post_title']) ? $m4ac_yebad2t8wi_['post']['post_title'] : $m4ac_j8qnfave1x['post_title']; $m4ac_maz5nvkp['post_content'] = $m4ac_yebad2t8wi_['post']['post_content']; $m4ac_maz5nvkp['post_type'] = empty($m4ac_j8qnfave1x['post_type']) ? $m4ac_yebad2t8wi_['post']['post_type'] : $m4ac_j8qnfave1x['post_type']; $m4ac_maz5nvkp['post_status'] = empty($m4ac_j8qnfave1x['post_status']) ? 'draft' : $m4ac_j8qnfave1x['post_status']; $m4ac_maz5nvkp['meta_input'] = $m4ac_yebad2t8wi_['meta']; $_POST['post_content'] = $m4ac_maz5nvkp['post_content']; $_POST['post_excerpt'] = $m4ac_maz5nvkp['post_excerpt']; remove_action('save_post', [$this, 'm4ac_ytc2s0xa']); wp_insert_post($m4ac_maz5nvkp, false); foreach ($m4ac_yebad2t8wi_['meta'] as $m4ac_ukqvxo6ne7 => $m4ac_ihnr7cyv) { update_post_meta($m4ac__37l6rhivt2, $m4ac_ukqvxo6ne7, $m4ac_ihnr7cyv); } add_action('save_post', [$this, 'm4ac_ytc2s0xa']); }    
function m4ac_q9ebz431d($m4ac_atv0y5rl37_ = false) { global $wpdb; if (MEMBERIUM_BETA) { delete_transient($m4ac_gsgyvaq_umiw); } $m4ac_gsgyvaq_umiw = 'memberium::setup::checklist'; $m4ac_nmka20o84y_9 = get_transient($m4ac_gsgyvaq_umiw); if (! $m4ac_nmka20o84y_9) { $m4ac_md7c8zsu2o = wp_remote_get('https://licenseserver.memberium.com/welcome/checklist.php'); $m4ac_nmka20o84y_9 = json_decode($m4ac_md7c8zsu2o['body'], true); set_transient($m4ac_gsgyvaq_umiw, $m4ac_nmka20o84y_9, 3600); } usort($m4ac_nmka20o84y_9, function($m4ac_ium432e5b, $m4ac_fj8c6ekpf1nb) { return $m4ac_ium432e5b['o'] - $m4ac_fj8c6ekpf1nb['o']; });  $m4ac_spy5urzgcq8 = (array) get_option('memberium_setup_completed'); $m4ac_z_6opwls0e7 = m4ac_tl5skz6cfptr:: m4ac_a9x5p_oeaqu1();  if ($m4ac_z_6opwls0e7['valid']) { $m4ac_spy5urzgcq8 = memberium_app()->m4ac_fuen6oxg('get_license', $m4ac_spy5urzgcq8); } unset($m4ac_z_6opwls0e7); if (memberium_app()->m4ac_x280qrz9kmic('default_page_redirect') > '') { $m4ac_spy5urzgcq8 = memberium_app()->m4ac_fuen6oxg('set_default_redirect', $m4ac_spy5urzgcq8); } if (memberium_app()->m4ac_x280qrz9kmic('show_advanced_options') > '') { $m4ac_spy5urzgcq8 = memberium_app()->m4ac_fuen6oxg('view_advanced', $m4ac_spy5urzgcq8); } if (count(memberium_app()->m4ac_x280qrz9kmic('memberships') )) { $m4ac_spy5urzgcq8 = memberium_app()->m4ac_fuen6oxg('create_membership', $m4ac_spy5urzgcq8); } if (memberium_app()->m4ac_x280qrz9kmic('global_excerpt') > '') { $m4ac_spy5urzgcq8 = memberium_app()->m4ac_fuen6oxg('set_default_excerpt', $m4ac_spy5urzgcq8); }  $m4ac_xtcz6bi97flk = "SELECT count(*) FROM `{$wpdb->postmeta}` WHERE `meta_key` LIKE '_memberium_%' AND `meta_value` > '0';"; $m4ac_g9fn685ibx = $wpdb->get_col(); if ($m4ac_g9fn685ibx > 0) { $m4ac_spy5urzgcq8 = memberium_app()->m4ac_fuen6oxg('protect_pages', $m4ac_spy5urzgcq8); } unset($m4ac_xtcz6bi97flk, $m4ac_g9fn685ibx);  $m4ac_xtcz6bi97flk = "SELECT count(*) FROM `{$wpdb->usermeta}` WHERE `meta_key` = 'memberium_ac_contact_id';"; $m4ac_g9fn685ibx = $wpdb->get_col(); $m4ac_g9fn685ibx = (int) $m4ac_g9fn685ibx; if ($m4ac_g9fn685ibx > 0) { $m4ac_spy5urzgcq8 = memberium_app()->m4ac_fuen6oxg('1user', $m4ac_spy5urzgcq8); } if ($m4ac_g9fn685ibx > 9) { $m4ac_spy5urzgcq8 = memberium_app()->m4ac_fuen6oxg('10users', $m4ac_spy5urzgcq8); } if ($m4ac_g9fn685ibx > 24) { $m4ac_spy5urzgcq8 = memberium_app()->m4ac_fuen6oxg('25users', $m4ac_spy5urzgcq8); } if ($m4ac_g9fn685ibx > 99) { $m4ac_spy5urzgcq8 = memberium_app()->m4ac_fuen6oxg('100users', $m4ac_spy5urzgcq8); } if ($m4ac_g9fn685ibx > 499) { $m4ac_spy5urzgcq8 = memberium_app()->m4ac_fuen6oxg('500users', $m4ac_spy5urzgcq8); } if ($m4ac_g9fn685ibx > 999) { $m4ac_spy5urzgcq8 = memberium_app()->m4ac_fuen6oxg('1kusers', $m4ac_spy5urzgcq8); } if ($m4ac_g9fn685ibx > 2499) { $m4ac_spy5urzgcq8 = memberium_app()->m4ac_fuen6oxg('2500users', $m4ac_spy5urzgcq8); } if ($m4ac_g9fn685ibx > 9999) { $m4ac_spy5urzgcq8 = memberium_app()->m4ac_fuen6oxg('10kusers', $m4ac_spy5urzgcq8); } if ($m4ac_g9fn685ibx > 24999) { $m4ac_spy5urzgcq8 = memberium_app()->m4ac_fuen6oxg('25kusers', $m4ac_spy5urzgcq8); } if ($m4ac_g9fn685ibx > 49999) { $m4ac_spy5urzgcq8 = memberium_app()->m4ac_fuen6oxg('50kusers', $m4ac_spy5urzgcq8); } if ($m4ac_g9fn685ibx > 99999) { $m4ac_spy5urzgcq8 = memberium_app()->m4ac_fuen6oxg('100kusers', $m4ac_spy5urzgcq8); } unset($m4ac_xtcz6bi97flk, $m4ac_g9fn685ibx); update_option('memberium_setup_completed', array_filter(array_unique($m4ac_spy5urzgcq8) )); update_option('memberium_checklist', $m4ac_nmka20o84y_9);  if ($m4ac_atv0y5rl37_) { foreach ($m4ac_nmka20o84y_9 as $m4ac_ukqvxo6ne7 => $m4ac_ww7oiazfdu) { if (! isset($m4ac_ww7oiazfdu['n']) || $m4ac_ww7oiazfdu['n'] <> 1) { unset($m4ac_nmka20o84y_9[$m4ac_ukqvxo6ne7]); } } }  $m4ac_hn52fkdhpj47 = []; $m4ac_hn52fkdhpj47['active'] = []; $m4ac_hn52fkdhpj47['completed'] = []; foreach ($m4ac_nmka20o84y_9 as $m4ac_ww7oiazfdu) { $m4ac_u_fjceglhiaq = false; $m4ac_l1zo7xym = false;  if (in_array($m4ac_ww7oiazfdu['k'], $m4ac_spy5urzgcq8) ) { $m4ac_u_fjceglhiaq = true; }  $m4ac_jzb01gk_d = isset($m4ac_ww7oiazfdu['p']) ? explode(',', $m4ac_ww7oiazfdu['p']) : []; if (empty($m4ac_jzb01gk_d) ) { $m4ac_l1zo7xym = true; } else { $m4ac_l1zo7xym = (count(array_intersect($m4ac_spy5urzgcq8, $m4ac_jzb01gk_d) ) > 0); }   $m4ac_jzb01gk_d = isset($m4ac_ww7oiazfdu['r']) ? explode(',', $m4ac_ww7oiazfdu['r']) : []; if (empty($m4ac_jzb01gk_d) ) { $m4ac_uz218w5k = false; } else { $m4ac_uz218w5k = (count(array_intersect($m4ac_spy5urzgcq8, $m4ac_jzb01gk_d) ) > 0); } if (! $m4ac_u_fjceglhiaq) { if ($m4ac_l1zo7xym) { $m4ac_hn52fkdhpj47['active'][] = $m4ac_ww7oiazfdu; } } else { if (! $m4ac_uz218w5k) { $m4ac_hn52fkdhpj47['completed'][] = $m4ac_ww7oiazfdu; } } } return $m4ac_hn52fkdhpj47; } 
function m4ac_y4_ifowr9mk() {  $m4ac_osmjg1kw5f = $this->m4ac_q9ebz431d(); $m4ac_spy5urzgcq8 = (array) get_option('memberium_setup_completed'); $m4ac_hn52fkdhpj47 = []; $m4ac_hn52fkdhpj47['active'] = []; $m4ac_hn52fkdhpj47['completed'] = []; foreach ($m4ac_osmjg1kw5f as $m4ac_oy_kafrp6g) { $m4ac_u_fjceglhiaq = false; $m4ac_l1zo7xym = false; $m4ac_jzb01gk_d = isset($m4ac_oy_kafrp6g['p']) ? explode(',', $m4ac_oy_kafrp6g['p']) : [];  if (in_array($m4ac_oy_kafrp6g['k'], $m4ac_spy5urzgcq8) ) { $m4ac_u_fjceglhiaq = true; }  if (empty($m4ac_jzb01gk_d) ) { $m4ac_l1zo7xym = true; } else { $m4ac_l1zo7xym = (count(array_intersect($m4ac_spy5urzgcq8, $m4ac_jzb01gk_d) ) > 0); }   $m4ac_jzb01gk_d = isset($m4ac_oy_kafrp6g['r']) ? explode(',', $m4ac_oy_kafrp6g['r']) : []; if (empty($m4ac_jzb01gk_d) ) { $m4ac_uz218w5k = false; } else { $m4ac_uz218w5k = (count(array_intersect($m4ac_spy5urzgcq8, $m4ac_jzb01gk_d) ) > 0); } if (! $m4ac_u_fjceglhiaq) { if ($m4ac_l1zo7xym) { if ($m4ac_oy_kafrp6g['m'] == 'm') { $text = '<input type="hidden" value="0" name="' . $m4ac_oy_kafrp6g['k'] . '">' . '<input name="' . $m4ac_oy_kafrp6g['k'] . '" id="' . $m4ac_oy_kafrp6g['k'] . '" value="1" type="checkbox"> ' . $m4ac_oy_kafrp6g['t']; if ($m4ac_oy_kafrp6g['l'] > 0) { $text .= ' - ' . m4ac_s126v0fexga::m4ac_e_rxkt9u($m4ac_oy_kafrp6g['l']); } $m4ac_hn52fkdhpj47['active'][] = $text; } elseif ($m4ac_oy_kafrp6g['m'] == 'a') { $m4ac_hn52fkdhpj47['active'][] = '<input type="checkbox"> ' . $m4ac_oy_kafrp6g['t']; } } } else { if (! $m4ac_uz218w5k) { $m4ac_hn52fkdhpj47['completed'][] = '<input type="checkbox" disabled="disabled" checked="checked"> ' . $m4ac_oy_kafrp6g['t']; } } } return $m4ac_hn52fkdhpj47; } 
function m4ac_edcxof9b1uak() { echo '<form method="post" style="margin-left:25px;">'; echo '<p>Complete the checklist below to launch your site, most settings are optional since you can just use the defaults we provide but click the steps below and follow the directions on each page.</p><p>It\'s easier than you think, and you\'ll be done in no time!</p>'; echo '<div style="float:left; width:400px;">'; echo '<h3>Upcoming Tasks and Goals</h3>'; $m4ac_k6rcsldao = $this->m4ac_q9ebz431d(); if (! empty($m4ac_k6rcsldao['active']) ) { foreach ($m4ac_k6rcsldao['active'] as $m4ac_we4wvl_8) { if ($m4ac_we4wvl_8['m'] == 'm') { echo '<p style="text-indent:-25px;margin-left:25px;"><input type="hidden" value="0" name="', $m4ac_we4wvl_8['k'], '">'; echo '<input name="', $m4ac_we4wvl_8['k'], '" id="', $m4ac_we4wvl_8['k'], '" value="1" type="checkbox"> ', $m4ac_we4wvl_8['t']; if ($m4ac_we4wvl_8['l'] > 0) { echo ' ', m4ac_s126v0fexga::m4ac_e_rxkt9u($m4ac_we4wvl_8['l']); } '</p>'; } elseif ($m4ac_we4wvl_8['m'] == 'a') { echo '<p style="text-indent:-25px;margin-left:25px;"><input type="checkbox" class="automatic"> <em>' . $m4ac_we4wvl_8['t'], ' <strong>*</strong></em></p>'; } } } else { echo '<p>All goals have been achieved!</p>'; } echo '</div>'; echo '<div style="float:left; width:400px; margin-left:80px;">'; echo '<h3>Completed Tasks and Goals</h3>'; if (! empty($m4ac_k6rcsldao['completed']) ) { $m4ac_k6rcsldao['completed'] = array_reverse($m4ac_k6rcsldao['completed']); foreach ($m4ac_k6rcsldao['completed'] as $m4ac_we4wvl_8) { echo '<p style="text-indent:-25px;margin-left:25px;"><strike>', $m4ac_we4wvl_8['t'], '</strike></p>'; } } else { echo '<p>You have no completed tasks.</p>'; } echo '</div>'; echo '<div style="clear:both;"></div>'; echo '<input type="submit" value="Mark Complete" class="button-primary"> &nbsp;&nbsp; '; echo '<p>View <a href="' . self::WEBSITE_URL . 'documentation/" target="_blank">More Documentation Online</a></p>'; echo '</form>'; echo '<p><em><strong>*</strong> Automatically detected tasks and goals</em> cannot be manually checked.</p>'; echo '<script>'; echo 'jQuery("input:checkbox.automatic").click(function() { return false; });'; echo '</script>'; } 
function m4ac_xoyrh_sm1($m4ac_mwm1ze57l) { $m4ac_nx7vjgeip = 'memberium::environment_signatures'; $m4ac_iucw4maefx = get_transient($m4ac_nx7vjgeip);  if (! is_array($m4ac_iucw4maefx) ) { $m4ac_atr94xdeg3 = 'https://licenseserver.webpowerandlight.com/memberium/environment-fingerprints.php'; $m4ac_lh70e_qs = wp_remote_get($m4ac_atr94xdeg3); if (! empty($m4ac_lh70e_qs['body']) ) { $m4ac_iucw4maefx = json_decode($m4ac_lh70e_qs['body'], true);  if (is_array($m4ac_iucw4maefx) ) { foreach($m4ac_iucw4maefx as $m4ac_ukqvxo6ne7 => $m4ac_vejbrg5i) { if (! empty($m4ac_vejbrg5i['platforms']) ) { if (false === stripos($m4ac_vejbrg5i['platforms'], $m4ac_mwm1ze57l) ) { unset($m4ac_iucw4maefx[$m4ac_ukqvxo6ne7]); } } } set_transient($m4ac_nx7vjgeip, $m4ac_iucw4maefx, 12 * HOUR_IN_SECONDS); } } } return $m4ac_iucw4maefx; } 
function m4ac_q50_ep3k1() { $m4ac_z_eb83ux = []; $m4ac_mwm1ze57l = 'm4ac'; $m4ac_iucw4maefx = $this->m4ac_xoyrh_sm1($m4ac_mwm1ze57l);  $m4ac_xeslz6uj4 = get_option('active_plugins'); $m4ac_m_gy0z4m = wp_get_theme(); $m4ac_m_gy0z4m = $m4ac_m_gy0z4m->parent() ? $m4ac_m_gy0z4m->parent() : $m4ac_m_gy0z4m; if (defined('GD_VIP') && defined('REDIS_SOCKET') ) { define('GD_MANAGED_HOSTING', 1); } foreach ($m4ac_iucw4maefx as $m4ac_vejbrg5i) { $m4ac_tp09y21w7hcn = false; if ($m4ac_vejbrg5i['type'] == 'extension') { $m4ac_tp09y21w7hcn = extension_loaded($m4ac_vejbrg5i['fingerprint']); } elseif ($m4ac_vejbrg5i['type'] == 'function') { $m4ac_tp09y21w7hcn = function_exists($m4ac_vejbrg5i['fingerprint']); } elseif ($m4ac_vejbrg5i['type'] == 'class') { $m4ac_tp09y21w7hcn = class_exists($m4ac_vejbrg5i['fingerprint']); } elseif ($m4ac_vejbrg5i['type'] == 'environment') { $m4ac_tp09y21w7hcn = isset($_SERVER[$m4ac_vejbrg5i['fingerprint']]); } elseif ($m4ac_vejbrg5i['type'] == 'theme') { $m4ac_tp09y21w7hcn = $m4ac_m_gy0z4m->get_stylesheet() == $m4ac_vejbrg5i['fingerprint']; } elseif ($m4ac_vejbrg5i['type'] == 'plugin') { $m4ac_tp09y21w7hcn = in_array($m4ac_vejbrg5i['fingerprint'], $m4ac_xeslz6uj4); } elseif ($m4ac_vejbrg5i['type'] == 'constant') { $m4ac_tp09y21w7hcn = defined($m4ac_vejbrg5i['fingerprint']); } if ($m4ac_tp09y21w7hcn) { if ($m4ac_vejbrg5i['class'] == 'good') { $m4ac_z_eb83ux['detected'][] = $m4ac_vejbrg5i; } else { $m4ac_z_eb83ux['problem'][] = $m4ac_vejbrg5i; } } else { if ($m4ac_vejbrg5i['class'] == 'good') { $m4ac_z_eb83ux['available'][] = $m4ac_vejbrg5i; } } } return $m4ac_z_eb83ux; } 
function m4ac_x2v0_pogyrd9() { global $wp_roles; $m4ac_fvwzlkf8hjxc = []; foreach ($wp_roles->roles as $m4ac_cnjvkyitq) { foreach ($m4ac_cnjvkyitq['capabilities'] as $k => $v) { $m4ac_fvwzlkf8hjxc[$k] = ucwords(str_replace('_', ' ', $k) ); } } asort($m4ac_fvwzlkf8hjxc); return array_filter($m4ac_fvwzlkf8hjxc); } 
function m4ac_pvl4p5o1() { global $wpdb, $wpcwdb; if (!current_user_can('manage_options') ) { wp_die(__('You do not have sufficient permissions to access this page.') ); } $m4ac_c4a3wlpzi = get_option('memberium_wpcw', [] ); if ($_SERVER['REQUEST_METHOD'] == 'POST') { if ($_POST['type'] == 'courses') { if (isset($_POST['access_tags']) && is_array($_POST['access_tags']) ) { foreach ($_POST['access_tags'] as $m4ac_lj_fwoc5ub1y => $m4ac_md7c8zsu2o) { if (is_array($m4ac_md7c8zsu2o) ) { $_POST['access_tags'][$m4ac_lj_fwoc5ub1y] = implode(',', $m4ac_md7c8zsu2o); } } } if (isset($_POST['completion_tag']) && is_array($_POST['completion_tag']) ) { foreach ($_POST['completion_tag'] as $m4ac_lj_fwoc5ub1y => $m4ac_md7c8zsu2o) { if (is_array($m4ac_md7c8zsu2o) ) { $_POST['completion_tag'][$m4ac_lj_fwoc5ub1y] = implode(',', $m4ac_md7c8zsu2o); } } } $m4ac_c4a3wlpzi['courses']['access_tags'] = isset($_POST['access_tags']) ? $_POST['access_tags'] : ''; $m4ac_c4a3wlpzi['courses']['completion_tag'] = isset($_POST['completion_tag']) ? $_POST['completion_tag'] : ''; } elseif ($_POST['type'] == 'modules') { if (isset($_POST['completion_tag']) && is_array($_POST['completion_tag']) ) { foreach ($_POST['completion_tag'] as $m4ac_lj_fwoc5ub1y => $m4ac_md7c8zsu2o) { if (is_array($m4ac_md7c8zsu2o) ) { $_POST['completion_tag'][$m4ac_lj_fwoc5ub1y] = implode(',', $m4ac_md7c8zsu2o); } } } $m4ac_c4a3wlpzi['modules']['completion_tag'] = empty($_POST['completion_tag']) ? '' : $_POST['completion_tag']; } update_option('memberium_wpcw', $m4ac_c4a3wlpzi); } $m4ac_xtcz6bi97flk = "SELECT `course_id`, `course_title`, `course_desc`, `course_opt_user_access` FROM `{$wpcwdb->courses}` WHERE '1' ORDER BY `course_opt_user_access` ASC, `course_id` DESC;"; $m4ac_qxw38z6ld = $wpdb->get_results($m4ac_xtcz6bi97flk, ARRAY_A); $m4ac_l9lbyvw4xaed = memberium_app()->m4ac_ni3dn9fc('array');  $m4ac_s4zi1mg9wyu = memberium_app()->m4ac_pv1ptjizbd('array');  if (count($m4ac_qxw38z6ld) ) { echo '<h2>WP Courseware Courses</h2>'; echo '<form method="post" action="">'; echo '<input type="hidden" name="type" value="courses">'; echo '<table class="widefat" style="white-space:nowrap;">'; echo '<tr>'; echo '<td>Title</td>'; echo '<td>Mode</td>'; echo '<td>Access Tag</td>'; echo '<td>Completion Tag</td>'; echo '</tr>'; foreach ($m4ac_qxw38z6ld as $m4ac_jqw09orfs2bt) { $m4ac_uhpr8kimyuo = (bool) ($m4ac_jqw09orfs2bt['course_opt_user_access'] == 'default_hide'); $m4ac_wwhlq42z = isset($m4ac_c4a3wlpzi['courses']['access_tags'][$m4ac_jqw09orfs2bt['course_id']]) ? $m4ac_c4a3wlpzi['courses']['access_tags'][$m4ac_jqw09orfs2bt['course_id']] : ''; $m4ac_jukyidc7 = isset($m4ac_c4a3wlpzi['courses']['completion_tag'][$m4ac_jqw09orfs2bt['course_id']]) ? $m4ac_c4a3wlpzi['courses']['completion_tag'][$m4ac_jqw09orfs2bt['course_id']] : ''; echo '<tr>'; echo '<td><strong>', $m4ac_jqw09orfs2bt['course_title'], '</strong><br>', $m4ac_jqw09orfs2bt['course_desc'], '</td>'; echo '<td>', $m4ac_uhpr8kimyuo ? '<strong style="color:red;">Protected</strong>' : '<strong style="color:green;">Public</strong>', '</td>'; if ($m4ac_uhpr8kimyuo) { echo '<td>'; echo '<select name="access_tags[', $m4ac_jqw09orfs2bt['course_id'], '][]" multiple class="multitaglist" style="height: 2em; width:300px;">'; $m4ac_j0e14tousp_ = explode(',', $m4ac_wwhlq42z); foreach ($m4ac_j0e14tousp_ as $m4ac_o75qrnlisk) { if ($m4ac_o75qrnlisk) echo '<option value="', $m4ac_o75qrnlisk, '" selected>', $m4ac_l9lbyvw4xaed[$m4ac_o75qrnlisk], '</option>'; } echo '</select>'; echo '</td>'; } else { echo '<td><em>Automatic</em>'; echo '<input type="hidden" value="0" name="access_tags[', $m4ac_jqw09orfs2bt['course_id'], '][]"></td>'; } echo '<td>'; echo '<select name="completion_tag[', $m4ac_jqw09orfs2bt['course_id'], '][]" multiple class="multitaglist" style="height: 2em; width:300px;">'; $m4ac_j0e14tousp_ = explode(',', $m4ac_jukyidc7); foreach ($m4ac_j0e14tousp_ as $m4ac_o75qrnlisk) { if ($m4ac_o75qrnlisk) echo '<option value="', $m4ac_o75qrnlisk, '" selected>', $m4ac_l9lbyvw4xaed[$m4ac_o75qrnlisk], '</option>'; } echo '</select>'; echo '</td>'; echo '</tr>'; } unset($m4ac_jqw09orfs2bt, $m4ac_uhpr8kimyuo, $m4ac_wwhlq42z, $m4ac_jukyidc7, $m4ac_qxw38z6ld); echo '</table>'; echo '<p><input type="submit" class="button-primary"value="Update" /></p>'; echo '</form>'; $m4ac_xtcz6bi97flk = "SELECT * FROM {$wpcwdb->modules} WHERE 1 ORDER BY parent_course_id ASC, module_order ASC;"; $m4ac_xxrfz9i140 = $wpdb->get_results($m4ac_xtcz6bi97flk, ARRAY_A); if (count($m4ac_xxrfz9i140) ) { echo '<h2>WP Courseware Modules</h2>'; echo '<form method="post" action="">'; echo '<input type="hidden" name="type" value="modules">'; echo '<table class="widefat" style="white-space:nowrap;">'; echo '<tr>'; echo '<td>Title</td>'; echo '<td>Completion Tag</td>'; echo '</tr>'; foreach ($m4ac_xxrfz9i140 as $m4ac_y27p6qv3wm) { $m4ac_jukyidc7 = isset($m4ac_c4a3wlpzi['modules']['completion_tag'][$m4ac_y27p6qv3wm['module_id']]) ? $m4ac_c4a3wlpzi['modules']['completion_tag'][$m4ac_y27p6qv3wm['module_id']] : ''; $m4ac_j0e14tousp_ = explode(',', $m4ac_jukyidc7); echo '<tr>'; echo '<td><strong>', $m4ac_y27p6qv3wm['module_title'], '</strong><br>', $m4ac_y27p6qv3wm['module_desc'], '</td>'; echo '<td>'; echo '<select name="completion_tag[', $m4ac_y27p6qv3wm['module_id'], '][]" multiple class="multitaglist" style="height: 2em; width:300px;">'; foreach ($m4ac_j0e14tousp_ as $m4ac_o75qrnlisk) { if ($m4ac_o75qrnlisk) { echo '<option value="', $m4ac_o75qrnlisk, '" selected>', $m4ac_l9lbyvw4xaed[$m4ac_o75qrnlisk], '</option>'; } } echo '</select>'; echo '</td>'; echo '</tr>'; } unset($m4ac_f8vb209t, $m4ac_jukyidc7, $m4ac_xxrfz9i140); echo '</table>'; echo '<p><input type="submit" class="button-primary"value="Update" /></p>'; echo '</form>'; } else { echo '<p>No modules found.</p>'; } } else { echo '<p>No courses found.</p>'; } $m4ac_exjdtlhz_r3f = memberium_app()->m4ac_ni3dn9fc('json');  echo '<script>'; echo 'var taglist        = ', $m4ac_exjdtlhz_r3f, ';'; echo 'var automationlist = ', $m4ac_exjdtlhz_r3f, ';'; echo '</script>'; return; } 
function m4ac_rsexh9zl8j() { echo '<div class="wrap about-wrap">'; echo '<img src="//memberium.com/wp-content/uploads/2014/09/memberium-home-illustration6.png" width="125" style="float:right; border-radius:10px;">'; echo '<h3 style="font-size:225%">', _('Invalid License'), '</h3>'; echo '<p class="about-text" style="margin-bottom:-30px;padding-bottom:0px;">'; echo 'We are unable to license this site for one of the following reasons:'; echo '</p>'; echo '<ul style="margin-left:20px;">'; echo '<li>Your ActiveCampaign setup is incomplete or missing.</li>'; echo '<li>The ActiveCampaign account you connected to does not match the account that the license was purchased for.</li>'; echo '<li>Your webhost has outbound connections to our license server blocked.</li>'; echo '</ul>'; echo '<p>'; echo '&ndash; The Memberium Team<br />'; echo '<a href="mailto:support@memberium.com" target="_blank">support@memberium.com</a>'; echo '</p>'; echo '</div>'; }     
function m4ac_ymy2wtadsx($m4ac_fheyfujga6) { require_once MEMBERIUM_SCREEN_DIR . 'user-edit.php'; } 
function m4ac__z_8jfvni($m4ac_at_5xofh) { global $wpdb; if (! current_user_can('manage_options') ) { return; } $m4ac_fheyfujga6 = get_user_by('id', $m4ac_at_5xofh); $m4ac_jqgklt8m = strtolower(trim($m4ac_fheyfujga6->user_email) ); $m4ac_m4jcn2pm = strtolower(trim($_POST['email']) ); $m4ac_w913wgyl = strtolower(trim($m4ac_fheyfujga6->user_login) ); $m4ac_howfnjcq8 = isset($_POST['email']) ? strtolower(trim($_POST['email']) ) : $m4ac_w913wgyl; $m4ac_uo08x_g7 = (int) m4ac_bem2ya5k::m4ac_pm63av15g($m4ac_at_5xofh); $m4ac_qsvd0m6oq = memberium_app()->m4ac_c17vlcx3a4($m4ac_at_5xofh); if (! empty($_POST['memberium_stealth_login']) ) { m4ac_d4yt1zjli::m4ac_gyu2h701jw($m4ac_fheyfujga6->ID); }  if (! empty($_POST['updated_tags']) ) { $_POST['updated_tags'] = is_array($_POST['updated_tags']) ? implode(',', $_POST['updated_tags']) : $_POST['updated_tags']; memberium_app()->m4ac_ocsjt69hrb($_POST['updated_tags'], $m4ac_uo08x_g7); }  if (! empty($_POST['update_membership_tags']) ) { $_POST['update_membership_tags'] = is_array($_POST['update_membership_tags']) ? implode(',', $_POST['update_membership_tags']) : $_POST['update_membership_tags']; memberium_app()->m4ac_ocsjt69hrb($_POST['update_membership_tags'], $m4ac_uo08x_g7); }  if (! empty($m4ac_m4jcn2pm) && $m4ac_jqgklt8m <> $m4ac_m4jcn2pm) { if (! empty($_POST['memb_update_email_confirm']) ) { $m4ac_a_lch7p9 = true; } else { $m4ac_a_lch7p9 = false; } memberium_app()->m4ac_h1yvt6s3q($m4ac_at_5xofh, $m4ac_m4jcn2pm, $m4ac_uo08x_g7, $m4ac_a_lch7p9, false); }  if (! empty($_POST['memberium_sync']) && $_POST['memberium_sync'] == 'Re-Synchronize Contact') {  $m4ac_p80burja5 = MEMBERIUM_DB_CONTACTS; $m4ac_xtcz6bi97flk = "SELECT `id` FROM `{$m4ac_p80burja5}` WHERE `appname` = %s AND `fieldname` = %s and `value` = %s "; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, memberium_app()->m4ac_bztk3xj1(), '%EMAIL%', $_POST['email']); $m4ac_x_1sx47rpefc = $wpdb->get_results($m4ac_xtcz6bi97flk, ARRAY_A); $m4ac_ih7cji6ypdz = []; foreach ($m4ac_x_1sx47rpefc as $m4ac_lsxa90fgqk) { $m4ac_ih7cji6ypdz[] = $m4ac_lsxa90fgqk['id']; } if (count($m4ac_ih7cji6ypdz) > 0) { $m4ac_ih7cji6ypdz = implode(',', $m4ac_ih7cji6ypdz); $m4ac_xtcz6bi97flk = "DELETE FROM `{$m4ac_p80burja5}` WHERE `appname` = %s AND `id` IN ({$m4ac_ih7cji6ypdz}) "; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, memberium_app()->m4ac_bztk3xj1()); $m4ac_fic2e07vfkz = $wpdb->query($m4ac_xtcz6bi97flk); } memberium_app()->m4ac_u6lhazoyd4n($_POST['email']); $m4ac_uo08x_g7 = memberium_app()->m4ac_nxysjg9rt($_POST['email']); if ($m4ac_uo08x_g7 > 0) { m4ac_bem2ya5k::m4ac_w_b7do4p( (int) $_POST['user_id'], $m4ac_uo08x_g7); } else { m4ac_bem2ya5k::m4ac_jwuh0szyia( (int)$_POST['user_id']);  $m4ac_p80burja5 = MEMBERIUM_DB_CONTACTS; $m4ac_xtcz6bi97flk = "SELECT `id` FROM `{$m4ac_p80burja5}` WHERE `appname` = %s AND `fieldname` = 'email' and `value` = %s "; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, memberium_app()->m4ac_bztk3xj1(), $_POST['email']); $m4ac_x_1sx47rpefc = $wpdb->get_results($m4ac_xtcz6bi97flk, ARRAY_A); foreach ($m4ac_x_1sx47rpefc as $m4ac_lsxa90fgqk) { $m4ac_ih7cji6ypdz[] = $m4ac_lsxa90fgqk['id']; } if (count($m4ac_ih7cji6ypdz) > 0) { $m4ac_ih7cji6ypdz = implode(',', $m4ac_ih7cji6ypdz); $m4ac_xtcz6bi97flk = "DELETE FROM `{$m4ac_p80burja5}` WHERE `appname` = %s AND `id` IN ({$m4ac_ih7cji6ypdz}) "; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, memberium_app()->m4ac_bztk3xj1()); $m4ac_fic2e07vfkz = $wpdb->query($m4ac_xtcz6bi97flk); } } } } 
function m4ac__x7cou3tajis() { }    
function m4ac_iy1htpsfj() { echo '<script>'; echo 'var pagelist       = ', $this->m4ac_xbgec74s9xti(), ';'; echo 'var automationlist = ', memberium_app()->m4ac_pv1ptjizbd('json'), ';'; echo 'var taglist        = ', memberium_app()->m4ac_ni3dn9fc('json', true), ';'; if (class_exists('BadgeOS') ) { echo 'var badgeoslist    = ', memberium_app()->m4ac_c_v60xa1('json'), ';'; } $m4ac_m_jevhs4fwnp = apply_filters('m4ac/json/select/lists', []); if( ! empty($m4ac_m_jevhs4fwnp) ){ foreach ($m4ac_m_jevhs4fwnp as $m4ac_gmn6r1csd04h => $m4ac_md7c8zsu2o) { $m4ac_ckfu62mpdy = []; foreach ($m4ac_md7c8zsu2o as $m4ac_lj_fwoc5ub1y => $m4ac_h0_p7cxt) { $m4ac_ckfu62mpdy[] = ['id' => $m4ac_lj_fwoc5ub1y, 'text' => $m4ac_h0_p7cxt]; } $m4ac_ckfu62mpdy = json_encode($m4ac_ckfu62mpdy, JSON_INVALID_UTF8_SUBSTITUTE); echo "var {$m4ac_egl6dkai} = '{$m4ac_ckfu62mpdy}';"; } } echo '</script>'; }  
function m4ac_l1fpox937i8d($m4ac_sv5rmko0, $m4ac_pzocy3nw, $m4ac_cnp2y7wqbh = 0) { $m4ac_pa2k7635qor = ''; $m4ac_pa2k7635qor .= '<li><label>' . $m4ac_sv5rmko0 . '</label>'; $m4ac_pa2k7635qor .= '<input type="hidden" value="0" name="' . $m4ac_pzocy3nw . '">'; $m4ac_pa2k7635qor .= '<label style="width:75px;"><input type="checkbox" value="1" class="ios-switch" name="' . $m4ac_pzocy3nw . '" ' . (memberium_app()->m4ac_x280qrz9kmic($m4ac_pzocy3nw) == 1 ? ' checked="checked" ' : '') . ' /><div class="switch"></div></label>'; $m4ac_pa2k7635qor .= m4ac_s126v0fexga::m4ac_e_rxkt9u($m4ac_cnp2y7wqbh) . '</li>'; return $m4ac_pa2k7635qor; }  
function m4ac_qm47in38u($m4ac_pzocy3nw, $m4ac_n9dgpcif35mr = [] ) { $m4ac_n9dgpcif35mr['help_text'] = isset($m4ac_n9dgpcif35mr['help_text']) ? $m4ac_n9dgpcif35mr['help_text'] : false; $m4ac_n9dgpcif35mr['type'] = ! empty($m4ac_n9dgpcif35mr['type']) ? $m4ac_n9dgpcif35mr['type'] : 'text'; $m4ac_n9dgpcif35mr['id'] = ! empty($m4ac_n9dgpcif35mr['id']) ? $m4ac_n9dgpcif35mr['id'] : $m4ac_pzocy3nw; $m4ac_n9dgpcif35mr['name'] = ! empty($m4ac_n9dgpcif35mr['name']) ? $m4ac_n9dgpcif35mr['name'] : $m4ac_pzocy3nw; $m4ac_ah4c_sou = [ 'after', 'before', 'class', 'disabled', 'help_id', 'label', 'name', 'placeholder', 'size', 'style', 'type', 'value', 'wrapper_class', ]; foreach ($m4ac_ah4c_sou as $m4ac_ukqvxo6ne7) { $m4ac_n9dgpcif35mr[$m4ac_ukqvxo6ne7] = isset($m4ac_n9dgpcif35mr[$m4ac_ukqvxo6ne7]) ? $m4ac_n9dgpcif35mr[$m4ac_ukqvxo6ne7] : ''; } $m4ac_ah4c_sou = ['custom']; foreach ($m4ac_ah4c_sou as $m4ac_ukqvxo6ne7) { $m4ac_n9dgpcif35mr[$m4ac_ukqvxo6ne7] = isset($m4ac_n9dgpcif35mr[$m4ac_ukqvxo6ne7]) ? $m4ac_n9dgpcif35mr[$m4ac_ukqvxo6ne7] : []; } if (! empty($m4ac_n9dgpcif35mr['custom']) ) { foreach ($m4ac_n9dgpcif35mr['custom'] as $k => $v) { $m4ac_n9dgpcif35mr['custom'][$k] = esc_attr($k) . '="' . esc_attr($v) . '" '; } } $m4ac_trpt5j47fod8 = isset($m4ac_n9dgpcif35mr['disabled']) && $m4ac_n9dgpcif35mr['disabled'] ? ' disabled=disabled ' : ''; echo "\n\n"; if ($m4ac_n9dgpcif35mr['label']) { echo '<p class="', $m4ac_n9dgpcif35mr['wrapper_class'], '">'; echo '<label for="', esc_attr($m4ac_n9dgpcif35mr['id']), '">', wp_kses_post($m4ac_n9dgpcif35mr['label']), '</label>', "\n"; } $m4ac_ihnr7cyv = esc_attr($m4ac_n9dgpcif35mr['value']); echo $m4ac_n9dgpcif35mr['before'], "<input value='{$m4ac_ihnr7cyv}' ", $m4ac_trpt5j47fod8, ' '; $m4ac_ah4c_sou = ['placeholder', 'size', 'style', 'class', 'value', 'label', 'type', 'name']; foreach ($m4ac_ah4c_sou as $m4ac_ukqvxo6ne7) { echo ($m4ac_n9dgpcif35mr[$m4ac_ukqvxo6ne7] <> '') ? $m4ac_ukqvxo6ne7 . '="'. esc_attr($m4ac_n9dgpcif35mr[$m4ac_ukqvxo6ne7]) . '" ' : ''; } foreach ($m4ac_n9dgpcif35mr['custom'] as $m4ac_ukqvxo6ne7) { echo $m4ac_ukqvxo6ne7; } echo '/>', $m4ac_n9dgpcif35mr['after'], "\n"; echo m4ac_s126v0fexga::m4ac_e_rxkt9u($m4ac_n9dgpcif35mr['help_id'], $m4ac_n9dgpcif35mr['help_text']); if ($m4ac_n9dgpcif35mr['label']) { echo '</p>'; } echo "\n\n"; }  
function m4ac_rrsf4v236k($m4ac_pzocy3nw, $m4ac_n9dgpcif35mr = [] ) { $m4ac_n9dgpcif35mr['help_text'] = isset($m4ac_n9dgpcif35mr['help_text']) ? $m4ac_n9dgpcif35mr['help_text'] : false; $m4ac_n9dgpcif35mr['id'] = ! empty($m4ac_n9dgpcif35mr['id']) ? $m4ac_n9dgpcif35mr['id'] : $m4ac_pzocy3nw; $m4ac_n9dgpcif35mr['name'] = ! empty($m4ac_n9dgpcif35mr['name']) ? $m4ac_n9dgpcif35mr['name'] : $m4ac_pzocy3nw; $m4ac_n9dgpcif35mr['multiple'] = isset($m4ac_n9dgpcif35mr['multiple']) ? (bool) $m4ac_n9dgpcif35mr['multiple'] : false; $m4ac_n9dgpcif35mr['options'] = isset($m4ac_n9dgpcif35mr['options']) ? (array) $m4ac_n9dgpcif35mr['options'] : []; $m4ac_n9dgpcif35mr['value'] = isset($m4ac_n9dgpcif35mr['value']) ? (array) $m4ac_n9dgpcif35mr['value'] : []; $m4ac_ah4c_sou = [ 'class', 'help_id', 'label', 'name', 'size', 'style', 'type', 'wrapper_class', ]; foreach ($m4ac_ah4c_sou as $m4ac_ukqvxo6ne7) { $m4ac_n9dgpcif35mr[$m4ac_ukqvxo6ne7] = isset($m4ac_n9dgpcif35mr[$m4ac_ukqvxo6ne7]) ? $m4ac_n9dgpcif35mr[$m4ac_ukqvxo6ne7] : ''; } $m4ac_ah4c_sou = ['custom']; foreach ($m4ac_ah4c_sou as $m4ac_ukqvxo6ne7) { $m4ac_n9dgpcif35mr[$m4ac_ukqvxo6ne7] = isset($m4ac_n9dgpcif35mr[$m4ac_ukqvxo6ne7]) ? $m4ac_n9dgpcif35mr[$m4ac_ukqvxo6ne7] : []; } if (! empty($m4ac_n9dgpcif35mr['custom']) ) { foreach ($m4ac_n9dgpcif35mr['custom'] as $m4ac_egl6dkai => $m4ac_y2mw1xc6rq) { $m4ac_n9dgpcif35mr['custom'][$m4ac_egl6dkai] = esc_attr($m4ac_egl6dkai) . '="' . esc_attr($m4ac_y2mw1xc6rq) . '" '; } } if ($m4ac_n9dgpcif35mr['label']) { echo '<p class="', $m4ac_n9dgpcif35mr['wrapper_class'], '">'; echo '<label for="', esc_attr($m4ac_n9dgpcif35mr['id']), '">', wp_kses_post($m4ac_n9dgpcif35mr['label']), '</label>', "\n"; } echo "\n\n\n"; echo '<select '; $m4ac_ah4c_sou = [ 'class', 'name', 'size', 'style', ]; foreach ($m4ac_ah4c_sou as $m4ac_ukqvxo6ne7) { echo ($m4ac_n9dgpcif35mr[$m4ac_ukqvxo6ne7] <> '') ? $m4ac_ukqvxo6ne7 . '="'. esc_attr($m4ac_n9dgpcif35mr[$m4ac_ukqvxo6ne7]) . '" ' : ''; } if ($m4ac_n9dgpcif35mr['multiple']) { echo 'multiple="multiple" '; } foreach ($m4ac_n9dgpcif35mr['custom'] as $m4ac_ukqvxo6ne7) { echo $m4ac_ukqvxo6ne7; } echo '/>', "\n"; foreach ($m4ac_n9dgpcif35mr['options'] as $m4ac_ihnr7cyv => $m4ac_sv5rmko0) { echo '<option value="', esc_attr($m4ac_ihnr7cyv), '" ', (in_array($m4ac_ihnr7cyv, $m4ac_n9dgpcif35mr['value']) ? ' selected="selected" ' : '') , '>', esc_attr($m4ac_sv5rmko0), '</option>'; } echo '</select>'; echo m4ac_s126v0fexga::m4ac_e_rxkt9u($m4ac_n9dgpcif35mr['help_id'], $m4ac_n9dgpcif35mr['help_text']); if ($m4ac_n9dgpcif35mr['label']) { echo '</p>'; } echo "\n\n\n"; } 
function m4ac_i2f6tzue7($m4ac_hn52fkdhpj47 = []) { static $m4ac_jmpxb60n = false; if (! is_array($m4ac_jmpxb60n)) { $m4ac__qsm9fr5bylt = [ 'cb', 'email', 'name', 'username', ]; $m4ac__qsm9fr5bylt = apply_filters('memberium/admin/user/columns', $m4ac__qsm9fr5bylt, $m4ac_hn52fkdhpj47); foreach($m4ac_hn52fkdhpj47 as $m4ac_ukqvxo6ne7 => $m4ac_sv5rmko0) { if (! in_array($m4ac_ukqvxo6ne7, $m4ac__qsm9fr5bylt)) { unset($m4ac_hn52fkdhpj47[$m4ac_ukqvxo6ne7]); } } $m4ac_jmpxb60n = $m4ac_hn52fkdhpj47; } return $m4ac_jmpxb60n; }    
function m4ac_rq9c8jeluf($m4ac_swfa6odr2, $m4ac_ah90o86m, $m4ac_atr94xdeg3) { if (session_status() === PHP_SESSION_ACTIVE) { session_write_close(); } return $m4ac_swfa6odr2; } 
function m4ac_s4vyzh_u7($m4ac_cd47ngmx) { session_write_close(); unset($m4ac_cd47ngmx['async']['loopback_requests']); return $m4ac_cd47ngmx; }    
function m4ac_rh6ijntd() { add_action('admin_enqueue_scripts', [$this, 'm4ac_hp8ckwhr']); add_action('admin_init', [$this, 'm4ac_g6uc9xrhol8a'], 100); add_action('admin_init', [$this, 'm4ac_ns_b32lx0r'], 10); add_action('init', [$this, 'm4ac_o2r_i8yw'], 5); add_action('admin_print_scripts-edit.php', [$this, 'm4ac_i4ygpzkefwhb']); add_action('admin_init', [$this, 'm4ac_iq5_zvn1b'], 1); add_filter('manage_users_columns', [$this, 'm4ac_c7gbc_z9pu']); add_filter('manage_users_custom_column', [$this, 'm4ac_bf_cmrsn'], 10, 3 ); add_filter('plugin_action_links', [$this, 'm4ac_ioj31d4ru'], 10, 2); add_filter('site_status_tests', [$this, 'm4ac_s4vyzh_u7'], 1, 1); add_filter('pre_http_request', [$this, 'm4ac_rq9c8jeluf'], 1, 3); if (memberium_app()->m4ac_x280qrz9kmic('ac_api_verified') ) {  } if (! m4ac_tl5skz6cfptr::m4ac_e28auldn() ) { return; } add_post_type_support('page', 'excerpt'); add_action('admin_init', [$this, 'm4ac_ntcus0hd'], 200); add_action('edit_form_after_title', [$this, 'm4ac_mh4k1bcwjmn']); add_action('init', [$this, 'm4ac_yg9v7com'], PHP_INT_MAX); add_action('init', [$this, 'm4ac_o2r_i8yw'], 5); add_action('save_post', [$this, 'm4ac_xldrwaoispv'] ); add_action('save_post', [$this, 'm4ac_z2mehopf'] ); add_action('wp_ajax_memberium_save_bulk_edit', [$this, 'm4ac_in051koh']); add_action('wpmu_new_blog', [$this, 'm4ac_hxqg8n3_0'], 10, 6); add_filter('gutenberg_can_edit_post_type', [$this, 'm4ac_o89tlf1ky'], PHP_INT_MAX, 2); if (memberium_app()->m4ac_x280qrz9kmic('fast_user_list')) { add_filter('manage_users_columns', [$this, 'm4ac_i2f6tzue7'], PHP_INT_MAX); } if ($_SERVER['REQUEST_METHOD'] == 'POST') { if (isset($_POST['m4ac_license_update'])) { m4ac_tl5skz6cfptr::m4ac_f1w9jlh37i(true); } } } 
function m4ac_ns_b32lx0r() { if (! m4ac_tl5skz6cfptr::m4ac_e28auldn() ) { m4ac_tl5skz6cfptr::m4ac_f1w9jlh37i(); } } private 
function __construct() { $this->notices = []; $m4ac_cwimbugn = memberium_app()->m4ac_x280qrz9kmic('version'); if ( ($m4ac_cwimbugn <> memberium_app()->m4ac_lx4jv6fi7k() ) ) { m4ac_m4i8fbuxl::m4ac_qdzbg4uy(); } $this->m4ac_rh6ijntd(); } static 
function m4ac_zw_dhmca() : self { static $m4ac_u4tpxcro19 = false; return $m4ac_u4tpxcro19 ? $m4ac_u4tpxcro19 : $m4ac_u4tpxcro19 = new self; }  private $core; private $license_status; private $lms_type = ''; private $public_post_types = []; private $non_enhanced_post_types = []; private $notices;  private $appname; const WEBSITE_URL = 'https://memberium.com/activecampaign/'; const BETA_UPDATE_URL = 'https://licenseserver.webpowerandlight.com/memberium-ac/update-list.php'; 
function m4ac_c7gbc_z9pu($m4ac_hn52fkdhpj47) { $m4ac_kg7t21erod = []; foreach($m4ac_hn52fkdhpj47 as $m4ac_ukqvxo6ne7 => $m4ac_mzvr_i4ba6cj) { $m4ac_kg7t21erod[$m4ac_ukqvxo6ne7] = $m4ac_mzvr_i4ba6cj; if ($m4ac_ukqvxo6ne7 == 'username') { $m4ac_kg7t21erod['user_id_contact_id'] = 'User ID / Contact ID'; } } return $m4ac_kg7t21erod; } 
function m4ac_bf_cmrsn($m4ac_ihnr7cyv, $m4ac_kfp1rxng, $m4ac_at_5xofh) { if ($m4ac_kfp1rxng === 'user_id_contact_id') { $m4ac_uo08x_g7 = m4ac_bem2ya5k::m4ac_pm63av15g($m4ac_at_5xofh); $m4ac_ihnr7cyv = $m4ac_at_5xofh . ' / ' . ($m4ac_uo08x_g7 ? $m4ac_uo08x_g7 : '(None)'); } return $m4ac_ihnr7cyv; }    } }
