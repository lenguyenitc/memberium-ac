var UNISON={_countError:0,init:function(){UNISON.samplePacks.init(),UNISON.artists.init(),UNISON.member.init(),UNISON.booking.init(),UNISON.payment.init(),$(".js-btn-submit").on("click",UNISON.addNewsletter),$(".js-btn-contact").on("click",UNISON.submitContact),$(".js-btn-search").on("click",UNISON.searchGoogle),$(".js-input-search").on("keypress",UNISON.enterSearchGoogle),UNISON.__callAuto()},__callAuto:function(){$(".btn-close").on("click",function(e){$(this).parents(".js-popup-message").hide()})},controlPopupMessage:function(e,t){$(".js-popup-message").hide(),1==t?UNISON.completeMessage(e):0!=t&&UNISON.failMessage(e),UNISON.autoClosePopup()},completeMessage:function(e){$(".js-popup-complete > p").html(e),$(".js-popup-complete").show()},failMessage:function(e){$(".js-popup-fail > p").html(e),$(".js-popup-fail").show()},autoClosePopup:function(){setTimeout(function(){$(".js-popup-complete").hide(),$(".js-popup-fail").hide()},3e3)},addErrorForm:function(e,t){$(e).addClass("error"),$(e).parent().append('<span class="message-error">'+t+"</span>"),UNISON._countError=UNISON._countError+1},removeErrorForm:function(e){$(e).find("input , textarea , select ").removeClass("error"),$(e).find(".message-error").remove(),UNISON._countError=0},enterSearchGoogle:function(e){(13==e.which||13==e.keyCode)&&UNISON.searchGoogle(e)},searchGoogle:function(e){return""==$(".js-input-search").val()?!1:void $(this).parents("form").submit()},submitContact:function(e){e.preventDefault(),UNISON.removeErrorForm($(".frmContact"));var t=$(".frmContact input[name=first_name]"),o=$(".frmContact input[name=last_name]"),a=$(".frmContact input[name=email]"),n=$(".frmContact input[name=language]"),r=$(".frmContact input[name=daw]"),s=$(".frmContact select[name=location]"),i=$(".frmContact input[name=price]"),c=$(".frmContact input[name=sound_cloud]"),l=($(".frmContact input[name=interested_signing]"),$(".frmContact textarea[name=message]"));BE.functions.checkEmpty($(t).val())&&UNISON.addErrorForm(t,"Please enter your first name."),BE.functions.checkEmpty($(o).val())&&UNISON.addErrorForm(o,"Please enter your last name."),BE.functions.checkEmpty($(a).val())?UNISON.addErrorForm(a,"Please enter your email."):BE.functions.checkEmail($(a).val())||UNISON.addErrorForm(a,"The format of email is incorrect."),BE.functions.checkEmpty($(n).val())&&UNISON.addErrorForm(n,"Please enter your language."),BE.functions.checkEmpty($(r).val())&&UNISON.addErrorForm(r,"Please enter your daw."),BE.functions.checkEmpty($(s).val())&&UNISON.addErrorForm(s,"Please enter your location."),BE.functions.checkEmpty($(i).val())&&UNISON.addErrorForm(i,"Please enter your price Per/hr."),BE.functions.checkEmpty($(c).val())&&UNISON.addErrorForm(c,"Please enter your sound cloud link."),BE.functions.checkEmpty($(l).val())&&UNISON.addErrorForm(l,"Please enter your sound message."),0==UNISON._countError&&(BE.loading.showLoading(),$.post($(".frmContact").attr("action"),$(".frmContact").serializeArray(),function(e){BE.loading.hideLoading(),1==e.status?($(".frmContact")[0].reset(),UNISON.controlPopupMessage(e.message,1)):UNISON.controlPopupMessage(e.message)},"json"))},addNewsletter:function(e){e.preventDefault(),UNISON.removeErrorForm($(".frmNewsletter"));var t=$(".frmNewsletter input[name=name]"),o=$(".frmNewsletter input[name=email]");BE.functions.checkEmpty($(t).val())&&UNISON.addErrorForm(t,"Please enter your name."),BE.functions.checkEmpty($(o).val())?UNISON.addErrorForm(o,"Please enter your email."):BE.functions.checkEmail($(o).val())||UNISON.addErrorForm(o,"The format of email is incorrect."),0==UNISON._countError&&(BE.loading.showLoading(),$.post($(".frmNewsletter").attr("action"),$(".frmNewsletter").serializeArray(),function(e){BE.loading.hideLoading(),1==e.status?($(".frmNewsletter")[0].reset(),UNISON.controlPopupMessage(e.message,1)):UNISON.controlPopupMessage(e.message)},"json"))},customParseJSON:function(e){return BE.functions.checkEmpty(e)?"":$.parseJSON(e)},convertPrice:function(e){return"$"+e}};UNISON.booking={lessionWithTimeZones:UNISON.customParseJSON($(".js-lession-times").val()),lessionTimes:[],defaultTimeZone:"America/Los_Angeles",changeTimeZone:"America/Los_Angeles",init:function(){$(".back-date").on("click",UNISON.booking.backDatePicker),$(".js-checkout-booking").on("click",UNISON.booking.checkout),$(".js-list-country").on("change",UNISON.booking.changeCountry),$(".js-time-zone").on("change",UNISON.booking.changeTimeZone),$(".js-list-city").on("change",UNISON.booking.changeCity),BE.functions.checkEmpty($(".js-location-code").attr("data-code"))||(UNISON.booking.changeTimeZone=UNISON.booking.defaultTimeZone=$(".js-location-code").attr("data-code")),UNISON.booking.lessionTimes=UNISON.booking.lessionWithTimeZones},changeCountry:function(e){e.preventDefault();var t=($(this).val(),$(this).find("option:selected").attr("id"));$(this).find("option:selected").attr("data-code");$(".phone-code").text("(+"+t+")"),$.post($(this).attr("data-href"),{country:$(this).val()},function(e){var t='<option value="0">City</option>';$.each(e.data.cityList,function(e,o){t+='<option data-timezone="'+o.time_zone+'" value="'+o.id+'">'+o.name+"</option>"}),$(".js-list-city").html(t),$(".js-list-city").parents(".jquery-selectbox").unselectbox(),$(".js-list-city").selectbox(),$(".js-list-city").on("change",UNISON.booking.changeCity)},"json")},changeTimeZone:function(e){UNISON.controlPopupMessage("",0);var t=$(this).val();0==t?(UNISON.controlPopupMessage("Please select your time zone to view available dates and times"),$(".empty-cld").show()):$(".empty-cld").hide(),UNISON.booking.convertDatesBetweenTimezones(t)},changeCity:function(e){UNISON.controlPopupMessage("",0);var t=$(".js-list-city").find(":selected").attr("data-timezone");0==t?(UNISON.controlPopupMessage("Please select your time zone to view available dates and times"),$(".empty-cld").show()):(console.log(t),$(".js-time-zone").val(t),$(".js-time-zone").parents(".jquery-selectbox").unselectbox(),$(".js-time-zone").selectbox(),$(".empty-cld").hide(),UNISON.booking.convertDatesBetweenTimezones(t))},convertDatesBetweenTimezones:function(e,t){t=void 0==t?"YYYY-MM-DD H:m":t,UNISON.booking.changeTimeZone=BE.functions.checkEmpty(e)?e:e,UNISON.booking.lessionWithTimeZones=[],$.each(UNISON.booking.lessionTimes,function(e,o){var a=moment(e).format("YYYY-MM-DD");$.each(o,function(e,o){var n=moment(o.toUpperCase(),["h:mm A"]).format("HH:mm"),r=a+" "+n,s=moment.tz(r,t,UNISON.booking.defaultTimeZone),i=s.clone().tz(UNISON.booking.changeTimeZone),c=i.format("MM/DD/YYYY"),l=i.format("h:mm A");"undefined"==typeof UNISON.booking.lessionWithTimeZones[c]&&(UNISON.booking.lessionWithTimeZones[c]=[]),UNISON.booking.lessionWithTimeZones[c].push(l)})}),$("#datepicker").datepicker({onSelect:function(e){UNISON.booking.chooseDate(e)},minDate:new Date}),$("#datepicker").datepicker("option","beforeShowDay",UNISON.booking.disableSpecificDates),UNISON.booking.backDatePicker()},disableSpecificDates:function(e){var t=e.getMonth(),o=e.getDate(),a=e.getFullYear(),n=("0"+(t+1)).slice(-2)+"/"+("0"+o).slice(-2)+"/"+a;return UNISON.booking.lessionWithTimeZones.hasOwnProperty(n)?[!0,""]:[!1]},chooseDate:function(e){UNISON.booking.lessionWithTimeZones.hasOwnProperty(e)?(UNISON.booking.outputHtmlTimes(UNISON.booking.lessionWithTimeZones[e],e),console.log(UNISON.booking.lessionWithTimeZones[e])):UNISON.controlPopupMessage("Sorry , the artist don't have time on this day.")},outputHtmlTimes:function(e,t){var o="",a="",n=0;$.each(e,function(e,t){o+="<li>"+t.toUpperCase()+"</li>",a=0==n?t.toUpperCase():a,n++}),n=e.length>0?e.length:n;var r=$.datepicker.formatDate("d M yy",new Date(t));$(".js-title-date").text(r),$(".js-all-times").text(a+" - "+e[n-1].toUpperCase()),$(".js-list-date").removeClass("display"),$(".js-list-hours").addClass("display"),$(".js-list-times").html(o),$(".js-title-dates").text($(".js-title-dates").attr("data-title-time")),$(".back-date").show(),$(".frmBooking input[name=date_lession]").val(t),$(".js-list-times > li").on("click",UNISON.booking.chooseLessionsHour)},chooseLessionsHour:function(e){e.preventDefault(),$(this).hasClass("selected")?$(this).removeClass("selected"):$(this).addClass("selected");var t=$(".frmBooking input[name=date_lession]").val(),o=0,a="",n="",r="",s=t;$(".js-list-times > li.selected").each(function(e){var i=$(this).text().toUpperCase();a+=i+" - ",n+=i+"|";var c=UNISON.booking.backDefaultTimeZones(t,$(this).text());r+=c.hours+"|",s+=""!=c.date?c.date+",":"",o++}),a=$(".js-list-times > li.selected:first").text()+($(".js-list-times > li.selected").length>1?" - "+$(".js-list-times > li.selected:last").text():"");var i=o*parseInt($(".js-lession-cost").attr("data-cost"));$(".js-choose-houses").html(a),$(".js-total-money").html(UNISON.convertPrice(i)),$(".frmBooking input[name=hours_lession]").val(n),$(".frmBooking input[name=hours_artist]").val(r),$(".frmBooking input[name=date_artist]").val(s)},calTimeToOutput:function(e){var t=e.split(" "),o=t[0].split(":"),a=parseInt(t[0]),n=t[1];return a>0&&("PM"==t[1]&&11==a?n="AM":12==a?a=1:a+=1),a+":"+o[1]+" "+n},backDatePicker:function(){$(".js-list-date").addClass("display"),$(".js-list-hours").removeClass("display"),$(".js-title-dates").text($(".js-title-dates").attr("data-title-date")),$(".back-date").hide(),$(".js-title-date").html("--"),$(".js-choose-houses").html("--"),$(".js-total-money").html(UNISON.convertPrice(0)),$(".frmBooking input[name=date_lession] , .frmBooking input[name=date_artist]").val(""),$(".frmBooking input[name=hours_lession] , .frmBooking input[name=hours_artist]").val("")},backDefaultTimeZones:function(e,t){var o=moment(e).format("YYYY-MM-DD"),a=moment(t,["h:mm A"]).format("HH:mm"),n=o+" "+a,r=moment.tz(n,UNISON.booking.changeTimeZone),s=r.clone().tz(UNISON.booking.defaultTimeZone),i=(s.format("MM/DD/YYYY"),{});return i.date=e==s.format("MM/DD/YYYY")?"":s.format("MM/DD/YYYY"),i.hours=s.format("h:mm A"),i},checkout:function(e){e.preventDefault();var t=$(this);if(UNISON.member.checkLoginJs(1)){UNISON.removeErrorForm($(".frmBooking"));var o=$(".frmBooking input[name=first_name]"),a=$(".frmBooking input[name=last_name]"),n=($(".frmBooking input[name=email]"),$(".frmBooking input[name=phone]")),r=($(".frmBooking input[name=country]"),$(".frmBooking input[name=city]"),$(".frmBooking input[name=date_lession]")),s=$(".frmBooking input[name=hours_lession]");if(BE.functions.checkEmpty($(o).val())&&UNISON.addErrorForm(o,"Please enter your first name."),BE.functions.checkEmpty($(a).val())&&UNISON.addErrorForm(a,"Please enter your last name."),BE.functions.checkEmpty($(n).val())&&UNISON.addErrorForm(n,"Please enter your phone number."),BE.functions.checkEmpty($(r).val()))return UNISON.controlPopupMessage("Please choose the date."),!1;if(BE.functions.checkEmpty($(s).val()))return UNISON.controlPopupMessage("Please choose the hours."),!1;0==UNISON._countError&&(BE.loading.showLoading(),$.post($(".frmBooking").attr("action"),$(".frmBooking").serializeArray(),function(e){BE.loading.hideLoading(),1==e.status?location.href=$(t).attr("href"):UNISON.controlPopupMessage(e.message)},"json"))}}},UNISON.samplePacks={init:function(){$(".js-samplepacks-filter").on("click",UNISON.samplePacks.filterParks),$(".js-samplepacks-genres").on("change",UNISON.samplePacks.genres),$(".js-samplepacks-search").on("click",UNISON.samplePacks.checkSearch),$(".js-search").on("keypress",UNISON.samplePacks.enterSearch),$(".js-sound").on("click",UNISON.samplePacks.playAudio),UNISON.samplePacks.initCart()},initCart:function(){$(".js-add-cart").on("click",UNISON.samplePacks.addToCart),$(".js-remove-cart").on("click",UNISON.samplePacks.removeCart)},removeCart:function(e){e.preventDefault();var t={};t.itemId=$(this).attr("data-id");var o=$(this);BE.loading.showLoading(),$.post($(this).attr("href"),t,function(e){BE.loading.hideLoading(),$(".js-total-item-cart").text(e.data.totalItemInCart),$(".js-half-"+t.itemId).remove(),$(o).parents(".cart-item").remove(),$(".js-subtotal-cart").text(e.data.subTotalCart),$(".js-discount-price").text(e.data.totalDiscount),$(".js-total-cart").text(e.data.totalCart)})},addToCart:function(e){e.preventDefault();var t={};t.quantity=$(this).attr("data-quantity"),t.itemId=$(this).attr("data-id"),BE.loading.showLoading(),$.post($(this).attr("href"),t,function(e){BE.loading.hideLoading(),$(".js-total-item-cart").text(e.data.totalItemInCart),UNISON.controlPopupMessage(e.message,1)},"json")},enterSearch:function(e){13==e.which&&UNISON.samplePacks.filter()},checkSearch:function(e){return e.preventDefault(),BE.functions.checkEmpty($(".js-search").val())?(UNISON.controlPopupMessage("Please enter the keywork."),!1):void UNISON.samplePacks.filter()},filterParks:function(e){e.preventDefault(),$(".js-samplepacks-filter").removeClass("selected"),$(this).addClass("selected"),UNISON.samplePacks.filter()},genres:function(e){e.preventDefault(),UNISON.samplePacks.filter()},filter:function(){var e={};e.filter=$(".js-samplepacks-filter.selected").attr("data-type"),e.genres=$(".js-samplepacks-genres").val(),e.search=$(".js-search").val(),e.page=$(".js-samplepack-list").attr("data-page"),BE.loading.showLoading(),$.get($(".samplepacks-filter").attr("data-href"),e,function(e){BE.loading.hideLoading(),$(".js-samplepack-list").html(e),UNISON.samplePacks.initCart(),animateSamplePack();new AudioSample})},playAudio:function(e){e.preventDefault()}},UNISON.artists={isLoading:0,init:function(){$(".js-artists-filter").on("click",UNISON.artists.filterGenres),$(".js-artists-filter-mobile").on("change",UNISON.artists.filterGenres),$(".js-send-review").on("click",UNISON.artists.sendReview),$(".rating .vote").on("click",UNISON.artists.addColorRating),$(".js-next-content").on("click",UNISON.artists.nextSlideContent),$(".js-prev-content").on("click",UNISON.artists.prevSlideContent)},pagingContent:function(){var e=$(".js-item-list").attr("data-maxpage"),t=$(".js-item-list").attr("data-currentpage");e>=t&&0==UNISON.artists.isLoading&&(UNISON.artists.isLoading=1,$.get($(".js-item-list").attr("href"),{page:t,call:"js"},function(e){$(".js-item-list").append(e),t=parseInt(t)+1,$(".js-item-list").attr("data-currentpage",t),UNISON.artists.isLoading=0}))},nextSlideContent:function(e){e.preventDefault();var t=$(this).attr("data-maxpage"),o=$(this).attr("data-page");t>=o&&$.get($(this).attr("href"),{page:parseInt(o)+1,call:"js"},function(e){$(".js-item-list").html(e),o++,$(".js-prev-content").attr("data-page",o),$(".js-next-content").attr("data-page",o),$(".js-prev-content").removeClass("hide"),o>=t&&$(".js-next-content").addClass("hide")})},prevSlideContent:function(e){e.preventDefault();var t=($(this).attr("data-maxpage"),$(this).attr("data-page"));t>0&&$.get($(this).attr("href"),{page:parseInt(t)-1,call:"js"},function(e){$(".js-item-list").html(e),t--,$(".js-prev-content").attr("data-page",t),$(".js-next-content").attr("data-page",t),$(".js-next-content").removeClass("hide"),1==t&&$(".js-prev-content").addClass("hide")})},filterGenres:function(e){e.preventDefault(),$(".js-artists-filter").removeClass("selected"),$(this).addClass("selected");var t={};t.genres="undefined"==typeof $(this).attr("data-id")?$(this).val():$(this).attr("data-id"),t.page=$(".js-artist-list").attr("data-page"),BE.loading.showLoading(),$.get($(this).parents(".artists-filter").attr("data-href"),t,function(e){BE.loading.hideLoading(),$(".js-artist-list").html(e.data.outputHtml),e.data.totalPage<=1?$(".js-artist-list").parents(".item-block").find(".js-next").hide():$(".js-artist-list").parents(".item-block").find(".js-next").show(),animateFilter();new Gallery("#artist-slider")},"json")},addColorRating:function(){$(this).parents(".rating").find("li").removeClass("selected"),$(this).addClass("selected");for(var e=$(".rating li.selected").index(),t=0;e>=t;t++)$(".rating li:eq("+t+")").addClass("selected")},checkNumberReview:function(e){var t=(e.keyCode?e.keyCode:e.which,$(this).val().length);$(".js-total-char").text(t)},checkParseNumberReview:function(e){var t=$(this);setTimeout(function(){var e=$(t).val().length;$(".js-total-char").text(e)},100)},sendReview:function(e){e.preventDefault();var t={};return t.review=$(".write-review textarea[name=review]").val(),t.rate=parseInt($(".rating li.selected:last").index())+1,BE.functions.checkEmpty(t.review)?(UNISON.controlPopupMessage("Please enter your review."),!1):0==t.rate?(UNISON.controlPopupMessage("Please rate for the artist."),!1):(BE.loading.showLoading(),void $.post($(this).attr("data-href"),t,function(e){return BE.loading.hideLoading(),$(".write-review").css("display","none"),$(".write-review textarea").text(""),UNISON.controlPopupMessage(e.message,1),!1},"json"))}},UNISON.payment={_proccessPayment:0,init:function(){$(".js-btn-payment").on("click",UNISON.payment.checkout),$(".js-btn-promo").on("click",UNISON.payment.promoCode),$(".js-input-promo").on("keypress",UNISON.payment.checkEnterPromoCode),$(".js-btn-review-cart").on("click",UNISON.payment.reviewCart)},reviewCart:function(e){if(e.preventDefault(),UNISON.payment._proccessPayment=1,UNISON.member.checkLoginJs(1)){if(!($(this).attr("data-total")>0))return UNISON.controlPopupMessage("Your cart is empty."),!1;$(this).parents("form").submit()}},checkEnterPromoCode:function(e){13==e.which&&UNISON.payment.promoCode(e)},promoCode:function(e){if(e.preventDefault(),BE.functions.checkEmpty($(".js-input-promo").val()))return UNISON.controlPopupMessage("Please input the promo code."),!1;var t={};t.action="PROMOCODE",t.code=$(".js-input-promo").val(),$.post($(".js-btn-promo").attr("data-href"),t,function(e){return 1==e.status?($(".js-discount-price").text(e.data.totalDiscount),$(".js-total-cart").text(e.data.totalCart),UNISON.controlPopupMessage(e.message,1),!1):(UNISON.controlPopupMessage(e.message),!1)})},checkout:function(e){e.preventDefault(),$(".frmPayment").submit()}},UNISON.member={_isLoad:!1,_isLogin:$("meta[name=_chkuid]").attr("content"),_urlAvatar:"",_redirectUrl:"",init:function(){$(".js-btn-facebook").on("click",UNISON.member.loginFacebook),$(".js-btn-login").on("click",UNISON.member.loginNormal),$(".js-btn-register").on("click",UNISON.member.register),$(".js-update-info").on("click",UNISON.member.updateInfo),$("body").on("click",".js-check-login",UNISON.member.checkLogin),$(".js-change-pass").on("click",UNISON.member.changePass),$(".js-update-pass").on("click",UNISON.member.updateForgotPass),$(".js-forgot-pass").on("click",UNISON.member.forgotPass),$(".js-btn-upload").on("click",function(){$(".js-input-file").click()}),$("a.lostpass").on("click",function(e){e.preventDefault(),$("#lostpass").show()}),$(".js-input-file").change(function(){var e=["jpg","png","jpeg"];if(-1==$.inArray($(this).val().split(".").pop().toLowerCase(),e)||this.files[0].size>3145728)return $(this).val(""),UNISON.controlPopupMessage("You can only attach .jpg, .png, and .jpeg files that are less than 3MB in size"),!1;var t=this.files?this.files:[];if(!t.length||!window.FileReader)return!1;if(t[0].size>5242880)return UNISON.controlPopupMessage("Vui lòng gửi hình dự thi có dung lượng dưới 5Mb"),!1;if(-1==$.inArray($(this).val().split(".").pop().toLowerCase(),BE.functions._allowExtension))return UNISON.controlPopupMessage("Bạn vui lòng chỉ tải ảnh với định dạng .jpeg .jpg  .png  .gif  .bmp"),!1;if(/^image/.test(t[0].type)){var o=new FileReader;o.readAsDataURL(t[0]),o.onloadend=function(){var e={};e.image=this.result,BE.loading.showLoading(),$.post($(".js-page-profile").attr("href"),e,function(t){BE.loading.hideLoading(),$(".js-preview-avatar").attr("src",e.image)},"json")}}})},checkLogin:function(e){e.preventDefault(),UNISON.member._redirectUrl=$(this).attr("href"),1==$(this).attr("data-login-header")&&sessionStorage.removeItem("product_data"),UNISON.member.checkLoginJs(1)&&(location.href=UNISON.member._redirectUrl)},checkLoginJs:function(e){return 0!=parseInt(UNISON.member._isLogin)&&BE.functions.isNumber(UNISON.member._isLogin)?!0:(1==e&&openPopupLogin(),!1)},loginFacebook:function(e){if("undefined"!=typeof e&&e.preventDefault(),"undefined"!=typeof FB){UNISON.member._isLoad=!1,clearInterval(UNISON.member._setInterval);var t=($(this).attr("data-href"),"email,public_profile");BE.loading.showLoading(),FB.getLoginStatus(function(e){"connected"===e.status?UNISON.member.login(e.authResponse.accessToken):FB.login(function(e){"connected"===e.status?UNISON.member.login(e.authResponse.accessToken):BE.loading.hideLoading()},{perms:t})})}else UNISON.controlPopupMessage("Đang tải Api Facebook , vui lòng chờ trong giây lát."),UNISON.member._setInterval=setInterval(function(){UNISON.member._isLoad&&UNISON.member.login(e)},200)},login:function(e){var t={};t.accessToken=e,t.action="LOGINFB",$.post($(".js-btn-facebook").attr("href"),t,function(e){BE.loading.hideLoading(),1==e.status?(UNISON.member._isLogin=1,"undefined"==typeof e.data.fristLogin||1!=e.data.fristLogin||BE.functions.checkEmpty(UNISON.member._redirectUrl)?1==UNISON.payment._proccessPayment?$(".frmCart").submit():location.reload():location.href=UNISON.member._redirectUrl,$(".js-close-account").click()):UNISON.controlPopupMessage(e.message)},"json")},register:function(e){e.preventDefault(),UNISON.removeErrorForm($(".frmSignUp"));var t=$(".frmSignUp input[name=first_name]"),o=$(".frmSignUp input[name=last_name]"),a=$(".frmSignUp input[name=email]"),n=$(".frmSignUp input[name=password]"),r=$(".frmSignUp input[name=confim-password]"),s=$(".frmSignUp input[name=phone]");BE.functions.checkEmpty($(t).val())&&UNISON.addErrorForm(t,"Please enter your first name."),BE.functions.checkEmpty($(o).val())&&UNISON.addErrorForm(o,"Please enter your last name."),BE.functions.checkEmpty($(a).val())?UNISON.addErrorForm(a,"Please enter your email address."):BE.functions.checkEmail($(a).val())||UNISON.addErrorForm(a,"The format of email not valid."),BE.functions.checkEmpty($(n).val())?UNISON.addErrorForm(n,"Please enter your password."):$(n).val()!=$(r).val()&&UNISON.addErrorForm(r,"The passwords you entered not match."),BE.functions.checkEmpty($(s).val())&&UNISON.addErrorForm(s,"Please enter your phone number."),0==UNISON._countError&&(BE.loading.showLoading(),$.post($(".frmSignUp").attr("action"),$(".frmSignUp").serializeArray(),function(e){BE.loading.hideLoading(),1==e.status?("undefined"==typeof e.data.fristLogin||1!=e.data.fristLogin||BE.functions.checkEmpty(UNISON.member._redirectUrl)?location.reload():location.href=UNISON.member._redirectUrl,$(".frmSignUp")[0].reset(),UNISON.controlPopupMessage(e.message,1)):UNISON.controlPopupMessage(e.message)},"json"))},loginNormal:function(e){e.preventDefault(),UNISON.removeErrorForm($(".frmSignIn"));var t=$(".frmSignIn input[name=email]"),o=$(".frmSignIn input[name=password]");BE.functions.checkEmpty($(t).val())?UNISON.addErrorForm(t,"Please enter your email address."):BE.functions.checkEmail($(t).val())||UNISON.addErrorForm(t,"The format of email not valid."),BE.functions.checkEmpty($(o).val())&&UNISON.addErrorForm(o,"Please enter your password."),0==UNISON._countError&&(BE.loading.showLoading(),$.post($(this).parents("form").attr("action"),$(".frmSignIn").serializeArray(),function(e){BE.loading.hideLoading(),1==e.status?"undefined"==typeof e.data.fristLogin||1!=e.data.fristLogin||BE.functions.checkEmpty(UNISON.member._redirectUrl)?1==UNISON.payment._proccessPayment?$(".frmCart").submit():location.reload():location.href=UNISON.member._redirectUrl:UNISON.controlPopupMessage(e.message)},"json"))},changePass:function(e){e.preventDefault(),UNISON.removeErrorForm($(".frmChangePass"));var t=$(".frmChangePass input[name=current_password]"),o=$(".frmChangePass input[name=confim_password]"),a=$(".frmChangePass input[name=password]");BE.functions.checkEmpty($(t).val())&&UNISON.addErrorForm(t,"Please enter your current password."),BE.functions.checkEmpty($(a).val())?UNISON.addErrorForm(a,"Please enter your password."):$(a).val()!=$(o).val()&&UNISON.addErrorForm(o,"The passwords you entered not match."),0==UNISON._countError&&(BE.loading.showLoading(),$.post($(this).parents("form").attr("action"),$(".frmChangePass").serializeArray(),function(e){BE.loading.hideLoading(),1==e.status?$(".js-close-account").click():UNISON.controlPopupMessage(e.message)},"json"))},updateProfile:function(e){e.preventDefault(),UNISON.removeErrorForm($(".frmUpdateProfile"));var t=$(".frmUpdateProfile input[name=first_name]"),o=$(".frmUpdateProfile input[name=last_name]"),a=$(".frmUpdateProfile input[name=email]"),n=$(".frmUpdateProfile select[name=country]"),r=$(".frmUpdateProfile select[name=city]"),s=$(".frmUpdateProfile input[name=phone]");BE.functions.checkEmpty($(t).val())&&UNISON.addErrorForm(t,"Please enter your first name."),BE.functions.checkEmpty($(o).val())&&UNISON.addErrorForm(o,"Please enter your last name."),BE.functions.checkEmpty($(a).val())?UNISON.addErrorForm(a,"Please enter your email address."):BE.functions.checkEmail($(a).val())||UNISON.addErrorForm(a,"The format of email not valid."),BE.functions.checkEmpty($(n).val())&&UNISON.addErrorForm(n,"Please choose your country."),BE.functions.checkEmpty($(r).val())&&UNISON.addErrorForm(r,"Please choose your city."),BE.functions.checkEmpty($(s).val())&&UNISON.addErrorForm(s,"Please enter your phone number."),0==UNISON._countError&&(BE.loading.showLoading(),$.post($(".frmUpdateProfile").attr("action"),$(".frmUpdateProfile").serializeArray(),function(e){BE.loading.hideLoading(),1==e.status?(location.reload(),UNISON.controlPopupMessage(e.message,1)):UNISON.controlPopupMessage(e.message)},"json"))},updateForgotPass:function(e){e.preventDefault(),UNISON.removeErrorForm($(".frmChangePass"));var t=$(".frmChangePass input[name=confim_password]"),o=$(".frmChangePass input[name=password]");BE.functions.checkEmpty($(o).val())?UNISON.addErrorForm(o,"Please enter your password."):$(o).val()!=$(t).val()&&UNISON.addErrorForm(t,"The passwords you entered not match."),0==UNISON._countError&&(BE.loading.showLoading(),$.post($(this).parents("form").attr("action"),$(".frmChangePass").serializeArray(),function(e){BE.loading.hideLoading(),1==e.status?(jAlert(e.message,"",function(){location.href=e.data.homeUrl}),$(".js-close-account").click()):UNISON.controlPopupMessage(e.message)},"json"))},forgotPass:function(e){e.preventDefault(),UNISON.removeErrorForm($(".frmForgot"));var t=$(".frmForgot input[name=email]");BE.functions.checkEmpty($(t).val())?UNISON.addErrorForm(t,"Please enter your email address."):BE.functions.checkEmail($(t).val())||UNISON.addErrorForm(t,"The format of email not valid."),0==UNISON._countError&&(BE.loading.showLoading(),$.post($(".frmForgot").attr("action"),$(".frmForgot").serializeArray(),function(e){BE.loading.hideLoading(),1==e.status?($(".frmForgot")[0].reset(),$(".js-close-account").click(),UNISON.controlPopupMessage(e.message,1)):UNISON.controlPopupMessage(e.message)},"json"))}},$(document).ready(function(){UNISON.init()});