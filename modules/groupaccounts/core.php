<?php
/**
 * Copyright (c) 2020 David J Bullock
 * Web Power and Light
 */

 if (class_exists('m4ac_c6rqypiacz4') ) { final 
class m4ac_fxpbyk36nrs { 
function m4ac_v1s79n2wt($m4ac_at_5xofh) { global $wpdb; $m4ac_jouqjei9gbc3 = "{$wpdb->prefix}memberium_groupaccount_members";  $m4ac_xtcz6bi97flk = "DELETE FROM `{$m4ac_jouqjei9gbc3}` WHERE `child_uid` = %d;"; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_at_5xofh); $wpdb->query($m4ac_xtcz6bi97flk);  $m4ac_xtcz6bi97flk = "SELECT `child_uid` FROM `{$m4ac_jouqjei9gbc3}` WHERE `parent_uid` = %d"; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_at_5xofh); $m4ac_dsu20o_de = $wpdb->get_col($m4ac_xtcz6bi97flk);  foreach ($m4ac_dsu20o_de as $m4ac_q8y5rflc) { memberium_app()->m4ac_vte905fzir8( (int) $m4ac_q8y5rflc ); $this->m4ac_ysk0p4lw( (int) $m4ac_q8y5rflc, $m4ac_at_5xofh ); } } private 
function m4ac_qkig2_qanu($m4ac_qsvd0m6oq) { $m4ac_jhf0zi4tu_7 = false; $m4ac_rg0nu35qxr = empty($m4ac_qsvd0m6oq['tag_ids']) ? [] : array_filter(explode(',', $m4ac_qsvd0m6oq['tag_ids']) ); if (! empty($m4ac_rg0nu35qxr) ) { $m4ac_jhf0zi4tu_7 = (int) count(array_intersect($this->m4ac_hgzt89ony(), $m4ac_rg0nu35qxr)); } return $m4ac_jhf0zi4tu_7; } private 
function m4ac_tcktfbi_py( int $m4ac_at_5xofh ) : int { global $wpdb; $m4ac_at_5xofh = (int) $m4ac_at_5xofh; $m4ac_jouqjei9gbc3 = "{$wpdb->prefix}memberium_groupaccount_members"; $m4ac_xtcz6bi97flk = "SELECT `parent_uid` FROM `{$m4ac_jouqjei9gbc3}` WHERE `child_uid` = {$m4ac_at_5xofh} AND `active` = 1" ; $m4ac_r7l9ptndubs1 = $wpdb->get_var($m4ac_xtcz6bi97flk); return (int) $m4ac_r7l9ptndubs1; } private 
function m4ac_hgzt89ony() { return array_filter(explode(',', memberium_app()->m4ac_x280qrz9kmic('groupaccounts/tag/parent') ) ); } private 
function m4ac_uq17e_x02tgk($m4ac_j0e14tousp_) { global $wpdb; $m4ac_ijluknzsx3fv = ''; if (! empty($m4ac_j0e14tousp_)) { if (is_array($m4ac_j0e14tousp_) ) { $m4ac_j0e14tousp_ = implode(',', array_filter($m4ac_j0e14tousp_) ); } $m4ac_jouqjei9gbc3 = MEMBERIUM_DB_TAGS; $m4ac_h57xqitcp = memberium_app()->m4ac_bztk3xj1(); $m4ac_xtcz6bi97flk = "SELECT `name` FROM `{$m4ac_jouqjei9gbc3}` WHERE `id` IN ( {$m4ac_j0e14tousp_} ) ORDER BY `id`"; $m4ac_ijluknzsx3fv = implode(',', $wpdb->get_col($m4ac_xtcz6bi97flk) ); } return $m4ac_ijluknzsx3fv; } 
function m4ac_hb03_2tqp($m4ac_at_5xofh = 0) { $m4ac_kp6zrjntmf78 = ''; $m4ac_at_5xofh = $m4ac_at_5xofh > 0 ? (int) $m4ac_at_5xofh : get_current_user_id(); if ($m4ac_at_5xofh > 0) { $m4ac_uo08x_g7 = (int) m4ac_bem2ya5k::m4ac_pm63av15g($m4ac_at_5xofh); if ($m4ac_uo08x_g7 > 0 ) { $m4ac_kp6zrjntmf78 = get_user_meta($m4ac_at_5xofh, 'm4ac/groupaccount/parent_code', true); if (empty($m4ac_kp6zrjntmf78)) { $m4ac_kp6zrjntmf78 = memberium_app()->m4ac__oezsglai(15); $this->m4ac_b63ija_9px($m4ac_kp6zrjntmf78, $m4ac_at_5xofh); } } } return $m4ac_kp6zrjntmf78; } 
function m4ac_b63ija_9px($m4ac_kp6zrjntmf78, $m4ac_at_5xofh = 0) { global $wpdb; $m4ac_at_5xofh = $m4ac_at_5xofh > 0 ? (int) $m4ac_at_5xofh : get_current_user_id(); if ($m4ac_at_5xofh) {  $m4ac_zsu3h4e2 = md5($m4ac_kp6zrjntmf78); update_user_meta($m4ac_at_5xofh, 'm4ac/groupaccount/parent_code', $m4ac_kp6zrjntmf78); update_user_meta($m4ac_at_5xofh, "m4ac/groupaccount/parent_code/{$m4ac_zsu3h4e2}", $m4ac_kp6zrjntmf78);  $m4ac_xtcz6bi97flk = "DELETE FROM `{$wpdb->usermeta}` WHERE `user_id` = {$m4ac_at_5xofh} AND `meta_key` LIKE 'm4ac/groupaccount/parent_code/%' AND `meta_value` <> %s "; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_kp6zrjntmf78); $wpdb->query($m4ac_xtcz6bi97flk); } } 
function m4ac_rh1jcw4u6f3($m4ac_kp6zrjntmf78) { global $wpdb; $m4ac_zsu3h4e2 = md5($m4ac_kp6zrjntmf78); $m4ac_ukqvxo6ne7 = "m4ac/groupaccount/parent_code/{$m4ac_zsu3h4e2}"; $m4ac_xtcz6bi97flk = "SELECT `user_id` FROM {$wpdb->usermeta} WHERE `meta_name` = %s AND `meta_value` = %s "; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_ukqvxo6ne7, $m4ac_kp6zrjntmf78); $m4ac_at_5xofh = $wpdb->get_var($m4ac_xtcz6bi97flk); return (int) $m4ac_at_5xofh; } 
function m4ac_r0fwaiqndh21(int $m4ac_at_5xofh = 0) { $m4ac_at_5xofh = empty($m4ac_at_5xofh) ? get_current_user_id() : $m4ac_at_5xofh;  $m4ac_gu694_op0hx = (int) memberium_app()->m4ac_x280qrz9kmic('groupaccounts/min_child_accounts', 0);  $m4ac_vwnrob57yl = memberium_app()->m4ac_x280qrz9kmic('groupaccounts/fields/additional', ''); if ( ! empty( $m4ac_vwnrob57yl ) ) { $m4ac_vwnrob57yl = strtolower( $m4ac_vwnrob57yl ); $m4ac_gu694_op0hx = $m4ac_gu694_op0hx + (int) m4ac_m7m0xgfv::m4ac_zw_dhmca()->m4ac_d58nps2ix6u( $m4ac_vwnrob57yl ); }  $m4ac_lus6o5dtmi7e = memberium_app()->m4ac_x280qrz9kmic('groupaccounts/tag/grants', false); if ( ! empty( $m4ac_lus6o5dtmi7e ) ) { foreach( $m4ac_lus6o5dtmi7e as $m4ac_rsau1b7dj2lr => $m4ac_ihnr7cyv ) { if ( memberium_app()->m4ac_t5ws0_v68( $m4ac_rsau1b7dj2lr ) ) { $m4ac_gu694_op0hx = $m4ac_gu694_op0hx + (int)$m4ac_ihnr7cyv; } } } $m4ac_gu694_op0hx = apply_filters('m4ac/groupaccounts/slots/max', $m4ac_gu694_op0hx, $m4ac_at_5xofh); return $m4ac_gu694_op0hx; } 
function m4ac_cv1_ltp3h(int $m4ac_at_5xofh = 0, bool $m4ac_i5jbx79o = true) { global $wpdb; $m4ac_at_5xofh = $m4ac_at_5xofh ? $m4ac_at_5xofh : get_current_user_id(); $m4ac_i5jbx79o = (bool) $m4ac_i5jbx79o; $m4ac_at_5xofh = (int) $m4ac_at_5xofh; $m4ac_xtcz6bi97flk = "SELECT count(`id`) FROM `{$wpdb->prefix}memberium_groupaccount_members` WHERE `parent_uid` = {$m4ac_at_5xofh} AND `active` = 1"; if ($m4ac_i5jbx79o) { $m4ac_xtcz6bi97flk .= " AND `active` = 1"; } return (int) $wpdb->get_var($m4ac_xtcz6bi97flk); } private 
function m4ac_e3xancdq24y(int $m4ac_at_5xofh){ if (isset($_SESSION['memb_user']['id']) && $_SESSION['memb_user']['id'] == (int) $m4ac_at_5xofh) { $m4ac__crsbi5yuze = $_SESSION; } else{ $m4ac__crsbi5yuze = memberium_app()->m4ac_c17vlcx3a4($m4ac_at_5xofh); } return $m4ac__crsbi5yuze; } 
function m4ac_l7ocib12d(int $m4ac_at_5xofh) : bool { global $wpdb; $m4ac_f4chmq_0 = false; $m4ac_at_5xofh = $m4ac_at_5xofh ? $m4ac_at_5xofh : (int) get_current_user_id(); $m4ac_uo08x_g7 = (int) m4ac_bem2ya5k::m4ac_pm63av15g($m4ac_at_5xofh); if ($m4ac_uo08x_g7) { $m4ac_te6rvtapbjw = $this->m4ac_hgzt89ony(); $m4ac__crsbi5yuze = $this->m4ac_e3xancdq24y($m4ac_at_5xofh); $m4ac_it7ckwjoqd = memberium_app()->m4ac_t5ws0_v68($m4ac_te6rvtapbjw, $m4ac__crsbi5yuze);  $m4ac_i_l1zvoaq7j = (bool) $this->m4ac_cv1_ltp3h($m4ac_at_5xofh); $m4ac_qrsox62i = (bool) $this->m4ac_oaegc05s8nw6($m4ac_at_5xofh); $m4ac_f4chmq_0 = ! $m4ac_it7ckwjoqd && ! $m4ac_i_l1zvoaq7j && ! $m4ac_qrsox62i; } return $m4ac_f4chmq_0; } 
function m4ac_la49s_jhqwi( int $m4ac_at_5xofh = 0 ) : bool { $m4ac_gj_mk832 = false; $m4ac_at_5xofh = $m4ac_at_5xofh > 0 ? $m4ac_at_5xofh : (int) get_current_user_id(); $m4ac_uo08x_g7 = (int) m4ac_bem2ya5k::m4ac_pm63av15g($m4ac_at_5xofh); if ($m4ac_uo08x_g7) { $m4ac__crsbi5yuze = $this->m4ac_e3xancdq24y($m4ac_at_5xofh); $m4ac_gj_mk832 = memberium_app()->m4ac_t5ws0_v68($this->m4ac_hgzt89ony(), $m4ac__crsbi5yuze); $m4ac_gj_mk832 = $m4ac_gj_mk832 ? ! $this->m4ac_oaegc05s8nw6($m4ac_at_5xofh) : $m4ac_gj_mk832; } return $m4ac_gj_mk832; } 
function m4ac_exw_fsg4er7( int $m4ac_at_5xofh = 0 ) : bool { $m4ac_q2mkv_e3goc = false; $m4ac_at_5xofh = $m4ac_at_5xofh > 0 ? $m4ac_at_5xofh : (int) get_current_user_id(); $m4ac_uo08x_g7 = (int) m4ac_bem2ya5k::m4ac_pm63av15g($m4ac_at_5xofh); if ($m4ac_uo08x_g7) { $m4ac__crsbi5yuze = $this->m4ac_e3xancdq24y($m4ac_at_5xofh); $m4ac_m8ry2xaj9wg = (int) $this->m4ac_tcktfbi_py($m4ac_at_5xofh); $m4ac_q2mkv_e3goc = (bool) $m4ac_m8ry2xaj9wg; if ($m4ac_q2mkv_e3goc) { $m4ac_q2mkv_e3goc = memberium_app()->m4ac_t5ws0_v68($this->m4ac_hgzt89ony(), $m4ac__crsbi5yuze); } } return $m4ac_q2mkv_e3goc; }    
function m4ac_oaegc05s8nw6( int $m4ac_q8y5rflc ) { global $wpdb; $m4ac_jouqjei9gbc3 = "`{$wpdb->prefix}memberium_groupaccount_members`"; $m4ac_xtcz6bi97flk = "SELECT `parent_uid` FROM {$m4ac_jouqjei9gbc3} WHERE `child_uid` = %d AND `active` = 1"; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_q8y5rflc); $m4ac_r7l9ptndubs1 = $wpdb->get_var($m4ac_xtcz6bi97flk); return $m4ac_r7l9ptndubs1 > 0 ? $m4ac_r7l9ptndubs1 : false; } 
function m4ac_z92a0kdcm($m4ac_r7l9ptndubs1) { global $wpdb; $m4ac_jouqjei9gbc3 = "`{$wpdb->prefix}memberium_groupaccount_members`"; $m4ac_xtcz6bi97flk = "SELECT `child_uid` FROM {$m4ac_jouqjei9gbc3} WHERE `parent_uid` = %d AND `active` = 1"; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_r7l9ptndubs1); $m4ac_fic2e07vfkz = $wpdb->get_col($m4ac_xtcz6bi97flk); return $m4ac_fic2e07vfkz; } 
function m4ac_i60pjwhdgsxy(int $m4ac_r7l9ptndubs1 = 0) { global $wpdb; $m4ac_r7l9ptndubs1 = $m4ac_r7l9ptndubs1 ? $m4ac_r7l9ptndubs1 : get_current_user_id(); $m4ac_jouqjei9gbc3 = "`{$wpdb->prefix}memberium_groupaccount_members`"; $m4ac_xtcz6bi97flk = "SELECT count(*) FROM {$m4ac_jouqjei9gbc3} WHERE `parent_uid` = %d AND `active` = 1"; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_r7l9ptndubs1); $m4ac_fic2e07vfkz = $wpdb->get_var($m4ac_xtcz6bi97flk); return (bool) (int) $m4ac_fic2e07vfkz; } 
function m4ac_n9246tnvsclq( int $m4ac_q8y5rflc, int $m4ac_r7l9ptndubs1 ) { global $wpdb; $m4ac_ck8wtizso64 = $this->m4ac_cv1_ltp3h($m4ac_r7l9ptndubs1, 1) < $this->m4ac_r0fwaiqndh21($m4ac_r7l9ptndubs1) ? 1 : 0; $m4ac_jouqjei9gbc3 = "{$wpdb->prefix}memberium_groupaccount_members"; $m4ac_ugla7zr2ks1j = $this->m4ac_oaegc05s8nw6($m4ac_q8y5rflc);  $m4ac_f4chmq_0 = $this->m4ac_l7ocib12d($m4ac_q8y5rflc); if ( ! $m4ac_f4chmq_0 ) { return false; } if( $m4ac_ugla7zr2ks1j && $m4ac_ugla7zr2ks1j !== $m4ac_r7l9ptndubs1 ){ return false; } else{  $m4ac_xtcz6bi97flk = "SELECT * FROM `{$m4ac_jouqjei9gbc3}` WHERE `parent_uid` = %d AND `child_uid` = %d"; $m4ac_lsxa90fgqk = $wpdb->get_row( $wpdb->prepare( $m4ac_xtcz6bi97flk, $m4ac_r7l9ptndubs1, $m4ac_q8y5rflc ) ); if( ! empty($m4ac_lsxa90fgqk) ){  if( (int) $m4ac_lsxa90fgqk->active === $m4ac_ck8wtizso64 ){ return true; }  else{ $wpdb->delete($m4ac_jouqjei9gbc3, ['id' => $m4ac_lsxa90fgqk->id], ['%d']); } } }  $m4ac_xtcz6bi97flk = "INSERT INTO `{$m4ac_jouqjei9gbc3}`
				(`parent_uid`, `child_uid`, `active`)
				values (%d, %d, %d)"; $m4ac_f92tkhgnzfcb = $wpdb->query( $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_r7l9ptndubs1, $m4ac_q8y5rflc, $m4ac_ck8wtizso64) ); $m4ac_f92tkhgnzfcb = ! empty($m4ac_f92tkhgnzfcb) && (int)$m4ac_f92tkhgnzfcb > 0; if (MEMBERIUM_DEBUG){ $m4ac_pn54za2ws = $m4ac_f92tkhgnzfcb ? "Account {$m4ac_q8y5rflc} assigned to {$m4ac_r7l9ptndubs1} with status {$m4ac_ck8wtizso64}" : "Account {$m4ac_q8y5rflc} not assigned to {$m4ac_r7l9ptndubs1} : Database Error"; } $m4ac_a59jh02f = (int) m4ac_bem2ya5k::m4ac_pm63av15g($m4ac_q8y5rflc); $m4ac_abpe4f6v_u = (int) m4ac_bem2ya5k::m4ac_pm63av15g($m4ac_r7l9ptndubs1); $m4ac_m15a9_ef = memberium_app()->m4ac_x280qrz9kmic('groupaccounts/parent/added', 0); $m4ac_vvtxu_w5j = memberium_app()->m4ac_x280qrz9kmic('groupaccounts/child/added', 0); memberium_app()->m4ac_lmhdiugb6cs($m4ac_vvtxu_w5j, $m4ac_a59jh02f); memberium_app()->m4ac_lmhdiugb6cs($m4ac_m15a9_ef, $m4ac_abpe4f6v_u); return $m4ac_f92tkhgnzfcb; } 
function m4ac_ysk0p4lw(int $m4ac_q8y5rflc, int $m4ac_r7l9ptndubs1) { global $wpdb; $m4ac_jouqjei9gbc3 = "`{$wpdb->prefix}memberium_groupaccount_members`"; $m4ac_xtcz6bi97flk = "UPDATE {$m4ac_jouqjei9gbc3} SET `active` = 0 WHERE `parent_uid` = %d AND `child_uid` = %d"; $m4ac_xtcz6bi97flk = $wpdb->prepare($m4ac_xtcz6bi97flk, $m4ac_r7l9ptndubs1, $m4ac_q8y5rflc); $m4ac_a59jh02f = (int) m4ac_bem2ya5k::m4ac_pm63av15g($m4ac_q8y5rflc); $m4ac_a1_g9a7w = memberium_app()->m4ac_x280qrz9kmic('groupaccounts/child/cancel', 0); $wpdb->query($m4ac_xtcz6bi97flk); memberium_app()->m4ac_lmhdiugb6cs($m4ac_a1_g9a7w, $m4ac_a59jh02f); } 
function m4ac_lxa5fts736_d() { global $wpdb; $m4ac_jouqjei9gbc3 = "`{$wpdb->prefix}memberium_groupaccount_members`"; $m4ac_xtcz6bi97flk = "DELETE FROM {$m4ac_jouqjei9gbc3} WHERE `active` = 0"; $wpdb->query($m4ac_xtcz6bi97flk); }    
function m4ac_urmf3yxa($m4ac_qsvd0m6oq, $m4ac_uo08x_g7) { $m4ac_it7ckwjoqd = $this->m4ac_qkig2_qanu($m4ac_qsvd0m6oq); $m4ac_r7l9ptndubs1 = 0; $m4ac_abpe4f6v_u = 0; $m4ac_miz1qvofjl = []; $m4ac_at_5xofh = m4ac_bem2ya5k::m4ac_y4vi6m8f1qhj($m4ac_uo08x_g7); if ($m4ac_at_5xofh) { $m4ac_r7l9ptndubs1 = $this->m4ac_tcktfbi_py($m4ac_at_5xofh); } if ($m4ac_r7l9ptndubs1) { $m4ac_abpe4f6v_u = memberium_app()->m4ac_pm63av15g($m4ac_r7l9ptndubs1); if ($m4ac_abpe4f6v_u > 0 && $m4ac_abpe4f6v_u !== $m4ac_uo08x_g7) {  $m4ac_hhwq3ugl06j = memberium_app()->m4ac_zrj6g8l4ap9i($m4ac_abpe4f6v_u); $m4ac_miz1qvofjl = $this->m4ac_nriogdmhuz($m4ac_hhwq3ugl06j['tag_ids']); $m4ac_miz1qvofjl = apply_filters('m4ac/groupaccounts/tags/inheritable', $m4ac_miz1qvofjl, $m4ac_r7l9ptndubs1); $m4ac_b1_s9qaj6 = array_filter( explode(',', $m4ac_qsvd0m6oq['tag_ids']) ); $m4ac_vwur90xpqe = array_merge($m4ac_miz1qvofjl, $m4ac_b1_s9qaj6); $m4ac_qsvd0m6oq['tag_ids'] = implode(',', $m4ac_vwur90xpqe); $m4ac_qsvd0m6oq['tags'] = $this->m4ac_uq17e_x02tgk($m4ac_vwur90xpqe);  $m4ac_vcd_t1uze = $this->m4ac_fw4rskc8ge_( $m4ac_hhwq3ugl06j ); $m4ac_vcd_t1uze = apply_filters('m4ac/groupaccounts/fields/inheritable', $m4ac_vcd_t1uze ); if ( ! empty( $m4ac_vcd_t1uze ) && is_array($m4ac_vcd_t1uze) ) { foreach( $m4ac_vcd_t1uze as $m4ac_ur90k1f2dy ) { if ( empty( $m4ac_qsvd0m6oq[$m4ac_ur90k1f2dy] ) ) { $m4ac_qsvd0m6oq[$m4ac_ur90k1f2dy] = $m4ac_hhwq3ugl06j[$m4ac_ur90k1f2dy]; } } } } } return $m4ac_qsvd0m6oq; } private 
function m4ac_nriogdmhuz($m4ac_j0e14tousp_) { static $m4ac_at9usyni = false; static $m4ac_tldeqt2f7_i = false; static $m4ac_ym6r0btfk = false; if (! is_array($m4ac_j0e14tousp_) ) { $m4ac_j0e14tousp_ = ! empty($m4ac_j0e14tousp_) ? array_filter(explode(',', $m4ac_j0e14tousp_) ) : []; } if( empty($m4ac_j0e14tousp_) ){ return $m4ac_j0e14tousp_; } if ($m4ac_at9usyni === false || $m4ac_tldeqt2f7_i === false || $m4ac_ym6r0btfk === false ) { $m4ac_at9usyni = array_filter(explode(',', memberium_app()->m4ac_x280qrz9kmic('groupaccounts/tag/whitelist', '') ) ); $m4ac_te6rvtapbjw = $this->m4ac_hgzt89ony(); $m4ac_znt9fdb27 = (bool) memberium_app()->m4ac_x280qrz9kmic('groupaccounts/memberships/inherit'); if( $m4ac_znt9fdb27 ){ $m4ac_t3cu9hgt = get_option( MEMBERIUM_MEMBERSHIP_SETTINGS, [] ); if( ! empty($m4ac_t3cu9hgt) ){ foreach ($m4ac_t3cu9hgt as $m4ac_qb48jahn0kc) { $m4ac_at9usyni[] = (int) $m4ac_qb48jahn0kc['main_id']; $m4ac_at9usyni[] = (int) $m4ac_qb48jahn0kc['addltag_ids']; $m4ac_at9usyni[] = (int) $m4ac_qb48jahn0kc['payf_id']; $m4ac_at9usyni[] = (int) $m4ac_qb48jahn0kc['cancel_id']; $m4ac_at9usyni[] = (int) $m4ac_qb48jahn0kc['suspend_id']; } unset($m4ac_t3cu9hgt, $m4ac_qb48jahn0kc, $m4ac_znt9fdb27); $m4ac_at9usyni = array_unique( array_filter($m4ac_at9usyni) ); } } $m4ac_ym6r0btfk = memberium_app()->m4ac_x280qrz9kmic('groupaccounts/tag/translations', ''); $m4ac_ym6r0btfk = is_array($m4ac_ym6r0btfk) ? $m4ac_ym6r0btfk : false; $m4ac_tldeqt2f7_i = array_filter(explode(',', memberium_app()->m4ac_x280qrz9kmic('groupaccounts/tag/blacklist', '') ) ); $m4ac_tldeqt2f7_i = array_merge($m4ac_tldeqt2f7_i, $m4ac_te6rvtapbjw); }  if (! empty($m4ac_at9usyni) ) { $m4ac_j0e14tousp_ = array_intersect($m4ac_j0e14tousp_, $m4ac_at9usyni); }  if ( ! empty($m4ac_ym6r0btfk) ) { $m4ac_j0e14tousp_ = array_flip($m4ac_j0e14tousp_); foreach($m4ac_ym6r0btfk as $m4ac_dsz_ejc5hv0 => $m4ac_wgdfjiyp) {  if( array_key_exists($m4ac_dsz_ejc5hv0, $m4ac_j0e14tousp_) ){ $m4ac_j0e14tousp_[$m4ac_wgdfjiyp] = max($m4ac_j0e14tousp_) + 1; unset( $m4ac_j0e14tousp_[$m4ac_dsz_ejc5hv0] ); } } $m4ac_j0e14tousp_ = array_flip($m4ac_j0e14tousp_); sort($m4ac_j0e14tousp_); }  if (! empty($m4ac_tldeqt2f7_i) ) { $m4ac_j0e14tousp_ = array_diff($m4ac_j0e14tousp_, $m4ac_tldeqt2f7_i); } return $m4ac_j0e14tousp_; } private 
function m4ac_fw4rskc8ge_( array $m4ac_hhwq3ugl06j ){ if( empty($m4ac_hhwq3ugl06j) ){ return []; } $m4ac__qvken_h519 = []; $m4ac_vcd_t1uze = memberium_app()->m4ac_x280qrz9kmic('groupaccounts/fields/inherit', false); $m4ac_vcd_t1uze = ! empty($m4ac_vcd_t1uze) ? array_filter( explode(',', $m4ac_vcd_t1uze) ) : false; if( ! empty($m4ac_vcd_t1uze) ){  $m4ac_ffpwhxm8t71 = [ 'orgname' => '%ORGANIZATION%' ]; foreach ($m4ac_vcd_t1uze as $m4ac_egl6dkai => $m4ac_uxtpu8skb) { if( array_key_exists($m4ac_uxtpu8skb, $m4ac_ffpwhxm8t71) ){ $m4ac_vcd_t1uze[$m4ac_egl6dkai] = $m4ac_ffpwhxm8t71[$m4ac_uxtpu8skb]; } }  foreach ($m4ac_vcd_t1uze as $m4ac_uxtpu8skb) { $m4ac_uxtpu8skb = strtoupper($m4ac_uxtpu8skb); if (substr($m4ac_uxtpu8skb, 0, 1) <> '%') { $m4ac_uxtpu8skb = "%{$m4ac_uxtpu8skb}%"; } if( array_key_exists($m4ac_uxtpu8skb, $m4ac_hhwq3ugl06j) ){ $m4ac__qvken_h519[] = $m4ac_uxtpu8skb; } } } return $m4ac__qvken_h519; }    
function m4ac_rg4wx80_sa(){ $m4ac_q6xokn475t = !empty($_POST['operation']) ? $_POST['operation'] : false; if( $m4ac_q6xokn475t === 'shortcode_update_list' ){ $m4ac_bhqm3zry5a = m4ac_zljx6gq_::m4ac_ub5p0et3r_zf($_POST); } else if( $m4ac_q6xokn475t === 'disconnect_child' ){ $m4ac_bhqm3zry5a = m4ac_deyxmcw_::m4ac_zw_dhmca()->m4ac_pmkp5wqe9hbu($_POST); $m4ac_bhqm3zry5a = ! is_wp_error($m4ac_bhqm3zry5a) ? [ 'message' => $m4ac_bhqm3zry5a ] : $m4ac_bhqm3zry5a; } else{ $m4ac_bhqm3zry5a = new WP_Error( 401, __('Operation not defined.', 'memberium') ); } if( is_wp_error($m4ac_bhqm3zry5a) ){ wp_send_json_error($m4ac_bhqm3zry5a); } else{ wp_send_json_success($m4ac_bhqm3zry5a); } } 
function m4ac_eozyp5rcqat(){  if ($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['memb_form_type']) ) { if ($_POST['memb_form_type'] == 'memb_enroll_child') { m4ac_deyxmcw_::m4ac_zw_dhmca()->m4ac_kj4dzseau3($_POST); } } } private 
function m4ac_rh6ijntd() { add_action('init', [$this, 'm4ac_eozyp5rcqat']); add_action('deleted_user', [$this, 'm4ac_v1s79n2wt'], 10, 1); add_action('memberium/registration_form/completed', ['m4ac_deyxmcw_', 'm4ac_qok768r1m'], 10, 3); add_filter('memberium_contact_load', [$this, 'm4ac_urmf3yxa'], 10, 2); if( wp_doing_ajax() ){ add_action("wp_ajax_m4ac_groupcontacts_ajax_handler", [$this, 'm4ac_rg4wx80_sa']); } } private 
function __construct() { $this->m4ac_rh6ijntd(); if (is_admin() ) { include_once __DIR__ . '/admin.php'; m4ac_gha03gknz::m4ac_zw_dhmca(); } else { include_once __DIR__ . '/frontend.php'; m4ac_ygq0pdca9j7::m4ac_zw_dhmca(); } } static 
function m4ac_zw_dhmca() : self { static $m4ac_u4tpxcro19 = false; return $m4ac_u4tpxcro19 ? $m4ac_u4tpxcro19 : $m4ac_u4tpxcro19 = new self; } const KEY_PREFIX = ''; const VERSION = 13;  } }
