<?php
 if (class_exists('m4ac_c6rqypiacz4') ) { 
class m4ac_ckswq86yel5z { private 
function m4ac_bb2xs7vh() {  $m4ac_i8a6nj1oc5hl = [ 'general' => '<i class="fa fa-users"></i> General', 'tags' => '<i class="fa fa-tags"></i> Tags', ]; echo '<div class="wrap">'; echo '<h1>', _('Group Account Settings (BETA)'), '</h1>'; $m4ac_rlcs0yj3fk1 = m4ac_f5ovcw_1iln::m4ac_zw_dhmca()->m4ac_d8yqavu9w($m4ac_i8a6nj1oc5hl); $m4ac_hz8w1evc5 = '';  echo '<div class="tabcontent" style="margin-top:10px;">'; echo '<form method="POST" action="">'; wp_nonce_field(MEMBERIUM_MODULES_DIR, 'memberium_umbrella_options_nonce'); if( $m4ac_rlcs0yj3fk1 === 'general' ){    echo '<ul>'; echo '<h3>Management Automations</h3>'; $m4ac_ah90o86m = [ 'label' => 'Child Added Automation', 'value' => (string) memberium_app()->m4ac_x280qrz9kmic('groupaccounts/child/added', 0), 'style' => 'width:400px;', 'class' => 'dropdown automationdropdown', 'help_id' => 0000, 'help_text' => null ]; m4ac_f5ovcw_1iln::m4ac_zw_dhmca()->m4ac_qm47in38u('groupaccounts/child/added', $m4ac_ah90o86m); $m4ac_ah90o86m = [ 'label' => 'Child Cancel Automation', 'value' => (string) memberium_app()->m4ac_x280qrz9kmic('groupaccounts/child/cancel', 0), 'style' => 'width:400px;', 'class' => 'dropdown automationdropdown', 'help_id' => 0000, 'help_text' => null ]; m4ac_f5ovcw_1iln::m4ac_zw_dhmca()->m4ac_qm47in38u('groupaccounts/child/cancel', $m4ac_ah90o86m); $m4ac_ah90o86m = [ 'label' => 'Parent Added Automation', 'value' => (string) memberium_app()->m4ac_x280qrz9kmic('groupaccounts/parent/added', 0), 'style' => 'width:400px;', 'class' => 'dropdown automationdropdown', 'help_id' => 0000, 'help_text' => null ]; m4ac_f5ovcw_1iln::m4ac_zw_dhmca()->m4ac_qm47in38u('groupaccounts/parent/added', $m4ac_ah90o86m); echo '<hr>';    echo '<h3>Profile</h3>'; $m4ac_ah90o86m = [ 'label' => 'Parent Tag', 'value' => (string) memberium_app()->m4ac_x280qrz9kmic('groupaccounts/tag/parent'), 'style' => 'width:400px;', 'class' => 'dropdown taglistdropdown', 'help_id' => 1195, 'help_text' => null ]; m4ac_f5ovcw_1iln::m4ac_zw_dhmca()->m4ac_qm47in38u('groupaccounts/tag/parent', $m4ac_ah90o86m); $m4ac_fx1ahe2u7 = $this->m4ac_fw4rskc8ge_(); $m4ac_ah90o86m = [ 'label' => 'Inherited Fields', 'value' => array_filter(explode(',', memberium_app()->m4ac_x280qrz9kmic('groupaccounts/fields/inherit') )), 'style' => 'width:500px;', 'class' => 'memb-multiple-select groupAccountsInheritFields', 'multiple' => "multiple", 'options' => $m4ac_fx1ahe2u7, 'help_id' => 0000, 'help_text' => null ]; m4ac_f5ovcw_1iln::m4ac_zw_dhmca()->m4ac_rrsf4v236k('groupaccounts/fields/inherit[]', $m4ac_ah90o86m); echo m4ac_f5ovcw_1iln::m4ac_zw_dhmca()->m4ac_l1fpox937i8d('Inherit Memberships', 'groupaccounts/memberships/inherit', 0); $m4ac_ah90o86m = [ 'label' => 'Tag Inheritance White List', 'value' => memberium_app()->m4ac_x280qrz9kmic('groupaccounts/tag/whitelist'), 'style' => 'width:500px;', 'class' => 'dropdown multitaglist', 'placeholder' => "Allow only these tags to be inherited", 'multiple' => "multiple", 'help_id' => 0000, 'help_text' => null ]; m4ac_f5ovcw_1iln::m4ac_zw_dhmca()->m4ac_qm47in38u('groupaccounts/tag/whitelist[]', $m4ac_ah90o86m);  echo '<hr>';    echo '<h3>Child Accounts</h3>'; $m4ac_ah90o86m = [ 'label' => 'Minimum Child Accounts', 'value' => (string) memberium_app()->m4ac_x280qrz9kmic('groupaccounts/min_child_accounts', 10), 'style' => 'width:200px;', 'type' => "number", 'min' => "-1", 'max' => "999999", 'class' => '', 'help_id' => 0000, 'help_text' => null ]; m4ac_f5ovcw_1iln::m4ac_zw_dhmca()->m4ac_qm47in38u('groupaccounts/min_child_accounts', $m4ac_ah90o86m); $m4ac_ah90o86m = [ 'label' => 'Additional Children Field', 'value' => (string) memberium_app()->m4ac_x280qrz9kmic('groupaccounts/fields/additional'), 'style' => 'width:300px;', 'class' => 'groupAccountsInheritFields', 'options' => $m4ac_fx1ahe2u7, 'help_id' => 0000, 'help_text' => null ]; m4ac_f5ovcw_1iln::m4ac_zw_dhmca()->m4ac_rrsf4v236k('groupaccounts/fields/additional', $m4ac_ah90o86m); echo '<hr>'; echo '</ul>'; echo '<p><input type="submit" value="Update" class="button-primary"></p>'; } else if( $m4ac_rlcs0yj3fk1 === 'tags' ){ $m4ac_j0e14tousp_ = memberium_app()->m4ac_ni3dn9fc(false, memberium_app()->m4ac_x280qrz9kmic('tag_dropdown_filter') ); $m4ac_j0e14tousp_ = !empty($m4ac_j0e14tousp_['mc']) ? $m4ac_j0e14tousp_['mc'] : []; $m4ac_lus6o5dtmi7e = memberium_app()->m4ac_x280qrz9kmic('groupaccounts/tag/grants'); $m4ac_lus6o5dtmi7e = empty($m4ac_lus6o5dtmi7e) ? [] : $m4ac_lus6o5dtmi7e; $m4ac_ds8edby4k = array_intersect_key($m4ac_lus6o5dtmi7e, $m4ac_lus6o5dtmi7e); $m4ac_lus6o5dtmi7e = empty($m4ac_ds8edby4k) ? [] : $m4ac_lus6o5dtmi7e; $m4ac_flc9d_bpoa0z = memberium_app()->m4ac_x280qrz9kmic('groupaccounts/tag/translations'); $m4ac_flc9d_bpoa0z = empty($m4ac_flc9d_bpoa0z) ? [] : $m4ac_flc9d_bpoa0z;    echo '<br>'; echo '<fieldset style="border: 1px solid #ccc;padding: 1em;border-radius: 1em;padding:1em;">'; echo '<legend style="font-size: 1.3em;font-weight: 600;">Tag Grants</legend>';  echo '<div>'; echo '<label>Create New Tag Grant</label>'; $m4ac_ah90o86m = [ 'value' => array_key_first($m4ac_j0e14tousp_), 'style' => 'width:200px;', 'class' => 'dropdown taglistdropdown-notnone', 'required' => true, 'help_id' => 0000, 'help_text' => null ]; echo '<p style="display:inline-block">'; m4ac_f5ovcw_1iln::m4ac_zw_dhmca()->m4ac_qm47in38u('tag', $m4ac_ah90o86m); echo '<label style="width:auto;margin-left:1em;">Seats:  <input name="seats" type="number" min="1" value="1" style="width:60px;margin-right:30px;"></label> '; echo '<input type="submit" class="button-primary" name="add-tag-grant" value="Add Tag Grant">'; echo '</p></div>';  if( ! empty( $m4ac_lus6o5dtmi7e ) ){ echo '<div class="stuffbox" style="padding: 1em 1em 0;">'; echo '<table id="m4ac-table-tag-grant" class="wp-list-table widefat fixed striped" style="100%">'; echo '<tr style="font-weight:bold;">'; echo '<td style="width:150px;">Child Seats</td>'; echo '<td style="width:100px;">Tag Id</td>'; echo '<td>Tag Name</td>'; echo '<td></td>'; echo '</tr>'; foreach( $m4ac_lus6o5dtmi7e as $m4ac_rsau1b7dj2lr => $m4ac_kmj5_er2dbo ) { if( ! array_key_exists($m4ac_rsau1b7dj2lr, $m4ac_j0e14tousp_) ){ continue; } echo '<tr>'; echo '<td><input min=0 step=1 type="number" name="tag_grants[', $m4ac_rsau1b7dj2lr,']" value="', $m4ac_kmj5_er2dbo, '" style="width:70px; !important"></td>'; echo '<td>', $m4ac_rsau1b7dj2lr, '</td>'; echo '<td>', $m4ac_j0e14tousp_[$m4ac_rsau1b7dj2lr], '</td>';  echo '<td><button class="delete-tag-grant" value="', $m4ac_rsau1b7dj2lr, '" name="delete-tag-grant">'; echo '<span class="dashicons dashicons-trash" style="pointer-events: none;"></span>'; echo '<span class="screen-reader-text" style="pointer-events: none;">' . __('Delete Tag Grant', 'memberium') . '</span>'; echo '</button></td>'; echo '</tr>'; } echo '</table>'; echo '<p><input type="submit" class="button-primary" name="update-tag-grants" value="Update"></p>'; echo "</div>"; $m4ac_hz8w1evc5 .= $this->m4ac_y4w21rl0f7q( 'grant' ); } else { echo '<p>' . __('You have no tags assigned to give child account slots.  Create a new tag grant using the above form', 'memberium') . '</p>'; } echo '</fieldset>'; echo '<br><br>';    $m4ac_p3w2n5a0dce = [ 'value' => array_key_first($m4ac_j0e14tousp_), 'style' => 'width:200px;', 'class' => 'dropdown taglistdropdown-notnone', 'required' => true, 'help_id' => 0000, 'help_text' => null ]; $m4ac_j9mazlr2 = [ 'value' => 0, 'style' => 'width:200px;', 'class' => 'dropdown taglistdropdown', 'required' => true, 'help_id' => 0000, 'help_text' => null ]; echo '<fieldset style="border: 1px solid #ccc;padding: 1em;border-radius: 1em;padding:1em;">'; echo '<legend style="font-size: 1.3em;font-weight: 600;">Tag Translations</legend>';  echo '<div>'; echo '<label>Create New Tag Translation</label>'; echo '<p style="display:inline-block">'; m4ac_f5ovcw_1iln::m4ac_zw_dhmca()->m4ac_qm47in38u('oldtag', $m4ac_p3w2n5a0dce); m4ac_f5ovcw_1iln::m4ac_zw_dhmca()->m4ac_qm47in38u('newtag', $m4ac_j9mazlr2); echo '<input type="submit" class="button-primary" name="add-tag-translation" value="Set Tag Translation"></p>'; echo '</p></div>';  if( ! empty( $m4ac_flc9d_bpoa0z ) ){ echo '<div class="stuffbox" style="padding: 1em;">'; echo '<table id="m4ac-table-tag-translation" class="wp-list-table widefat fixed striped" style="100%">'; echo '<tr style="font-weight:bold;">'; echo '<td style="width:350px;">Original Tag</td>'; echo '<td style="width:350px;">New Tag</td>'; echo '<td></td>'; echo '</tr>'; foreach( $m4ac_flc9d_bpoa0z as $m4ac_j_2nd17f => $m4ac_rqk2e0rhbdc8 ) { echo '<tr>'; echo '<td>', $m4ac_j0e14tousp_[$m4ac_j_2nd17f], ' (', $m4ac_j_2nd17f, ')</td>'; echo '<td>', $m4ac_j0e14tousp_[$m4ac_rqk2e0rhbdc8], ' (', $m4ac_rqk2e0rhbdc8, ')</td>';  echo '<td><button class="delete-tag-translation" value="', $m4ac_j_2nd17f, '" name="delete-tag-translation">'; echo '<span class="dashicons dashicons-trash" style="pointer-events: none;"></span>'; echo '<span class="screen-reader-text" style="pointer-events: none;">' . __('Delete Tag Translation', 'memberium') . '</span>'; echo '</button></td>'; echo '</tr>'; } echo '</table>'; echo "</div>"; $m4ac_hz8w1evc5 .= $this->m4ac_y4w21rl0f7q( 'translation' ); }  else { echo '<p>' . __('You have no tag translations created.  Create a new tag translation using the above form', 'memberium') . '</p>'; } echo '</fieldset>'; } echo '</form>'; echo '</div>'; echo '</div>';  m4ac_f5ovcw_1iln::m4ac_zw_dhmca()->m4ac_iy1htpsfj(); if( ! empty( $m4ac_hz8w1evc5 ) ){ echo "<script id=\"m4ac-groupacounts\">{$m4ac_hz8w1evc5}</script>"; } } private 
function m4ac_u1j5xsn8ur09() { if ($_SERVER['REQUEST_METHOD'] == 'POST') {  $m4ac_bsijd7zrx = [ 'groupaccounts/memberships/inherit', ]; foreach($m4ac_bsijd7zrx as $m4ac_egl6dkai) { if (isset($_POST[$m4ac_egl6dkai]) ) { memberium_app()->m4ac_vlpfetc4son5( (int) (bool) $_POST[$m4ac_egl6dkai], $m4ac_egl6dkai ); } }  $m4ac_bsijd7zrx = [ 'groupaccounts/child/added', 'groupaccounts/child/cancel', 'groupaccounts/parent/added', 'groupaccounts/tag/parent', 'groupaccounts/min_child_accounts' ]; foreach($m4ac_bsijd7zrx as $m4ac_egl6dkai) { if (isset($_POST[$m4ac_egl6dkai]) ) { memberium_app()->m4ac_vlpfetc4son5( (int) $_POST[$m4ac_egl6dkai], $m4ac_egl6dkai ); } }  $m4ac_bsijd7zrx = [ 'groupaccounts/fields/inherit', 'groupaccounts/tag/whitelist', ]; foreach( $m4ac_bsijd7zrx as $m4ac_egl6dkai ) { if (isset($_POST[$m4ac_egl6dkai]) ) { $m4ac_y2mw1xc6rq = !empty($_POST[$m4ac_egl6dkai]) ? trim(implode(',', $_POST[$m4ac_egl6dkai])) : ''; memberium_app()->m4ac_vlpfetc4son5( $m4ac_y2mw1xc6rq, $m4ac_egl6dkai ); } }  $m4ac_bsijd7zrx = [ 'groupaccounts/fields/additional' ]; foreach( $m4ac_bsijd7zrx as $m4ac_egl6dkai ) { if (isset($_POST[$m4ac_egl6dkai]) ) { $m4ac_y2mw1xc6rq = !empty($_POST[$m4ac_egl6dkai]) ? trim($_POST[$m4ac_egl6dkai]) : ''; memberium_app()->m4ac_vlpfetc4son5( $m4ac_y2mw1xc6rq, $m4ac_egl6dkai ); } }     if ( isset( $_POST['add-tag-grant'] ) || isset( $_POST['delete-tag-grant'] ) ) { $m4ac_lus6o5dtmi7e = memberium_app()->m4ac_x280qrz9kmic('groupaccounts/tag/grants'); $m4ac_lus6o5dtmi7e = empty($m4ac_lus6o5dtmi7e) ? [] : $m4ac_lus6o5dtmi7e; if( isset( $_POST['add-tag-grant'] ) ){ $m4ac_lus6o5dtmi7e[$_POST['tag']] = (int) $_POST['seats']; } else if ( isset( $_POST['delete-tag-grant'] ) ) { $m4ac_dx8b9fvnotig = (int)$_POST['delete-tag-grant']; if( array_key_exists( $m4ac_dx8b9fvnotig, $m4ac_lus6o5dtmi7e) ){ unset($m4ac_lus6o5dtmi7e[$m4ac_dx8b9fvnotig]); } } memberium_app()->m4ac_vlpfetc4son5( $m4ac_lus6o5dtmi7e, 'groupaccounts/tag/grants' ); }  if ( isset( $_POST['update-tag-grants'] ) ) { $m4ac_lus6o5dtmi7e = $_POST['tag_grants']; foreach( $m4ac_lus6o5dtmi7e as $m4ac_o75qrnlisk => $m4ac_hs9uwr0qcp ) { if ( empty($m4ac_hs9uwr0qcp) ) { unset( $m4ac_lus6o5dtmi7e[$m4ac_o75qrnlisk] ); } } memberium_app()->m4ac_vlpfetc4son5( $m4ac_lus6o5dtmi7e, 'groupaccounts/tag/grants' ); }    if ( isset( $_POST['add-tag-translation'] ) || isset( $_POST['delete-tag-translation'] ) ) { $m4ac_flc9d_bpoa0z = memberium_app()->m4ac_x280qrz9kmic('groupaccounts/tag/translations'); $m4ac_flc9d_bpoa0z = empty($m4ac_flc9d_bpoa0z) ? [] : $m4ac_flc9d_bpoa0z;  if ( isset( $_POST['add-tag-translation'] ) ) { if ( $_POST['oldtag'] <> $_POST['newtag'] ) { $_POST['oldtag'] = (int) $_POST['oldtag']; $_POST['newtag'] = (int) $_POST['newtag']; $m4ac_flc9d_bpoa0z[$_POST['oldtag']] = $_POST['newtag']; }  if ( ( $_POST['oldtag'] == $_POST['newtag'] ) || $_POST['newtag'] == 0 ) { if( array_key_exists($_POST['oldtag'], $m4ac_flc9d_bpoa0z) ){ unset($m4ac_flc9d_bpoa0z[$_POST['oldtag']]); } } }  else if ( isset( $_POST['delete-tag-translation'] ) ) { $m4ac_dx8b9fvnotig = (int)$_POST['delete-tag-translation']; if( array_key_exists( $m4ac_dx8b9fvnotig, $m4ac_flc9d_bpoa0z) ){ unset($m4ac_flc9d_bpoa0z[$m4ac_dx8b9fvnotig]); } } memberium_app()->m4ac_vlpfetc4son5( $m4ac_flc9d_bpoa0z, 'groupaccounts/tag/translations' ); } } } 
function m4ac_fw4rskc8ge_() { $m4ac_sutzb0aq5 = memberium_app()->m4ac_n_1ak7e32(); $m4ac_cpqu4cml = [ 'email', 'password', 'firstname', 'lastname' ]; $m4ac_cpqu4cml = wp_parse_args( memberium_app()->m4ac_syu2e3n_d71(), $m4ac_cpqu4cml ); $m4ac_cpqu4cml = apply_filters('m4ac/groupaccounts/blocked/inheritable/fields', $m4ac_cpqu4cml, $m4ac_sutzb0aq5); $m4ac_u9uhl_ci87 = []; foreach($m4ac_sutzb0aq5 as $m4ac_wc9s2dnt4y) { if (! in_array($m4ac_wc9s2dnt4y, $m4ac_cpqu4cml)) { $m4ac_u9uhl_ci87[$m4ac_wc9s2dnt4y] = $m4ac_wc9s2dnt4y; } } return $m4ac_u9uhl_ci87; } 
function m4ac_y4w21rl0f7q( $m4ac_egl6dkai ){ $m4ac_xc52ekthop = sprintf(__('Are you sure you would like to delete this tag %s?', 'memberium'), $m4ac_egl6dkai ); return 'var $m4ac'.$m4ac_egl6dkai.' = document.getElementById("m4ac-table-tag-'.$m4ac_egl6dkai.'");
				if( null !== $m4ac'.$m4ac_egl6dkai.' ){
					$m4ac'.$m4ac_egl6dkai.'.addEventListener("click", function (e) {
						if ( e.target.matches(".delete-tag-'.$m4ac_egl6dkai.'") ) {
							if( ! confirm("'.$m4ac_xc52ekthop.'") ){
								e.preventDefault();
							}
						}
					});
				}'; } private 
function __construct() { if (! current_user_can('manage_options') ) { wp_die( __('You do not have sufficient permissions to access this page.') ); } $this->m4ac_u1j5xsn8ur09(); $this->m4ac_bb2xs7vh(); } static public 
function m4ac_lgfsc19jo3_r() { return self::$m4ac_u4tpxcro19 ? self::$m4ac_u4tpxcro19 : self::$m4ac_u4tpxcro19 = new self; } private static $m4ac_u4tpxcro19 = false; } }
