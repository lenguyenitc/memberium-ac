<?php
/**
 * Copyright (c) 2012-2021 David J Bullock
 * Web Power and Light
 */

 if (class_exists('m4ac_c6rqypiacz4') ) { final 
class m4ac_xihkav2ozs_p {    
function m4ac_j9r3pbfa25() { return [ '_memberium_access_tag', '_memberium_canc_tag', '_memberium_main_tag', '_memberium_payf_tag', '_memberium_trial_tag', ]; } 
function m4ac_z2g4l1scfam($m4ac__37l6rhivt2) { return [ 'main' => (string) get_post_meta($m4ac__37l6rhivt2, '_memberium_access_tag', true), 'trial' => (string) get_post_meta($m4ac__37l6rhivt2, '_memberium_trial_tag', true), 'payf' => (string) get_post_meta($m4ac__37l6rhivt2, '_memberium_payf_tag', true), 'canc' => (string) get_post_meta($m4ac__37l6rhivt2, '_memberium_canc_tag', true), ]; } 
function m4ac_c4dw29g3x1n( $m4ac_c2yk16ze3dfl, $m4ac_at_5xofh = 0 ) { $m4ac_w_np6cl1 = [ 'active', 'trialling', 'failing', ]; $m4ac_at_5xofh = empty($m4ac_at_5xofh) ? get_current_user_id() : $ev_user_id; $m4ac_s0jsvmet = new EDD_Recurring_Subscriber( $m4ac_at_5xofh, true ); $m4ac_v_p5ktnwq3ol = $m4ac_s0jsvmet->get_subscriptions( $m4ac_c2yk16ze3dfl, $m4ac_w_np6cl1 ); return count($m4ac_v_p5ktnwq3ol) > 1; }    
function m4ac_lgts0eo71zci($m4ac_g2bwdsig5) { $m4ac_uo08x_g7 = 0; $m4ac_odu3w6catzis = edd_get_payment_meta($m4ac_g2bwdsig5); $m4ac_at_5xofh = empty($m4ac_odu3w6catzis['user_info']['id']) ? 0 : $m4ac_odu3w6catzis['user_info']['id']; $m4ac_t85b_391h = edd_get_payment_meta_cart_details($m4ac_g2bwdsig5);  if (! $m4ac_at_5xofh) { $m4ac_wqzj0dt81 = empty($m4ac_odu3w6catzis['user_info']['email']) ? '' : $m4ac_odu3w6catzis['user_info']['email']; if ($m4ac_wqzj0dt81) { $m4ac_fheyfujga6 = get_user_by('email', $m4ac_wqzj0dt81); if ( is_a( $m4ac_fheyfujga6, 'WP_User' ) ) { $m4ac_at_5xofh = $m4ac_fheyfujga6->ID; } } }  if ($m4ac_at_5xofh) { $m4ac_uo08x_g7 = (int) m4ac_bem2ya5k::m4ac_pm63av15g($m4ac_at_5xofh); if ($m4ac_uo08x_g7) { $m4ac_vwur90xpqe = []; foreach ($m4ac_t85b_391h as $m4ac_xa86w2s0k) { $m4ac_ksj2qwec = empty($m4ac_xa86w2s0k['id']) ? 0 : $m4ac_xa86w2s0k['id']; $m4ac_teuk8tfrb7l = $this->m4ac_z2g4l1scfam($m4ac_ksj2qwec); $m4ac_vwur90xpqe[] = $m4ac_teuk8tfrb7l['main']; $m4ac_vwur90xpqe[] = (0 - $m4ac_teuk8tfrb7l['canc']); $m4ac_vwur90xpqe[] = (0 - $m4ac_teuk8tfrb7l['payf']); } $m4ac_vwur90xpqe = array_unique($m4ac_vwur90xpqe, SORT_NUMERIC); memberium_app()->m4ac_ocsjt69hrb($m4ac_vwur90xpqe, $m4ac_uo08x_g7); } } } 
function m4ac_n92mzr0qp($m4ac_bw1y8jqec30, $m4ac_md7c8zsu2o) { $m4ac_yfe6h7zls = empty($m4ac_md7c8zsu2o['customer_id']) ? 0 : $m4ac_md7c8zsu2o['customer_id']; $m4ac_vykuqfwdj_0 = empty($m4ac_md7c8zsu2o['status']) ? '' : $m4ac_md7c8zsu2o['status']; $m4ac_c2yk16ze3dfl = empty($m4ac_md7c8zsu2o['product_id']) ? 0 : $m4ac_md7c8zsu2o['product_id']; $m4ac_at_5xofh = empty($m4ac_md7c8zsu2o['user_id']) ? 0 : $m4ac_md7c8zsu2o['user_id']; if ($m4ac_at_5xofh) { $m4ac_uo08x_g7 = (int) m4ac_bem2ya5k::m4ac_pm63av15g($m4ac_at_5xofh); if ($m4ac_uo08x_g7) { $m4ac_teuk8tfrb7l = $this->m4ac_z2g4l1scfam($m4ac_c2yk16ze3dfl); $m4ac_vwur90xpqe = []; if ($m4ac_vykuqfwdj_0 == 'trialling') { $m4ac_vwur90xpqe[] = $m4ac_teuk8tfrb7l['trial']; } $m4ac_vwur90xpqe = array_unique($m4ac_vwur90xpqe, SORT_NUMERIC); memberium_app()->m4ac_ocsjt69hrb($m4ac_vwur90xpqe, $m4ac_uo08x_g7); } } } 
function m4ac_pze6s2hv4( $m4ac_r6s75vkfz, $m4ac_xiap6497osxq, $m4ac_r5mkahou1 ) { if ($m4ac_r6s75vkfz !== $m4ac_xiap6497osxq) { $m4ac_yfe6h7zls = $m4ac_r5mkahou1->customer_id; $m4ac_wkmfd7vlj81 = new EDD_Customer($m4ac_yfe6h7zls); $m4ac_at_5xofh = $m4ac_wkmfd7vlj81->user_id; $m4ac_c2yk16ze3dfl = $m4ac_r5mkahou1->product_id; $m4ac_wpicyxs3a6 = $self->m4ac_c4dw29g3x1n( $m4ac_c2yk16ze3dfl, $m4ac_at_5xofh ); if ($m4ac_at_5xofh) { $m4ac_uo08x_g7 = (int) m4ac_bem2ya5k::m4ac_pm63av15g($m4ac_at_5xofh); if ($m4ac_uo08x_g7) { $m4ac_vwur90xpqe = []; $m4ac_teuk8tfrb7l = $this->m4ac_z2g4l1scfam($m4ac_c2yk16ze3dfl); if ($m4ac_xiap6497osxq == 'active') { $m4ac_vwur90xpqe[] = $m4ac_teuk8tfrb7l['main']; $m4ac_vwur90xpqe[] = ( 0 - $m4ac_teuk8tfrb7l['trial'] ); $m4ac_vwur90xpqe[] = ( 0 - $m4ac_teuk8tfrb7l['canc'] ); $m4ac_vwur90xpqe[] = ( 0 - $m4ac_teuk8tfrb7l['payf'] ); } elseif ($m4ac_xiap6497osxq == 'cancelled') { $m4ac_vwur90xpqe[] = $m4ac_teuk8tfrb7l['canc']; $m4ac_vwur90xpqe[] = ( 0 - $m4ac_teuk8tfrb7l['trial'] ); } elseif ($m4ac_xiap6497osxq == 'expired') { $m4ac_vwur90xpqe[] = $m4ac_teuk8tfrb7l['payf']; $m4ac_vwur90xpqe[] = ( 0 - $m4ac_teuk8tfrb7l['trial'] ); } elseif ($m4ac_xiap6497osxq == 'completed') { $m4ac_vwur90xpqe[] = ( 0 - $m4ac_teuk8tfrb7l['main'] ); $m4ac_vwur90xpqe[] = ( 0 - $m4ac_teuk8tfrb7l['trial'] ); } elseif ($m4ac_xiap6497osxq == 'failing') {  } memberium_app()->m4ac_ocsjt69hrb($m4ac_vwur90xpqe, $m4ac_uo08x_g7); } } } }    private 
function m4ac_rh6ijntd() { add_action( 'edd_complete_purchase', [$this, 'm4ac_lgts0eo71zci'] ); add_action( 'edd_subscription_post_create', [$this, 'm4ac_n92mzr0qp'], 10, 2); add_action( 'edd_subscription_status_change', [$this, 'm4ac_pze6s2hv4'], 10, 3 ); } private 
function m4ac_o0qvl7es() { if (is_admin() ) { include_once __DIR__ . '/admin.php'; m4ac_e_bqir0ut::m4ac_zw_dhmca(); } } private 
function __construct() { $this->m4ac_rh6ijntd(); $this->m4ac_o0qvl7es(); } static 
function m4ac_zw_dhmca() : self { static $m4ac_u4tpxcro19 = false; return $m4ac_u4tpxcro19 ? $m4ac_u4tpxcro19 : $m4ac_u4tpxcro19 = new self; } } }
